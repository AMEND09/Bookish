@tailwind base;
@tailwind components;
@tailwind utilities;

/* PWA Window Controls Overlay Support */
:root {
  --titlebar-area-x: 0;
  --titlebar-area-y: 0;
  --titlebar-area-width: 100%;
  --titlebar-area-height: 33px;
}

/* When window controls overlay is active */
@supports (top: env(titlebar-area-height)) {
  @media (display-mode: window-controls-overlay) {
    :root {
      --titlebar-area-x: env(titlebar-area-x, 0);
      --titlebar-area-y: env(titlebar-area-y, 0);
      --titlebar-area-width: env(titlebar-area-width, 100%);
      --titlebar-area-height: env(titlebar-area-height, 33px);
    }

    /* Make the app area extend into the titlebar */
    #root {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      padding-top: var(--titlebar-area-height);
    }

    /* Custom titlebar styling */
    .app-titlebar {
      position: fixed;
      top: var(--titlebar-area-y);
      left: var(--titlebar-area-x);
      width: var(--titlebar-area-width);
      height: var(--titlebar-area-height);
      background-color: #D2691E;
      color: white;
      display: flex;
      align-items: center;
      padding: 0 16px;
      z-index: 9999;
      -webkit-app-region: drag;
      user-select: none;
    }

    .app-titlebar-content {
      -webkit-app-region: no-drag;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      font-weight: 600;
    }

    .app-titlebar-icon {
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #D2691E;
    }

    /* Adjust header padding when titlebar is present */
    .page-header {
      padding-top: calc(1rem + var(--titlebar-area-height));
    }

    /* Modal positioning adjustment */
    .modal-overlay {
      padding-top: var(--titlebar-area-height);
    }
  }
}

/* Fallback for browsers that don't support window controls overlay */
@media (display-mode: standalone) {
  #root {
    padding-top: 0;
  }
  
  .app-titlebar {
    display: none;
  }
}
