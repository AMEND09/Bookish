const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quagga.min-CciGUBy_.js","assets/vendor-RffLe_9z.js"])))=>i.map(i=>d[i]);
import{a as tt,b as st,r as v,u as U,c as Ye,d as nt,B as at,R as ot,e as H}from"./vendor-RffLe_9z.js";import{B as Y,A as Be,T as Ue,P as Z,H as pe,a as he,S as rt,b as je,c as it,U as lt,d as ct,C as ee,e as dt,F as mt,f as Ee,g as ne,L as xt,h as ht,i as z,j as De,k as Ce,X as we,l as Te,I as ut,m as gt,n as ft,o as pt,p as ae,q as jt,r as He,s as bt,t as Nt,M as vt,u as yt,v as qe,w as _e,x as be,y as wt,z as kt,D as Fe,E as Ie,Z as St,R as At}from"./icons-DR5iGGqA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();var ge={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re;function Bt(){if(Re)return se;Re=1;var s=tt(),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function h(u,m,f){var l,g={},d=null,N=null;f!==void 0&&(d=""+f),m.key!==void 0&&(d=""+m.key),m.ref!==void 0&&(N=m.ref);for(l in m)n.call(m,l)&&!o.hasOwnProperty(l)&&(g[l]=m[l]);if(u&&u.defaultProps)for(l in m=u.defaultProps,m)g[l]===void 0&&(g[l]=m[l]);return{$$typeof:t,type:u,key:d,ref:N,props:g,_owner:r.current}}return se.Fragment=a,se.jsx=h,se.jsxs=h,se}var Pe;function Et(){return Pe||(Pe=1,ge.exports=Bt()),ge.exports}var e=Et(),de={},Oe;function Dt(){if(Oe)return de;Oe=1;var s=st();return de.createRoot=s.createRoot,de.hydrateRoot=s.hydrateRoot,de}var Ct=Dt();const Q="https://openlibrary.org",Tt=async s=>{try{return(await(await fetch(`${Q}/search.json?q=${encodeURIComponent(s)}&limit=10`)).json()).docs.map(n=>({key:n.key,title:n.title,author_name:n.author_name,cover_i:n.cover_i,first_publish_year:n.first_publish_year,number_of_pages_median:n.number_of_pages_median}))}catch(t){return console.error("Error searching books:",t),[]}},_t=async s=>{var t,a;try{const n=s.replace("/works/",""),o=await(await fetch(`${Q}/works/${n}.json`)).json();let h=o.number_of_pages_median;!h&&o.editions&&(h=await Ft(o.editions)),h||(h=await It(n));let u=[];if(o.authors&&o.authors.length>0){const m=o.authors.slice(0,3).map(async l=>{try{return(await(await fetch(`${Q}${l.author.key}.json`)).json()).name}catch{return null}});u=(await Promise.all(m)).filter(l=>l!==null)}return{key:o.key,title:o.title,author_name:u,cover_i:(t=o.covers)==null?void 0:t[0],first_publish_year:o.first_publish_year,description:((a=o.description)==null?void 0:a.value)||o.description||"",number_of_pages_median:h}}catch(n){return console.error("Error fetching book details:",n),null}},Ft=async s=>{try{if(!s||!s.entries||s.entries.length===0)return;for(const t of s.entries.slice(0,3))try{const n=await(await fetch(`${Q}${t.key}.json`)).json();if(n.number_of_pages)return n.number_of_pages}catch(a){console.error("Error fetching edition:",a);continue}return}catch(t){console.error("Error getting page count from editions:",t);return}},It=async s=>{try{const a=await(await fetch(`${Q}/works/${s}/editions.json?limit=5`)).json();if(a.entries&&a.entries.length>0){for(const n of a.entries)if(n.number_of_pages)return n.number_of_pages}return}catch(t){console.error("Error fetching editions for page count:",t);return}},Rt=s=>{const t=new Date().getFullYear(),a=s.first_publish_year||t;return a<1900?320:a<1950?280:a<2e3?250:220},Pt=(s,t="M")=>s?`https://covers.openlibrary.org/b/id/${s}-${{S:"small",M:"medium",L:"large"}[t]}.jpg`:"/placeholder-cover.jpg",Ot=async s=>{var t;try{return((t=(await(await fetch(`${Q}/subjects/${encodeURIComponent(s.toLowerCase())}.json?limit=10`)).json()).works)==null?void 0:t.map(r=>{var o;return{key:r.key,title:r.title,author_name:((o=r.authors)==null?void 0:o.map(h=>h.name))||[],cover_i:r.cover_id,first_publish_year:r.first_publish_year,number_of_pages_median:r.number_of_pages_median}}))||[]}catch(a){return console.error("Error searching books by subject:",a),[]}},Mt=async s=>{var t,a;try{const n=s.replace(/[-\s]/g,""),r=await fetch(`${Q}/isbn/${n}.json`);if(!r.ok)return null;const o=await r.json();return{key:o.key,title:o.title,author_name:((t=o.authors)==null?void 0:t.map(h=>h.name))||[],cover_i:(a=o.covers)==null?void 0:a[0],first_publish_year:o.publish_date?new Date(o.publish_date).getFullYear():void 0,number_of_pages_median:o.number_of_pages}}catch(n){return console.error("Error searching book by ISBN:",n),null}},ke="bookish_books",We="bookish_current_book",ze="bookish_reading_sessions",$t="bookish_notes",Ke="bookish_stats",Xe="bookish_streak",oe="bookish_cached_books",K=(s,t)=>{const a=localStorage.getItem(s);return a?JSON.parse(a):t},W=(s,t)=>{localStorage.setItem(s,JSON.stringify(t))},ue=()=>K(ke,[]),Qe=s=>K(oe,{})[s]||null,Ne=s=>{const t=K(oe,{});t[s.key]={...s,cached_at:new Date().toISOString()},W(oe,t)},Lt=s=>{const t=ue(),a=t.findIndex(n=>n.key===s.key);a>=0?t[a]={...t[a],...s}:t.push(s),W(ke,t),Ne(s)},Jt=s=>{const t=ue().filter(n=>n.key!==s);W(ke,t);const a=K(oe,{});delete a[s],W(oe,a)},Yt=()=>K(We,null),Ut=s=>{W(We,s)},ie=()=>K(ze,[]),Ht=s=>{const t=ie(),a=t.findIndex(n=>n.id===s.id);a>=0?t[a]=s:t.push(s),W(ze,t),Kt(),Qt()},ve=s=>ie().filter(t=>t.bookId===s),Se=()=>{const s=localStorage.getItem("bookish_notes");return s?JSON.parse(s):[]},Me=s=>{const t=Se(),a=t.findIndex(n=>n.id===s.id);a>=0?t[a]=s:t.push(s),localStorage.setItem("bookish_notes",JSON.stringify(t))},qt=s=>Se().filter(t=>t.bookId===s),Wt=s=>{const t=Se().filter(a=>a.id!==s);W($t,t)},zt=()=>({totalBooksRead:0,totalPagesRead:0,totalReadingTime:0,readingTimeToday:0,readingTimeThisWeek:0,booksFinishedThisYear:0}),Ve=()=>K(Ke,zt()),Kt=()=>{const s=ie(),t=ue(),a=s.reduce((d,N)=>d+(N.duration||0),0),n=new Date().setHours(0,0,0,0),r=s.reduce((d,N)=>new Date(N.startTime).setHours(0,0,0,0)===n?d+(N.duration||0):d,0),o=new Date;o.setDate(o.getDate()-o.getDay()),o.setHours(0,0,0,0);const h=s.reduce((d,N)=>new Date(N.startTime)>=o?d+(N.duration||0):d,0),u=s.reduce((d,N)=>{const E=(N.endPage||0)-(N.startPage||0);return d+Math.max(0,E)},0),m=new Date(new Date().getFullYear(),0,1),f=new Set;s.forEach(d=>{if(new Date(d.startTime)>=m&&d.endPage){const E=t.find(F=>F.key===d.bookId);if(E){const F=E.number_of_pages_median;if(F&&d.endPage>=F)f.add(d.bookId);else if(!F){const k=Rt(E);d.endPage>=k*.9&&f.add(d.bookId)}}}}),JSON.parse(localStorage.getItem("bookish_books")||"[]").forEach(d=>{d.category==="completed"&&f.add(d.key)});const g={totalBooksRead:f.size,totalPagesRead:u,totalReadingTime:a,readingTimeToday:r,readingTimeThisWeek:h,booksFinishedThisYear:f.size};W(Ke,g)},Xt=()=>({currentStreak:0,longestStreak:0,lastReadDate:null}),Ae=()=>K(Xe,Xt()),Qt=()=>{const s=Ae(),t=new Date().setHours(0,0,0,0),a=s.lastReadDate?new Date(s.lastReadDate).setHours(0,0,0,0):null;if(a===t)return;let n=s.currentStreak;if(a){const o=new Date;o.setDate(o.getDate()-1),o.setHours(0,0,0,0),a===o.getTime()?n+=1:n=1}else n=1;const r={currentStreak:n,longestStreak:Math.max(n,s.longestStreak),lastReadDate:new Date().toISOString()};W(Xe,r)},Ge=v.createContext(void 0),V=()=>{const s=v.useContext(Ge);if(!s)throw new Error("useBooks must be used within a BookProvider");return s},Vt=({children:s})=>{const[t,a]=v.useState([]),[n,r]=v.useState(null),[o,h]=v.useState([]),[u,m]=v.useState([]);v.useEffect(()=>{const D=ue().map(B=>{const x=Qe(B.key);return x?{...B,...x}:B});a(D),r(Yt())},[]),v.useEffect(()=>{n?(h(ve(n.key)),m(qt(n.key))):(h([]),m([]))},[n]);const f=k=>{Lt(k),a(D=>{const B=D.findIndex(x=>x.key===k.key);if(B>=0){const x=[...D];return x[B]=k,x}else return[...D,k]})},l=k=>{Jt(k),a(D=>D.filter(B=>B.key!==k)),n&&n.key===k&&g(null)},g=k=>{Ut(k),r(k)},d=k=>{Ht(k),h(D=>{const B=D.findIndex(x=>x.id===k.id);if(B>=0){const x=[...D];return x[B]=k,x}else return[...D,k]})},N=k=>{Me(k),m(D=>[...D,k])},E=k=>{Me(k),m(D=>D.map(B=>B.id===k.id?k:B))},F=k=>{Wt(k),m(D=>D.filter(B=>B.id!==k))};return e.jsx(Ge.Provider,{value:{books:t,currentBook:n,sessions:o,notes:u,addBook:f,removeBook:l,setActiveBook:g,addSession:d,addNote:N,updateNote:E,deleteNote:F},children:s})},Ze=v.createContext(void 0),te=()=>{const s=v.useContext(Ze);if(!s)throw new Error("usePet must be used within a PetProvider");return s},ye=()=>({name:"Bookworm",level:1,experience:0,experienceToNext:100,happiness:100,hunger:50,energy:100,health:100,points:10,lastFed:new Date().toISOString(),lastPlayed:new Date().toISOString(),lastSlept:new Date().toISOString(),createdAt:new Date().toISOString(),totalBooksRead:0,totalReadingTime:0,evolutionStage:"egg",badges:[],mood:"content"}),et=()=>({booksReadToday:0,readingTimeToday:0,streakDays:0,lastActiveDate:new Date().toISOString()}),Gt=()=>{try{const s=localStorage.getItem("bookish_pet");if(s){const t=JSON.parse(s);return{...ye(),...t}}}catch(s){console.error("Error loading pet from storage:",s)}return ye()},Zt=()=>{try{const s=localStorage.getItem("bookish_pet_stats");if(s)return JSON.parse(s)}catch(s){console.error("Error loading pet stats from storage:",s)}return et()},es=s=>{localStorage.setItem("bookish_pet",JSON.stringify(s))},ts=s=>{localStorage.setItem("bookish_pet_stats",JSON.stringify(s))},ss=({children:s})=>{const[t,a]=v.useState(Gt),[n,r]=v.useState(Zt);v.useEffect(()=>{es(t)},[t]),v.useEffect(()=>{ts(n)},[n]),v.useEffect(()=>{const c=setInterval(()=>{const i=new Date,j=new Date(t.lastFed),S=(i.getTime()-j.getTime())/(1e3*60*60);S>1&&a(R=>{const I=Math.floor(S);return{...R,hunger:Math.max(0,R.hunger-I*2),energy:Math.max(0,R.energy-I),happiness:Math.max(0,R.happiness-I),mood:o(Math.max(0,R.happiness-I),Math.max(0,R.hunger-I*2),Math.max(0,R.energy-I))}});const p=i.toDateString(),A=new Date(n.lastActiveDate).toDateString();p!==A&&r(R=>({...R,booksReadToday:0,readingTimeToday:0,lastActiveDate:i.toISOString()}))},3e4);return()=>clearInterval(c)},[t.lastFed,n.lastActiveDate]);const o=(c,i,j)=>i<20?"hungry":j<20?"sleepy":c>80?"happy":c>60?"excited":c<30?"sad":"content",h=c=>100+c*50,u=(c,i)=>{let j=i,S=h(j);for(;c>=S;)j++,S=h(j);return{newLevel:j,newExpToNext:S}},m=c=>c<3?"egg":c<8?"baby":c<15?"child":c<25?"teen":c<40?"adult":"elder",f=()=>{const c=t.evolutionStage,i=t.mood,j={egg:{happy:"ðŸ¥š",content:"ðŸ¥š",sad:"ðŸ’”",excited:"âœ¨",sleepy:"ðŸ˜´",hungry:"ðŸ¥š"},baby:{happy:"ðŸ˜Š",content:"ðŸ›",sad:"ðŸ˜¢",excited:"ðŸ¤©",sleepy:"ðŸ˜´",hungry:"ðŸ˜‹"},child:{happy:"ðŸ˜„",content:"ðŸ¯",sad:"ðŸ˜­",excited:"ðŸ¤—",sleepy:"ðŸ’¤",hungry:"ðŸŽ"},teen:{happy:"ðŸ˜Ž",content:"ðŸ¦Š",sad:"ðŸ˜”",excited:"ðŸš€",sleepy:"ðŸ˜ª",hungry:"ðŸ•"},adult:{happy:"ðŸŒŸ",content:"ðŸ¦‰",sad:"ðŸ˜ž",excited:"ðŸŽ‰",sleepy:"ðŸ˜Œ",hungry:"ðŸ½ï¸"},elder:{happy:"ðŸ‘‘",content:"ðŸ‰",sad:"ðŸ˜Ÿ",excited:"ðŸŽŠ",sleepy:"ðŸ§˜",hungry:"ðŸ±"}};return j[c][i]||j[c].content},l=()=>{a(c=>{if(c.points<3)return c;const i=Math.min(100,c.hunger+30),j=Math.min(100,c.happiness+10),S=c.experience+5,{newLevel:p,newExpToNext:A}=u(S,c.level);return{...c,hunger:i,happiness:j,experience:S,level:p,experienceToNext:A,points:c.points-3,lastFed:new Date().toISOString(),evolutionStage:m(p),mood:o(j,i,c.energy)}})},g=()=>{a(c=>{if(c.points<5)return c;const i=Math.min(100,c.happiness+20),j=Math.max(0,c.energy-15),S=c.experience+10,{newLevel:p,newExpToNext:A}=u(S,c.level);return{...c,happiness:i,energy:j,experience:S,level:p,experienceToNext:A,points:c.points-5,lastPlayed:new Date().toISOString(),evolutionStage:m(p),mood:o(i,c.hunger,j)}})},d=()=>{a(c=>{const i=Math.min(100,c.energy+40),j=Math.min(100,c.health+10);return{...c,energy:i,health:j,lastSlept:new Date().toISOString(),mood:o(c.happiness,c.hunger,i)}})},N=(c,i=!1)=>{const p=Math.floor(c/5)+(i?50:0);p>0&&(a(A=>{const R=A.experience+p,I=Math.min(100,A.happiness+Math.floor(c/10)),$=A.totalReadingTime+c,{newLevel:J,newExpToNext:b}=u(R,A.level);return{...A,experience:R,level:J,experienceToNext:b,happiness:I,totalReadingTime:$,evolutionStage:m(J),mood:o(I,A.hunger,A.energy)}}),r(A=>({...A,readingTimeToday:A.readingTimeToday+c,lastActiveDate:new Date().toISOString()})))},E=()=>{a(c=>{const i=c.experience+50,j=Math.min(100,c.happiness+25),S=c.totalBooksRead+1,p=20,{newLevel:A,newExpToNext:R}=u(i,c.level),I=[...c.badges];return S===1&&!I.includes("first-book")&&I.push("first-book"),S===10&&!I.includes("book-lover")&&I.push("book-lover"),S===50&&!I.includes("bookworm")&&I.push("bookworm"),{...c,experience:i,level:A,experienceToNext:R,happiness:j,points:c.points+p,totalBooksRead:S,badges:I,evolutionStage:m(A),mood:o(j,c.hunger,c.energy)}}),r(c=>({...c,booksReadToday:c.booksReadToday+1,lastActiveDate:new Date().toISOString()}))},F=()=>({happy:"Your pet is very happy! Keep up the great reading!",excited:"Your pet is excited about your reading progress!",content:"Your pet is content and enjoying your company.",sad:"Your pet seems sad. Try feeding or playing with them!",sleepy:"Your pet is tired. Maybe they need some rest?",hungry:"Your pet is hungry! Don't forget to feed them."})[t.mood],k=()=>{const c=m(t.level+1),i=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return{current:t.level,required:i,stage:c}},D=()=>{const c=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return t.level>=c&&t.evolutionStage!==m(t.level)},B=()=>{a(c=>({...c,evolutionStage:m(c.level),happiness:100,health:100}))},x=()=>{const c=ye();a(c),r(et())},w=c=>{a(i=>({...i,name:c}))},P=()=>t.happiness<30?"sad":t.happiness<70?"neutral":"happy",M=()=>t.experience/t.experienceToNext*100;return e.jsx(Ze.Provider,{value:{pet:t,petStats:n,feedPet:l,playWithPet:g,petSleep:d,updatePetFromReading:N,updatePetFromBookCompletion:E,getPetMood:F,getPetEvolutionRequirement:k,resetPet:x,updatePetName:w,getPetEmoji:f,canEvolve:D,evolvePet:B,getPetHappinessLevel:P,getLevelProgress:M},children:s})},ns=()=>{const s=U(),t=[{icon:Y,title:"Track Your Reading",description:"Organize your books into 'Want to Read', 'Currently Reading', and 'Completed' categories with beautiful progress tracking."},{icon:Ue,title:"Reading Sessions",description:"Time your reading sessions and watch your progress grow. See exactly how much time you've invested in each book."},{icon:Z,title:"Take Notes",description:"Capture your thoughts, favorite quotes, and insights as you read. Never lose track of those brilliant moments."},{icon:pe,title:"Virtual Pet Companion",description:"Care for your adorable reading companion that grows and evolves as you complete books and reading sessions."},{icon:he,title:"Achievement System",description:"Unlock achievements and watch your reading streaks grow. Gamify your reading journey and stay motivated."},{icon:rt,title:"Beautiful Interface",description:"Enjoy a warm, book-inspired design that makes reading tracking a delightful experience every day."}],a=[{icon:je,title:"Build Better Habits",description:"Turn reading into a consistent, rewarding habit with gentle gamification and progress tracking."},{icon:it,title:"Stay Motivated",description:"Your virtual pet and achievement system keep you engaged and excited about your reading journey."},{icon:lt,title:"Mindful Reading",description:"Take notes and track your thoughts to engage more deeply with every book you read."}];return e.jsxs("div",{className:"min-h-screen bg-[#F7F5F3] max-w-full overflow-x-hidden",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#8B7355] rounded-2xl flex items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"font-serif text-4xl lg:text-6xl font-bold text-[#3A3A3A] mb-2",children:"Bookish"}),e.jsx("p",{className:"text-lg lg:text-xl text-[#8B7355] font-medium",children:"Your Reading Companion"})]}),e.jsxs("div",{className:"text-center mb-8 max-w-2xl mx-auto",children:[e.jsx("h2",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-4 leading-tight",children:"Transform Your Reading Journey with a Delightful Digital Companion"}),e.jsx("p",{className:"text-[#8B7355] leading-relaxed mb-6 text-base lg:text-lg",children:"Track your books, time your sessions, take meaningful notes, and care for your virtual pet as you build the reading habit you've always wanted."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s("/"),className:"bg-[#8B7355] text-white px-8 py-4 rounded-xl font-medium text-lg flex items-center gap-2 justify-center hover:bg-[#7A6349] transition-colors shadow-lg",children:["Start Reading Today",e.jsx(Be,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-transparent border-2 border-[#8B7355] text-[#8B7355] px-8 py-4 rounded-xl font-medium text-lg hover:bg-[#8B7355] hover:text-white transition-colors",children:"Browse Books"})]})]}),e.jsx("div",{className:"relative mb-12 max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 border-4 border-[#F0EDE8]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-[#F0EDE8] rounded w-3/4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#8B7355] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-1/2"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#D2691E] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-3/4"})]})]})]})]})})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Everything You Need"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Powerful features designed to enhance your reading experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((n,r)=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#F0EDE8] rounded-xl flex items-center justify-center mb-4",children:e.jsx(n.icon,{className:"w-8 h-8 text-[#8B7355]"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]})},r))})]}),e.jsx("div",{className:"bg-[#F0EDE8] py-16",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Why Choose Bookish?"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Join thousands of readers who've transformed their reading habits"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:a.map((n,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[#8B7355] rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(n.icon,{className:"w-10 h-10 text-white"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]},r))})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16 lg:px-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-[#8B7355] to-[#D2691E] rounded-2xl p-8 lg:p-12 text-white text-center",children:[e.jsx("h3",{className:"font-serif text-xl lg:text-2xl font-medium mb-8",children:"Join the Reading Revolution"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"10K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Books Tracked"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"5K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Happy Readers"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"50K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Reading Hours"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"25K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Notes Written"})]})]}),e.jsxs("button",{onClick:()=>s("/"),className:"bg-white text-[#8B7355] px-8 py-4 rounded-xl font-medium flex items-center gap-2 mx-auto hover:bg-gray-50 transition-colors text-lg",children:["Get Started Free",e.jsx(Be,{className:"w-5 h-5"})]})]})}),e.jsx("div",{className:"bg-[#3A3A3A] py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center lg:px-8",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-white mb-4",children:"Ready to Begin?"}),e.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed text-base lg:text-lg max-w-2xl mx-auto",children:"Start your reading journey today. Search for your first book, meet your virtual companion, and begin building the reading habit that will last a lifetime."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[e.jsx("button",{onClick:()=>s("/"),className:"flex-1 bg-[#D2691E] text-white px-6 py-4 rounded-xl font-medium hover:bg-[#B8541A] transition-colors",children:"Start Your Journey"}),e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 bg-transparent border-2 border-gray-500 text-gray-300 px-6 py-4 rounded-xl font-medium hover:border-gray-400 hover:text-gray-200 transition-colors",children:"View Library"})]})]})})]})},as=({greeting:s})=>{const t=U(),{pet:a}=te(),n=()=>{const r=a.mood;return{happy:"ðŸ˜Š",excited:"ðŸ¤©",content:"ðŸ˜Œ",sad:"ðŸ˜¢",sleepy:"ðŸ˜´",hungry:"ðŸŽ"}[r]||"ðŸ˜Œ"};return e.jsx("header",{className:"p-4 bg-[#F7F5F3]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:s}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Ready to dive into a story?"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[#F0EDE8] rounded-lg px-3 py-2 cursor-pointer hover:bg-[#E8E3DD] transition-colors",onClick:()=>t("/pet"),children:[e.jsx("span",{className:"text-lg",children:n()}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-[#3A3A3A]",children:a.name}),e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["Lv.",a.level]})]})]}),e.jsx("button",{className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(ct,{className:"w-5 h-5 text-[#8B7355]"})})]})]})})},os=({onContinueReading:s})=>{const{currentBook:t,sessions:a,setActiveBook:n}=V(),[r,o]=v.useState(!0);if(v.useEffect(()=>{if(t){const N=JSON.parse(localStorage.getItem("bookish_books")||"[]").some(E=>E.key===t.key);o(N),N||n(null)}},[t,n]),!t||!r)return e.jsx("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-[#8B7355] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto text-[#8B7355] mb-2"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"No book selected"}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Search for a book to start reading"})]})})});const h=[...a].sort((d,N)=>new Date(N.startTime).getTime()-new Date(d.startTime).getTime())[0],u=(h==null?void 0:h.endPage)||(h==null?void 0:h.startPage)||1,m=t.number_of_pages_median||0,f=m>0?Math.min(Math.round(u/m*100),100):0,l=m>0,g=l&&f>0;return e.jsxs("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Currently Reading"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-36 rounded-md overflow-hidden shadow-md flex-shrink-0",children:t.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${t.cover_i}-M.jpg`,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center text-white p-2",children:e.jsx("span",{className:"text-xs text-center font-serif",children:t.title})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-2 mb-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-2",children:["by ",t.author_name[0]]}),g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355] mb-2",children:[e.jsxs("span",{children:[f,"%"]}),e.jsx("div",{className:"flex-1 h-1.5 bg-[#F7F5F3] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${f}%`}})})]}),e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Page ",u," of ",m]})]}):l?e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Page ",u," of ",m]}):e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Currently on page ",u,e.jsx("div",{className:"text-xs text-[#8B7355] opacity-75 mt-1",children:"Page count unavailable"})]}),e.jsxs("button",{onClick:s,className:"w-full py-2 px-4 bg-[#D2691E] text-white rounded-lg text-sm font-medium hover:bg-[#A0522D] transition-colors flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Continue Reading"]})]})]})]})},me=({icon:s,value:t,label:a,color:n})=>e.jsxs("div",{className:"flex flex-col items-center p-3 bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n} mb-1`,children:s}),e.jsx("span",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:t}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:a})]}),rs=()=>{const s=Ve(),t=Ae(),a=n=>{if(n<60)return`${n} min`;const r=Math.floor(n/60),o=n%60;return o===0?`${r} hrs`:`${r}.${Math.floor(o/6)}`};return e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(me,{icon:e.jsx(ee,{className:"w-5 h-5 text-white"}),value:a(s.readingTimeToday),label:"Today",color:"bg-[#E59554]"}),e.jsx(me,{icon:e.jsx(ee,{className:"w-5 h-5 text-white"}),value:a(s.readingTimeThisWeek),label:"This Week",color:"bg-[#CD853F]"}),e.jsx(me,{icon:e.jsx(dt,{className:"w-5 h-5 text-white"}),value:s.totalBooksRead,label:"Books Read",color:"bg-[#8B7355]"}),e.jsx(me,{icon:e.jsx(mt,{className:"w-5 h-5 text-white"}),value:t.currentStreak,label:"Streak",color:"bg-[#D2691E]"})]})},xe=({icon:s,label:t,onClick:a})=>e.jsxs("button",{onClick:a,className:"flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-sm hover:bg-[#F0EDE8] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#F7F5F3] mb-2",children:e.jsx(s,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#3A3A3A]",children:t})]}),is=({type:s,title:t,timestamp:a,duration:n})=>{const r=()=>{switch(s){case"reading":return e.jsx(ee,{className:"w-4 h-4 text-[#E59554]"});case"note":return e.jsx(Ee,{className:"w-4 h-4 text-[#8B7355]"});case"completed":return e.jsx(Ee,{className:"w-4 h-4 text-[#D2691E]"})}},o=h=>{const u=new Date,m=new Date(h),f=Math.floor((u.getTime()-m.getTime())/(1e3*60));if(f<1)return"just now";if(f<60)return`${f} minute${f===1?"":"s"} ago`;const l=Math.floor(f/60);if(l<24)return`${l} hour${l===1?"":"s"} ago`;const g=Math.floor(l/24);return`${g} day${g===1?"":"s"} ago`};return e.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#F7F5F3] flex items-center justify-center flex-shrink-0",children:r()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-[#3A3A3A]",children:t}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355]",children:[e.jsx("span",{children:o(a)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[n," min"]})]})]})]})]})},ls=()=>{const s=U(),a=[...ie()].sort((r,o)=>new Date(o.startTime).getTime()-new Date(r.startTime).getTime()).slice(0,5),n=()=>{const r=new Date().getHours();return r<12?"Good morning":r<18?"Good afternoon":"Good evening"};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsx(as,{greeting:n()}),e.jsxs("main",{className:"px-4 py-2 space-y-6",children:[e.jsx(os,{onContinueReading:()=>s("/reading")}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(xe,{icon:ne,label:"Find Books",onClick:()=>s("/search")}),e.jsx(xe,{icon:Z,label:"My Notes",onClick:()=>s("/notes")}),e.jsx(xe,{icon:xt,label:"My Library",onClick:()=>s("/library")}),e.jsx(xe,{icon:ht,label:"Statistics",onClick:()=>s("/stats")})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Your Progress"}),e.jsx(rs,{})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"Recent Activity"}),a.length>0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.map(r=>e.jsx(is,{type:"reading",title:"Reading session completed",timestamp:r.endTime||r.startTime,duration:r.duration||0},r.id))}):e.jsx("p",{className:"text-sm text-[#8B7355] p-4 bg-white rounded-xl shadow-sm",children:"No recent activity. Start reading to track your progress!"})]}),e.jsx("section",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>s("/welcome"),className:"text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors underline",children:"Learn more about Bookish features"})})]})]})},cs="modulepreload",ds=function(s){return"/Bookish/"+s},$e={},Le=function(t,a,n){let r=Promise.resolve();if(a&&a.length>0){let h=function(f){return Promise.all(f.map(l=>Promise.resolve(l).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),m=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=h(a.map(f=>{if(f=ds(f),f in $e)return;$e[f]=!0;const l=f.endsWith(".css"),g=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":cs,l||(d.as="script"),d.crossOrigin="",d.href=f,m&&d.setAttribute("nonce",m),document.head.appendChild(d),l)return new Promise((N,E)=>{d.addEventListener("load",N),d.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(h){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=h,window.dispatchEvent(u),!u.defaultPrevented)throw h}return r.then(h=>{for(const u of h||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},ms=()=>{const s=U(),[t,a]=v.useState(""),[n,r]=v.useState([]),[o,h]=v.useState(!1),[u,m]=v.useState("general"),[f,l]=v.useState(!1);v.useEffect(()=>()=>{if(typeof window<"u"&&window.Quagga)try{window.Quagga.stop()}catch{}},[]);const g=async x=>{if(x.preventDefault(),!!t.trim()){h(!0);try{let w;u==="subject"?w=await Ot(t):w=await Tt(t),r(w)}catch(w){console.error("Error searching books:",w)}finally{h(!1)}}},d=async()=>{try{l(!0),setTimeout(()=>{E()},300)}catch(x){console.error("Error starting camera:",x),alert("Unable to access camera. Please check permissions."),l(!1)}},N=()=>{try{Le(()=>import("./quagga.min-CciGUBy_.js").then(x=>x.q),__vite__mapDeps([0,1])).then(x=>{const w=x.default;w.stop(),w.offDetected(),w.offProcessed(),console.log("Quagga stopped successfully")}).catch(x=>{console.log("Error stopping Quagga:",x)})}catch(x){console.log("Quagga cleanup error:",x)}l(!1)},E=async()=>{try{const x=document.querySelector("#barcode-scanner");if(!x){console.error("Scanner element not found");return}const P=(await Le(()=>import("./quagga.min-CciGUBy_.js").then(i=>i.q),__vite__mapDeps([0,1]))).default,M={inputStream:{name:"Live",type:"LiveStream",target:x,constraints:{width:480,height:320,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:1,frequency:5,decoder:{readers:["ean_reader","ean_8_reader"]},locate:!0};console.log("Initializing Quagga with config:",M),P.init(M,i=>{if(i){console.error("QuaggaJS initialization failed:",i),alert("Camera access failed. Please ensure you have granted camera permissions and are using HTTPS."),N();return}console.log("QuaggaJS initialized successfully"),P.start(),console.log("QuaggaJS started")}),P.onDetected(i=>{const j=i.codeResult.code;console.log("Barcode detected:",j);const S=k(j);console.log("Cleaned barcode:",S),F(S)?(console.log("Valid ISBN detected, searching..."),D(S),N()):console.log("Invalid ISBN format, continuing scan...")});let c=0;P.onProcessed(i=>{c++,c%30===0&&console.log("Processing frames... Count:",c),i&&i.codeResult&&i.codeResult.code&&console.log("Potential code detected:",i.codeResult.code)})}catch(x){console.error("Error loading Quagga:",x),alert("Failed to load barcode scanner. Please try again."),N()}},F=x=>{const w=x.replace(/[^0-9X]/gi,"");return w.length===10||w.length===13},k=x=>x.replace(/[^0-9X]/gi,""),D=async x=>{h(!0);try{const w=await Mt(x);w?(r([w]),a(x)):alert("No book found for this barcode")}catch(w){console.error("Error searching by ISBN:",w),alert("Error scanning barcode")}finally{h(!1)}},B=x=>{s(`/book?book=${encodeURIComponent(x.key)}`,{state:{bookData:x}})};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsxs("header",{className:"page-header p-4 bg-[#F0EDE8] shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsxs("form",{onSubmit:g,className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),placeholder:u==="subject"?"Search by subject (e.g. science, fiction)...":"Search for books...",className:"w-full py-2 px-4 pr-10 bg-white border border-[#E5E5E5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#E59554] text-[#3A3A3A]"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-7 h-7 flex items-center justify-center rounded-full bg-[#E59554] text-white",children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:d,className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#E59554] text-white hover:bg-[#D2691E] transition-colors",children:e.jsx(De,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex bg-white rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>m("general"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="general"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(ne,{className:"w-4 h-4"}),"General"]}),e.jsxs("button",{onClick:()=>m("subject"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="subject"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(Ce,{className:"w-4 h-4"}),"Subject"]})]})]}),f&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 m-4 max-w-sm w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Scan ISBN Barcode"}),e.jsx("button",{onClick:N,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(we,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"barcode-scanner",className:"w-full h-48 bg-black rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:"ðŸ“·"}),e.jsx("div",{children:"Initializing camera..."}),e.jsx("div",{className:"text-xs mt-1",children:"Make sure to allow camera access"})]})})}),e.jsx("div",{className:"absolute inset-0 border-2 border-[#E59554] rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-16 border-2 border-white rounded",children:e.jsx("div",{className:"absolute inset-0 border-t-2 border-[#E59554] animate-pulse"})})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-[#8B7355] mb-2",children:"Point camera at book's barcode"}),e.jsx("p",{className:"text-xs text-[#8B7355] mb-2",children:"Hold steady and ensure good lighting"}),e.jsx("p",{className:"text-xs text-[#8B7355] italic",children:"Looking for ISBN-13 barcodes (978...)"}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{const x=prompt("Enter ISBN manually (if barcode scan fails):");x&&(D(x.trim()),N())},className:"text-xs text-[#E59554] underline",children:"Enter ISBN manually"})})]})]})}),e.jsx("main",{className:"px-4 py-4",children:o?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E59554]"})}):n.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:u==="subject"?"Books in Subject":"Search Results"}),e.jsx("div",{className:"space-y-3",children:n.map(x=>e.jsxs("div",{onClick:()=>B(x),className:"flex gap-4 p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 overflow-hidden",children:[x.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${x.cover_i}-M.jpg`,alt:x.title,className:"w-full h-full object-cover",onError:w=>{var M;const P=w.target;P.style.display="none",(M=P.nextElementSibling)==null||M.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center ${x.cover_i?"hidden":""}`,children:e.jsx(Y,{className:"w-6 h-6 text-[#8B7355]"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:x.title}),x.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",x.author_name[0]]}),x.first_publish_year&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:x.first_publish_year})]})]},x.key))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 text-center",children:[e.jsx(ne,{className:"w-12 h-12 text-[#8B7355] mb-4 opacity-70"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Find your next great read"}),e.jsx("p",{className:"text-sm text-[#8B7355] max-w-xs mb-4",children:"Search for books by title, author, ISBN, or browse by subject. You can also scan a barcode!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-[#8B7355]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4"}),"Scan"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4"}),"Search"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Browse"]})]})]})})]})},le=({isOpen:s,onClose:t,onConfirm:a,title:n,message:r,type:o="confirm",confirmText:h="Confirm",cancelText:u="Cancel"})=>{if(!s)return null;const m=()=>{switch(o){case"alert":return e.jsx(Te,{className:"w-8 h-8 text-red-500"});case"success":return e.jsx(gt,{className:"w-8 h-8 text-green-500"});case"info":return e.jsx(ut,{className:"w-8 h-8 text-blue-500"});default:return e.jsx(Te,{className:"w-8 h-8 text-[#D2691E]"})}},f=()=>{a&&a(),t()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m(),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:n})}),e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F0EDE8] transition-colors",children:e.jsx(we,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] leading-relaxed mb-6",children:r}),e.jsxs("div",{className:"flex gap-3",children:[o==="confirm"&&e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 bg-[#F0EDE8] text-[#8B7355] rounded-lg font-medium text-sm hover:bg-[#E8E3DD] transition-colors",children:u}),e.jsx("button",{onClick:f,className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-colors ${o==="success"?"bg-green-600 text-white hover:bg-green-700":o==="alert"?"bg-red-600 text-white hover:bg-red-700":"bg-[#D2691E] text-white hover:bg-[#B8541A]"}`,children:o==="confirm"?h:"OK"})]})]})})})},ce=()=>{const[s,t]=v.useState(!1),[a,n]=v.useState({title:"",message:""}),[r,o]=v.useState(null);return{isOpen:s,config:a,onConfirm:r,close:()=>{t(!1),o(null)},showConfirm:(f,l,g,d)=>{n({title:f,message:l,type:"confirm",confirmText:d==null?void 0:d.confirmText,cancelText:d==null?void 0:d.cancelText}),o(()=>g),t(!0)},showAlert:(f,l,g="info")=>{n({title:f,message:l,type:g}),o(null),t(!0)}}},xs=()=>{const s=U(),[t]=Ye(),a=nt(),{books:n,setActiveBook:r,sessions:o,notes:h}=V(),{updatePetFromBookCompletion:u}=te(),[m,f]=v.useState(!1),[l,g]=v.useState(null),[d,N]=v.useState(!1),[E,F]=v.useState(!1),[k,D]=v.useState(!1),B=ce(),x=t.get("book");if(v.useEffect(()=>{var y;if((y=a.state)!=null&&y.bookData)g(a.state.bookData);else{const C=n.find(O=>O.key===x);if(C)g(C);else{s("/");return}}},[x,n,a.state,s]),v.useEffect(()=>{if(l){const C=JSON.parse(localStorage.getItem("bookish_books")||"[]").some(_=>_.key===l.key);N(C);const O=Qe(l.key);if(O&&O.description&&!l.description){g(_=>({..._,description:O.description,number_of_pages_median:O.number_of_pages_median||_.number_of_pages_median}));return}l.description||(f(!0),_t(l.key).then(_=>{if(_){const q={...l,description:_.description,number_of_pages_median:_.number_of_pages_median||l.number_of_pages_median};g(q),Ne(q)}}).catch(_=>{console.error("Error fetching book details:",_),O&&g(q=>({...q,...O}))}).finally(()=>{f(!1)}))}},[l]),!l)return e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B7355] mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Back to Search"})]})});const w=y=>{const C=JSON.parse(localStorage.getItem("bookish_books")||"[]");if(!C.some(O=>O.key===l.key)){const O={...l,category:y,dateAdded:new Date().toISOString()};C.push(O),localStorage.setItem("bookish_books",JSON.stringify(C)),Ne(O);const _=JSON.parse(localStorage.getItem("myBooks")||"[]");_.some(q=>q.key===l.key)||(_.push(O),localStorage.setItem("myBooks",JSON.stringify(_))),N(!0),F(!1),y==="currently-reading"&&(r(l),s("/reading"))}},P=()=>{B.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{var q;const C=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(X=>X.key===l.key?{...X,category:"completed",completedAt:new Date().toISOString()}:X);localStorage.setItem("bookish_books",JSON.stringify(C));const _=JSON.parse(localStorage.getItem("myBooks")||"[]").map(X=>X.key===l.key?{...X,category:"completed",completedAt:new Date().toISOString()}:X);localStorage.setItem("myBooks",JSON.stringify(_)),u(),l.key===((q=JSON.parse(localStorage.getItem("bookish_current_book")||"null"))==null?void 0:q.key)&&r(null),B.showAlert("Congratulations!","ðŸŽ‰ You've completed the book and your pet gained experience!","success"),setTimeout(()=>{s("/library")},1500)},{confirmText:"Mark Complete",cancelText:"Cancel"})},M=l.number_of_pages_median||0,c=[...o].filter(y=>y.bookId===l.key).sort((y,C)=>new Date(C.startTime).getTime()-new Date(y.startTime).getTime())[0],i=(c==null?void 0:c.endPage)||(c==null?void 0:c.startPage)||1,j=M>0?Math.min(Math.round(i/M*100),100):0,S=o.filter(y=>y.bookId===l.key).reduce((y,C)=>y+(C.duration||0),0),p=Math.floor(S/60),A=S%60,R=p>0?`${p} hr${p!==1?"s":""} ${A>0?`${A} min`:""}`:`${A} min`,I=h.filter(y=>y.bookId===l.key),J=JSON.parse(localStorage.getItem("bookish_books")||"[]").find(y=>y.key===l.key),b=(J==null?void 0:J.category)==="completed",T=()=>{s(-1)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("div",{className:"p-4 bg-[#F7F5F3]",children:e.jsx("button",{onClick:T,className:"w-8 h-8 flex items-center justify-center bg-[#F0EDE8] rounded-full hover:bg-[#E8E3DD] transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden shadow-lg flex-shrink-0",children:l.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${l.cover_i}-M.jpg`,alt:l.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center",children:e.jsx(Y,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A] mb-2 leading-tight",children:l.title}),l.author_name&&l.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-3",children:["by ",l.author_name[0]]}),e.jsxs("div",{className:"space-y-1",children:[l.first_publish_year&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["First published: ",l.first_publish_year]}),M>0&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:[M," pages"]})]})]})]}),d&&M>0&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-[#3A3A3A]",children:[j,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-[#F0EDE8] rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${j}%`}})}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:["Page ",i," of ",M]})]}),e.jsx("div",{className:"w-px bg-[#F0EDE8]"}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[e.jsx(Ue,{className:"w-5 h-5 text-[#8B7355] mb-1"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A]",children:R}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Total Time"})]})]}),m?e.jsx("div",{className:"h-32 bg-[#F0EDE8] animate-pulse rounded-lg mb-6"}):l.description?e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"About this book"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-sm text-[#3A3A3A] leading-relaxed ${k?"":"line-clamp-4"}`,children:typeof l.description=="string"?l.description:"No description available."}),l.description&&l.description.length>200&&e.jsx("button",{onClick:()=>D(!k),className:"mt-2 flex items-center gap-1 text-sm font-medium text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:k?e.jsxs(e.Fragment,{children:["Show less",e.jsx(ft,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Read more",e.jsx(pt,{className:"w-4 h-4"})]})})]})]}):null,d&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"My Notes"}),e.jsx("button",{onClick:()=>s("/notes"),className:"text-xs font-medium text-[#D2691E]",children:"View All"})]}),I.length>0?e.jsx("div",{className:"space-y-2",children:I.slice(0,2).map(y=>e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[y.chapter?`Chapter: ${y.chapter}`:"",y.chapter&&y.page?" â€¢ ":"",y.page?`Page ${y.page}`:""]}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:new Date(y.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] line-clamp-2",children:y.content})]},y.id))}):e.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"w-6 h-6 text-[#8B7355] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-1",children:"No notes yet"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"text-xs font-medium text-[#D2691E]",children:"Add Your First Note"})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:d?e.jsx(e.Fragment,{children:b?e.jsxs("div",{className:"flex-1 py-3 px-4 bg-green-100 text-green-700 rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Completed"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s("/notes/add"),className:"flex-1 py-3 px-4 bg-white border border-[#D2691E] text-[#D2691E] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Add Note"]}),e.jsxs("button",{onClick:()=>{r(l),s("/reading")},className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(jt,{className:"w-5 h-5"}),"Start Reading"]}),e.jsx("button",{onClick:P,className:"py-3 px-3 bg-green-600 text-white rounded-lg font-medium text-sm flex items-center justify-center",title:"Mark as Completed",children:e.jsx(ae,{className:"w-5 h-5"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 py-3 px-4 bg-white border border-[#8B7355] text-[#8B7355] rounded-lg font-medium text-sm",children:"View Library"}),e.jsxs("button",{onClick:()=>F(!0),className:"flex-1 py-3 px-4 bg-[#8B7355] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Add to Library"]})]})})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Add to Library"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose where to add this book:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>w("want-to-read"),className:"w-full p-4 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] mb-1",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Save for later reading"})]}),e.jsxs("button",{onClick:()=>w("currently-reading"),className:"w-full p-4 bg-[#8B7355] text-white rounded-lg text-left hover:bg-[#7A6349] transition-colors",children:[e.jsx("div",{className:"font-medium mb-1",children:"Start Reading Now"}),e.jsx("div",{className:"text-xs opacity-90",children:"Add to library and begin reading session"})]})]}),e.jsx("button",{onClick:()=>F(!1),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"})]})}),e.jsx(le,{isOpen:B.isOpen,onClose:B.close,onConfirm:B.onConfirm||void 0,title:B.config.title,message:B.config.message,type:B.config.type,confirmText:B.config.confirmText,cancelText:B.config.cancelText})]})},L=[];for(let s=0;s<256;++s)L.push((s+256).toString(16).slice(1));function hs(s,t=0){return(L[s[t+0]]+L[s[t+1]]+L[s[t+2]]+L[s[t+3]]+"-"+L[s[t+4]]+L[s[t+5]]+"-"+L[s[t+6]]+L[s[t+7]]+"-"+L[s[t+8]]+L[s[t+9]]+"-"+L[s[t+10]]+L[s[t+11]]+L[s[t+12]]+L[s[t+13]]+L[s[t+14]]+L[s[t+15]]).toLowerCase()}let fe;const us=new Uint8Array(16);function gs(){if(!fe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fe=crypto.getRandomValues.bind(crypto)}return fe(us)}const fs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Je={randomUUID:fs};function re(s,t,a){var r;if(Je.randomUUID&&!s)return Je.randomUUID();s=s||{};const n=s.random??((r=s.rng)==null?void 0:r.call(s))??gs();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,hs(n)}const G="bookish_active_timer",ps=({bookId:s,startPage:t})=>{const[a,n]=v.useState({sessionId:null,startTime:null,totalElapsed:0,lastPauseTime:null,isActive:!1}),r=v.useRef();v.useEffect(()=>{const g=localStorage.getItem(G);if(g)try{const d=JSON.parse(g);d.bookId===s?n(d.timerState):localStorage.removeItem(G)}catch(d){console.error("Error loading timer state:",d),localStorage.removeItem(G)}},[s]),v.useEffect(()=>{a.sessionId&&localStorage.setItem(G,JSON.stringify({bookId:s,startPage:t,timerState:a}))},[a,s,t]),v.useEffect(()=>(a.isActive?r.current=setInterval(()=>{n(g=>({...g}))},1e3):r.current&&clearInterval(r.current),()=>{r.current&&clearInterval(r.current)}),[a.isActive]);const o=()=>{if(!a.startTime)return 0;let g=a.totalElapsed;if(a.isActive&&a.lastPauseTime===null){const d=Date.now(),N=new Date(a.startTime).getTime();g+=Math.floor((d-N)/1e3)}return g},h=o(),u=()=>{const g=new Date().toISOString();a.sessionId?n(d=>({...d,startTime:g,lastPauseTime:null,isActive:!0})):n({sessionId:re(),startTime:g,totalElapsed:0,lastPauseTime:null,isActive:!0})},m=()=>{if(!a.isActive||!a.startTime)return;const g=Date.now(),d=new Date(a.startTime).getTime(),N=Math.floor((g-d)/1e3);n(E=>({...E,totalElapsed:E.totalElapsed+N,lastPauseTime:new Date().toISOString(),isActive:!1}))},f=g=>{const d=o(),N={id:a.sessionId||re(),bookId:s,startTime:a.startTime||new Date().toISOString(),endTime:new Date().toISOString(),startPage:t,endPage:g,duration:Math.floor(d/60)};return n({sessionId:null,startTime:null,totalElapsed:0,lastPauseTime:null,isActive:!1}),localStorage.removeItem(G),N},l=()=>{n({sessionId:null,startTime:null,totalElapsed:0,lastPauseTime:null,isActive:!1}),localStorage.removeItem(G)};return{isActive:a.isActive,elapsedTime:h,startTimer:u,pauseTimer:m,stopTimer:f,resetTimer:l}},js=()=>{const s=U(),{currentBook:t,addSession:a,addNote:n}=V(),{updatePetFromReading:r}=te(),o=ce(),[h,u]=v.useState(1),[m,f]=v.useState(1),[l,g]=v.useState(!1),[d,N]=v.useState(""),[E,F]=v.useState(""),[k,D]=v.useState(!1),[B,x]=v.useState(!1),{isActive:w,elapsedTime:P,startTimer:M,pauseTimer:c,stopTimer:i,resetTimer:j}=ps({bookId:(t==null?void 0:t.key)||"",startPage:1});if(v.useEffect(()=>{if(t&&!B){const b=localStorage.getItem("bookish_active_timer");if(b)try{const C=JSON.parse(b);if(C.bookId===t.key){u(C.startPage),f(C.startPage),x(!0);return}}catch(C){console.error("Error parsing active timer:",C)}const y=JSON.parse(localStorage.getItem("bookish_reading_sessions")||"[]").filter(C=>C.bookId===t.key);if(y.length>0){y.sort((O,_)=>new Date(_.startTime).getTime()-new Date(O.startTime).getTime());const C=y[0].endPage||y[0].startPage;u(C),f(C)}x(!0)}},[t,B]),v.useEffect(()=>{const b=T=>{w&&(T.preventDefault(),T.returnValue="You have an active reading session. Are you sure you want to leave?")};return window.addEventListener("beforeunload",b),()=>window.removeEventListener("beforeunload",b)},[w]),!t)return s("/"),null;const S=()=>{try{if(!t){o.showAlert("Error","No book selected","alert");return}if(m<h){o.showAlert("Invalid Page Range","End page cannot be less than start page","alert");return}if(P<=0){o.showAlert("No Time Recorded","Please start the timer to record reading time","alert");return}const b=i(m);if(!b)throw new Error("Failed to create session");if(a(b),b.duration&&r(b.duration),d.trim()){const T={id:re(),bookId:t.key,page:m,chapter:E.trim()||void 0,content:d.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(T)}s("/")}catch(b){console.error("Error finishing session:",b),o.showAlert("Error","Failed to save reading session. Please try again.","alert")}},p=b=>{const T=Math.floor(b/3600),y=Math.floor(b%3600/60),C=b%60;return T>0?`${T}:${y.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`:`${y.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},A=t.number_of_pages_median||9999,R=t.number_of_pages_median&&t.number_of_pages_median>0,I=()=>{const b=(t==null?void 0:t.number_of_pages_median)||0;return b>0&&m>=b},$=b=>{const T=Math.max(h,Math.min(b,A));f(T),t!=null&&t.number_of_pages_median&&T>=t.number_of_pages_median&&D(!0)},J=()=>{try{const b=i(m);if(b&&(a(b),b.duration&&r(b.duration)),d.trim()){const _={id:re(),bookId:t.key,page:m,chapter:E.trim()||void 0,content:d.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(_)}const y=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(_=>_.key===t.key?{..._,category:"completed",completedAt:new Date().toISOString()}:_);localStorage.setItem("bookish_books",JSON.stringify(y));const O=JSON.parse(localStorage.getItem("myBooks")||"[]").map(_=>_.key===t.key?{..._,category:"completed",completedAt:new Date().toISOString()}:_);localStorage.setItem("myBooks",JSON.stringify(O)),localStorage.removeItem("bookish_current_book"),r((b==null?void 0:b.duration)||0,!0),o.showAlert("Congratulations!","ðŸŽ‰ You've completed the book and your pet gained bonus experience!","success"),setTimeout(()=>{s("/library")},2e3)}catch(b){console.error("Error marking book as finished:",b),o.showAlert("Error","Failed to mark book as completed. Please try again.","alert")}};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-20",children:[e.jsxs("header",{className:"p-4 bg-[#F0EDE8] flex items-center gap-3 shadow-sm",children:[e.jsx("button",{onClick:()=>{w||P>0?o.showConfirm("Leave Reading Session",w?"Your timer is still running. The session will continue in the background if you leave.":"You have an unsaved reading session. Do you want to save it or discard it?",()=>{!w&&P>0?S():s(-1)},{confirmText:w?"Leave (Keep Timer)":"Save & Leave",cancelText:"Stay"}):s(-1)},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Reading Session"}),w&&e.jsx("div",{className:"ml-auto",children:e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})})]}),e.jsx("main",{className:"p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex items-center p-4 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-12 h-16 rounded overflow-hidden mr-3",children:t.cover_i?e.jsx("img",{src:Pt(t.cover_i,"S"),alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355]",children:["by ",t.author_name[0]]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#F7F5F3] flex items-center justify-center shadow-inner",children:e.jsx("span",{className:"font-serif text-2xl font-medium text-[#3A3A3A]",children:p(P)})})}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("button",{onClick:w?c:M,className:"w-16 h-16 rounded-full bg-[#D2691E] text-white flex items-center justify-center shadow-md hover:bg-[#A0522D] transition-colors",children:w?e.jsx(bt,{className:"w-8 h-8"}):e.jsx(Nt,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"flex gap-6 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Start Page"}),e.jsx("input",{type:"number",value:h,onChange:b=>{const T=Math.max(1,Math.min(parseInt(b.target.value)||1,A));u(T),m<T&&f(T)},min:"1",max:A,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]",disabled:w||P>0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"End Page"}),e.jsx("input",{type:"number",value:m,onChange:b=>$(parseInt(b.target.value)||h),min:h,max:A,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]})]}),I()&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Congratulations!"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"You've reached the last page! Would you like to mark this book as completed?"}),e.jsx("button",{onClick:J,className:"w-full py-2 px-4 bg-green-600 text-white rounded-lg font-medium text-sm hover:bg-green-700 transition-colors",children:"Mark as Finished"})]}),!R&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700",children:"ðŸ“˜ Page count unavailable for this book. You can still track your reading progress by entering the pages you read."})}),e.jsx("button",{onClick:()=>g(!l),className:"w-full py-2 text-sm text-[#D2691E] mb-2",children:l?"Hide Note Form":"+ Add a note about this session"}),l&&e.jsxs("div",{className:"space-y-4 mb-4 p-4 bg-[#F7F5F3] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:E,onChange:b=>F(b.target.value),placeholder:"e.g. Chapter 5",className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Note"}),e.jsx("textarea",{value:d,onChange:b=>N(b.target.value),placeholder:"Write your thoughts about this reading session...",rows:4,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A] resize-none"})]})]})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>{o.showConfirm("Cancel Session",w?"This will stop your timer and discard the session. Are you sure?":"Are you sure you want to cancel this session? All progress will be lost.",()=>{j(),s(-1)},{confirmText:"Yes, Cancel",cancelText:"Keep Reading"})},className:"flex-1 py-3 px-4 bg-white border border-[#E5E5E5] text-[#8B7355] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Cancel"]}),I()?e.jsxs("button",{onClick:J,className:"flex-1 py-3 px-4 bg-green-600 text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Mark as Finished"]}):e.jsxs("button",{onClick:S,className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:P<=0||m<h,children:[e.jsx(ae,{className:"w-5 h-5"}),"Finish Session"]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Congratulations!"}),e.jsxs("p",{className:"text-sm text-[#8B7355] mb-6",children:[`You've reached the last page of "`,t.title,'". Would you like to mark it as completed?']}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:J,className:"w-full py-3 px-4 bg-green-600 text-white rounded-lg font-medium text-sm hover:bg-green-700 transition-colors",children:"Yes, Mark as Completed"}),e.jsx("button",{onClick:()=>D(!1),className:"w-full py-2 px-4 bg-white border border-[#E5E5E5] text-[#8B7355] rounded-lg font-medium text-sm hover:bg-[#F7F5F3] transition-colors",children:"Continue Reading"})]})]})})}),e.jsx(le,{isOpen:o.isOpen,onClose:o.close,onConfirm:o.onConfirm||void 0,title:o.config.title,message:o.config.message,type:o.config.type,confirmText:o.config.confirmText,cancelText:o.config.cancelText})]})},bs=()=>{const s=U(),{books:t}=V(),{updatePetFromBookCompletion:a}=te(),n=ce(),[r,o]=v.useState(null),[h,u]=v.useState(null),[m,f]=v.useState({}),[l,g]=v.useState([]);v.useEffect(()=>{(()=>{const j=JSON.parse(localStorage.getItem("bookish_books")||"[]");g(j)})()},[]),v.useEffect(()=>{const i=()=>{o(null)};if(r)return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[r]);const d=l.length>0?l:t,N=i=>{s(`/book?book=${i.key}`,{state:{bookData:i}})},E=(i,j)=>{j.stopPropagation(),n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const p=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(J=>J.key!==i);localStorage.setItem("bookish_books",JSON.stringify(p));const R=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(J=>J.key!==i);localStorage.setItem("myBooks",JSON.stringify(R));const I=JSON.parse(localStorage.getItem("bookish_cached_books")||"{}");delete I[i],localStorage.setItem("bookish_cached_books",JSON.stringify(I));const $=JSON.parse(localStorage.getItem("bookish_current_book")||"null");$&&$.key===i&&localStorage.removeItem("bookish_current_book"),g(p)},{confirmText:"Remove",cancelText:"Keep Book"}),o(null)},F=(i,j,S)=>{const A=JSON.parse(localStorage.getItem("bookish_books")||"[]").map($=>$.key===i?{...$,category:j}:$);localStorage.setItem("bookish_books",JSON.stringify(A));const I=JSON.parse(localStorage.getItem("myBooks")||"[]").map($=>$.key===i?{...$,category:j}:$);localStorage.setItem("myBooks",JSON.stringify(I)),g(A),u(null),o(null)},k=(i,j)=>{j.stopPropagation(),n.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{F(i,"completed"),a(),setTimeout(()=>{n.showAlert("Book Completed!","ðŸŽ‰ Book marked as completed! Check your pet for an experience boost!","success")},100)},{confirmText:"Mark Complete",cancelText:"Cancel"}),o(null)},D=(i,j)=>{j.stopPropagation(),o(r===i?null:i)},B=i=>{const j=ve(i);if(j.length===0)return 0;const S=j[j.length-1],p=t.find(A=>A.key===i);return!(p!=null&&p.number_of_pages_median)||!S.endPage?0:Math.min(100,Math.round(S.endPage/p.number_of_pages_median*100))},x=i=>ve(i).reduce((S,p)=>S+(p.duration||0),0),w=i=>{const j=Math.floor(i/60),S=i%60;return j>0?`${j}h ${S}m`:`${S}m`},P=()=>{const i=[],j=[],S=[];return d.forEach(p=>{const A=B(p.key),R=x(p.key);p.category==="want-to-read"?S.push(p):p.category==="completed"||A>=100?j.push(p):p.category==="currently-reading"||A>0||R>0?i.push(p):S.push(p)}),{currentlyReading:i,completed:j,wantToRead:S}},M=i=>{const j=B(i.key),S=x(i.key),p=m[i.key]||{translateX:0,isDeleting:!1},A=b=>{const T=b.touches[0];f(y=>({...y,[i.key]:{...p,startX:T.clientX,startY:T.clientY}}))},R=b=>{const T=b.touches[0],y=m[i.key];if(!(y!=null&&y.startX)||!(y!=null&&y.startY))return;const C=T.clientX-y.startX,O=T.clientY-y.startY;Math.abs(O)>Math.abs(C)||C<-20&&f(_=>({..._,[i.key]:{...y,translateX:Math.max(C,-120)}}))},I=()=>{const b=m[i.key];b&&(b.translateX<-60?f(T=>({...T,[i.key]:{...b,translateX:-120,isDeleting:!0}})):f(T=>({...T,[i.key]:{...b,translateX:0,isDeleting:!1}})))},$=()=>{n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const T=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(O=>O.key!==i.key);localStorage.setItem("bookish_books",JSON.stringify(T));const C=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(O=>O.key!==i.key);localStorage.setItem("myBooks",JSON.stringify(C)),g(T),f(O=>{const _={...O};return delete _[i.key],_})},{confirmText:"Remove",cancelText:"Keep Book"})},J=()=>{f(b=>({...b,[i.key]:{translateX:0,isDeleting:!1}}))};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow relative",style:{transform:`translateX(${p.translateX}px)`,transition:p.isDeleting||p.translateX===0?"transform 0.3s ease":"none",overflow:p.isDeleting?"hidden":"visible"},onTouchStart:A,onTouchMove:R,onTouchEnd:I,children:[e.jsxs("div",{className:"flex gap-3 p-4",onClick:()=>!p.isDeleting&&N(i),children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 flex items-center justify-center",children:[i.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${i.cover_i}-M.jpg`,alt:i.title,className:"w-full h-full object-cover rounded",onError:b=>{var y;const T=b.target;T.style.display="none",(y=T.nextElementSibling)==null||y.classList.remove("hidden")}}):null,e.jsx(Y,{className:`w-6 h-6 text-[#8B7355] ${i.cover_i?"hidden":""}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:i.title}),i.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",i.author_name[0]]}),j>0&&j<100&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[j,"%"]})]}),e.jsx("div",{className:"w-full bg-[#F0EDE8] rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#8B7355] h-1.5 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]}),j>=100&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mb-2",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsx("span",{children:"Completed"})]}),S>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#8B7355]",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsxs("span",{children:[w(S)," read"]})]})]})]}),!p.isDeleting&&e.jsx("button",{onClick:b=>D(i.key,b),className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#F0EDE8] flex items-center justify-center hover:bg-[#E8E3DD] transition-colors",children:e.jsx(vt,{className:"w-4 h-4 text-[#8B7355]"})}),"        ",r===i.key&&!p.isDeleting&&e.jsxs("div",{className:"absolute top-10 right-3 bg-white rounded-lg shadow-lg border border-[#E8E3DD] py-1 z-50 min-w-[180px]",children:[e.jsxs("button",{onClick:b=>{b.stopPropagation(),u(i.key),o(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-[#8B7355] hover:bg-[#F0EDE8] w-full text-left",children:[e.jsx(yt,{className:"w-4 h-4"}),"Move to category"]}),i.category!=="completed"&&e.jsxs("button",{onClick:b=>k(i.key,b),className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 w-full text-left",children:[e.jsx(ae,{className:"w-4 h-4"}),"Mark as completed"]}),e.jsxs("button",{onClick:b=>E(i.key,b),className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx(qe,{className:"w-4 h-4"}),"Remove from library"]})]}),p.isDeleting&&e.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:J,className:"px-3 py-1 text-xs bg-white text-red-500 rounded",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-3 py-1 text-xs bg-red-700 text-white rounded",children:"Delete"})]})})]},i.key)},c=(i,j)=>j.length===0?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4 flex items-center gap-2",children:[i,e.jsxs("span",{className:"text-sm text-[#8B7355] font-normal",children:["(",j.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:j.map(M)})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Library"})]})}),"      ",e.jsx("main",{className:"p-4",children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No books yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start building your library by searching for books to read"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find Books"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[d.length," book",d.length!==1?"s":""," in your library"]})}),(()=>{const{currentlyReading:i,completed:j,wantToRead:S}=P();return e.jsxs(e.Fragment,{children:[c("Currently Reading",i),c("Want to Read",S),c("Completed",j)]})})()]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Move Book"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose a new category:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>F(h,"want-to-read"),className:"w-full p-3 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you plan to read"})]}),e.jsxs("button",{onClick:()=>F(h,"currently-reading"),className:"w-full p-3 bg-[#E8E3DD] rounded-lg text-left hover:bg-[#DDD8CE] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Currently Reading"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you're actively reading"})]}),e.jsxs("button",{onClick:()=>F(h,"completed"),className:"w-full p-3 bg-green-50 rounded-lg text-left hover:bg-green-100 transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Completed"}),e.jsx("div",{className:"text-xs text-green-600",children:"Books you've finished"})]})]}),e.jsx("button",{onClick:()=>u(null),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"}),"          "]})}),e.jsx(le,{isOpen:n.isOpen,onClose:n.close,onConfirm:n.onConfirm||void 0,title:n.config.title,message:n.config.message,type:n.config.type,confirmText:n.config.confirmText,cancelText:n.config.cancelText})]})},Ns=()=>{const s=U(),{books:t}=V(),{pet:a}=te(),n=Ve(),r=Ae(),o=ie(),h=g=>{const d=Math.floor(g/60),N=g%60;return d>0?`${d}h ${N}m`:`${N}m`},u=()=>{if(o.length===0)return 0;const g=o.reduce((d,N)=>d+(N.duration||0),0);return Math.round(g/o.length)},f=(()=>{const g=new Date,d=new Date(g.getFullYear(),g.getMonth(),1),N=o.filter(k=>new Date(k.startTime)>=d),E=N.reduce((k,D)=>k+(D.duration||0),0),F=N.reduce((k,D)=>k+((D.endPage||0)-(D.startPage||0)),0);return{time:E,pages:F,sessions:N.length}})(),l=({icon:g,title:d,value:N,subtitle:E})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#F0EDE8] rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#8B7355] font-medium",children:d})]}),e.jsx("p",{className:"text-2xl font-serif font-medium text-[#3A3A3A] mb-1",children:N}),E&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:E})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"Reading Statistics"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{icon:Y,title:"Books Read",value:n.totalBooksRead.toString(),subtitle:"this year"}),e.jsx(l,{icon:ee,title:"Total Time",value:h(n.totalReadingTime),subtitle:"all time"}),e.jsx(l,{icon:je,title:"Pages Read",value:n.totalPagesRead.toString(),subtitle:"all time"}),e.jsx(l,{icon:_e,title:"Current Streak",value:`${r.currentStreak} days`,subtitle:`longest: ${r.longestStreak} days`})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"This Month"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(be,{className:"w-5 h-5 text-[#8B7355]"}),e.jsx("span",{className:"font-medium text-[#3A3A3A]",children:"Monthly Progress"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:f.sessions}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:h(f.time)}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"reading time"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:f.pages}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"pages"})]})]})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Recent Activity"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{icon:ee,title:"Today",value:h(n.readingTimeToday)}),e.jsx(l,{icon:be,title:"This Week",value:h(n.readingTimeThisWeek)}),e.jsx(l,{icon:je,title:"Average Session",value:h(u())}),e.jsx(l,{icon:Y,title:"Books in Library",value:t.length.toString()})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Reading Companion"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(wt,{className:"w-5 h-5 text-[#8B7355]"}),e.jsxs("span",{className:"font-medium text-[#3A3A3A]",children:[a.name,"'s Progress"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:a.level}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"level"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:[a.happiness,"%"]}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"happiness"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:a.experience}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"experience"})]})]})]})]}),o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_e,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Start tracking your reading"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Begin a reading session to see your statistics here"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find a Book to Read"})]})]})]})},vs=()=>{const s=U(),{notes:t,books:a,deleteNote:n}=V(),r=ce(),o=m=>{r.showConfirm("Delete Note","Are you sure you want to delete this note? This action cannot be undone.",()=>{n(m)},{confirmText:"Delete",cancelText:"Cancel"})},h=m=>{const f=a.find(l=>l.key===m);return f?f.title:"Unknown Book"},u=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Notes"})]}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"w-8 h-8 rounded-full bg-[#8B7355] flex items-center justify-center",children:e.jsx(He,{className:"w-5 h-5 text-white"})})]})}),e.jsx("main",{className:"p-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No notes yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start taking notes while reading to remember important thoughts and insights"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Add Your First Note"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[t.length," note",t.length!==1?"s":""]})}),"            ",t.map(m=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Y,{className:"w-4 h-4 text-[#8B7355]"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A] truncate",children:h(m.bookId)})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#8B7355]",children:[m.chapter&&e.jsxs("span",{children:["Chapter: ",m.chapter]}),m.page&&e.jsxs("span",{children:["Page ",m.page]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),e.jsx("span",{children:u(m.createdAt)})]})]})]}),e.jsx("button",{onClick:()=>o(m.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(qe,{className:"w-4 h-4"})})]}),"                ",e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-[#3A3A3A] leading-relaxed whitespace-pre-wrap",children:m.content})})]},m.id))]})}),e.jsx(le,{isOpen:r.isOpen,onClose:r.close,onConfirm:r.onConfirm||void 0,title:r.config.title,message:r.config.message,type:r.config.type,confirmText:r.config.confirmText,cancelText:r.config.cancelText})]})},ys=()=>{const s=U(),[t]=Ye(),{books:a,currentBook:n,addNote:r,notes:o,updateNote:h}=V(),u=ce(),m=t.get("edit"),[f,l]=v.useState((n==null?void 0:n.key)||""),[g,d]=v.useState(""),[N,E]=v.useState(""),[F,k]=v.useState("");v.useEffect(()=>{var x;if(m){const w=o.find(P=>P.id===m);w&&(l(w.bookId),d(w.content),E(((x=w.page)==null?void 0:x.toString())||""),k(w.chapter||""))}},[m,o]);const D=()=>{var w;if(!g.trim()){u.showAlert("Content Required","Please add some content to your note before saving.","alert");return}const x={id:m||re(),bookId:f,content:g.trim(),page:N?parseInt(N):void 0,chapter:F.trim()||void 0,createdAt:m?((w=o.find(P=>P.id===m))==null?void 0:w.createdAt)||new Date().toISOString():new Date().toISOString(),updatedAt:new Date().toISOString()};m&&h?h(x):r(x),u.showAlert("Note Saved","Your note has been saved successfully!","success"),setTimeout(()=>{s("/notes")},1500)},B=()=>{g.trim()||F.trim()||N.trim()?u.showConfirm("Discard Note","You have unsaved changes. Are you sure you want to go back?",()=>{s(-1)},{confirmText:"Discard",cancelText:"Keep Editing"}):s(-1)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:B,className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:m?"Edit Note":"Add Note"})]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-[#8B7355] text-white px-4 py-2 rounded-lg text-sm font-medium",children:[e.jsx(kt,{className:"w-4 h-4"}),"Save"]})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Select Book"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:f,onChange:x=>l(x.target.value),className:"w-full p-3 pr-10 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] appearance-none",children:[e.jsx("option",{value:"",children:"Choose a book..."}),a.map(x=>e.jsx("option",{value:x.key,children:x.title},x.key))]}),e.jsx(Y,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B7355] pointer-events-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:F,onChange:x=>k(x.target.value),placeholder:"e.g., Chapter 5",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Page (optional)"}),e.jsx("input",{type:"number",value:N,onChange:x=>E(x.target.value),placeholder:"Page number",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Your Note"}),e.jsx("textarea",{value:g,onChange:x=>d(x.target.value),placeholder:"Write your thoughts, insights, or reflections about this part of the book...",rows:8,className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] resize-none"}),e.jsxs("p",{className:"text-xs text-[#8B7355] mt-2",children:[g.length,"/500 characters"]})]}),e.jsxs("div",{className:"bg-[#F0EDE8] rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-[#3A3A3A] mb-2",children:"ðŸ’¡ Note-taking tips:"}),e.jsxs("ul",{className:"text-sm text-[#8B7355] space-y-1",children:[e.jsx("li",{children:"â€¢ Write down key insights or quotes that resonate with you"}),e.jsx("li",{children:"â€¢ Note questions or thoughts the reading sparked"}),e.jsx("li",{children:"â€¢ Record connections to other books or personal experiences"}),e.jsx("li",{children:"â€¢ Include your emotional reactions or reflections"})]})]})]}),e.jsx(le,{isOpen:u.isOpen,onClose:u.close,onConfirm:u.onConfirm||void 0,title:u.config.title,message:u.config.message,type:u.config.type,confirmText:u.config.confirmText,cancelText:u.config.cancelText})]})},ws=()=>{const s=U(),{pet:t,petStats:a,feedPet:n,playWithPet:r,petSleep:o,getPetMood:h,getPetEvolutionRequirement:u,resetPet:m,updatePetName:f,getPetEmoji:l,canEvolve:g,evolvePet:d}=te(),[N,E]=v.useState(!1),[F,k]=v.useState(t.name),[D,B]=v.useState(!1),x=p=>p>70?"bg-green-500":p>40?"bg-yellow-500":"bg-red-500",w=p=>`${Math.max(0,Math.min(100,p))}%`,P=()=>{F.trim()&&(f(F.trim()),E(!1))},M=()=>{m(),B(!1)},c=p=>({"first-book":"ðŸ“–","book-lover":"ðŸ“š",bookworm:"ðŸ›","speed-reader":"âš¡","night-owl":"ðŸ¦‰","early-bird":"ðŸ¦"})[p]||"ðŸ†",i=p=>({"first-book":"Read your first book","book-lover":"Read 10 books",bookworm:"Read 50 books","speed-reader":"Read for 100+ minutes in a day","night-owl":"Read after midnight","early-bird":"Read before 6 AM"})[p]||"Special achievement",j=p=>{const A=Math.floor(p/60),R=p%60;return A>0?`${A}h ${R}m`:`${R}m`},S=u();return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Reading Pet"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[e.jsx("div",{className:"text-8xl mb-4",children:l()}),e.jsxs("div",{className:"mb-4",children:[N?e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx("input",{type:"text",value:F,onChange:p=>k(p.target.value),className:"text-2xl font-serif font-medium bg-[#F0EDE8] rounded px-3 py-1 border text-center",onBlur:P,onKeyPress:p=>p.key==="Enter"&&P(),autoFocus:!0})}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h2",{className:"text-2xl font-serif font-medium text-[#3A3A3A]",children:t.name}),e.jsx("button",{onClick:()=>E(!0),className:"p-1 text-[#8B7355] hover:bg-[#F0EDE8] rounded",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg text-[#8B7355] mb-2",children:[e.jsxs("span",{children:["Level ",t.level]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"capitalize",children:t.evolutionStage})]}),g()&&e.jsxs("button",{onClick:d,className:"bg-gradient-to-r from-[#D2691E] to-[#FF8C00] text-white px-6 py-2 rounded-full font-medium mb-2",children:["âœ¨ Evolve to ",S.stage,"!"]})]}),e.jsx("p",{className:"text-[#3A3A3A] mb-4",children:h()}),e.jsx("div",{className:"mb-4 p-3 bg-[#F0EDE8] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#D2691E] mb-1",children:["ðŸ’° ",t.points]}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Care Points (Earned from reading)"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-[#8B7355] mb-2",children:[e.jsx("span",{children:"Experience"}),e.jsxs("span",{children:[t.experience,"/",t.experienceToNext]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#D2691E] to-[#FF8C00] rounded-full transition-all duration-300",style:{width:`${t.experience/t.experienceToNext*100}%`}})})]}),"          ",e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:n,disabled:t.points<3,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=3?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Fe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Feed"}),e.jsx("span",{className:"text-xs",children:"ðŸ’° 3 pts"})]}),e.jsxs("button",{onClick:r,disabled:t.points<5,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=5?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(pe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Play"}),e.jsx("span",{className:"text-xs",children:"ðŸ’° 5 pts"})]}),e.jsxs("button",{onClick:o,className:"py-3 px-4 bg-purple-100 text-purple-700 rounded-xl font-medium hover:bg-purple-200 transition-colors flex flex-col items-center gap-1",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Sleep"}),e.jsx("span",{className:"text-xs",children:"Free"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Pet Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"Happiness"})]}),e.jsxs("span",{children:[t.happiness,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x(t.happiness)} rounded-full transition-all duration-300`,style:{width:w(t.happiness)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Hunger"})]}),e.jsxs("span",{children:[t.hunger,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x(t.hunger)} rounded-full transition-all duration-300`,style:{width:w(t.hunger)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Energy"})]}),e.jsxs("span",{children:[t.energy,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x(t.energy)} rounded-full transition-all duration-300`,style:{width:w(t.energy)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Health"})]}),e.jsxs("span",{children:[t.health,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x(t.health)} rounded-full transition-all duration-300`,style:{width:w(t.health)}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Reading Progress"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:t.totalBooksRead}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Books Read"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:j(t.totalReadingTime)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Total Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:a.booksReadToday}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Books"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:j(a.readingTimeToday)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Time"})]})]})]}),t.badges.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.badges.map((p,A)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#F0EDE8] rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:c(p)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] capitalize text-sm",children:p.replace("-"," ")}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:i(p)})]})]},A))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Pet Management"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-4",children:"Reset your pet to start over with a new companion. This action cannot be undone."}),D?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Are you sure you want to reset your pet?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium",children:"Yes, Reset"}),e.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(At,{className:"w-4 h-4"}),"Reset Pet"]})]})]})]})},ks=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"app-titlebar hidden",children:e.jsxs("div",{className:"app-titlebar-content",children:[e.jsx("div",{className:"app-titlebar-icon",children:"ðŸ“š"}),e.jsx("span",{children:"Bookish"})]})}),e.jsx(ss,{children:e.jsx(Vt,{children:e.jsx(at,{basename:"/Bookish",children:e.jsxs(ot,{children:[e.jsx(H,{path:"/",element:e.jsx(ls,{})}),e.jsx(H,{path:"/welcome",element:e.jsx(ns,{})}),e.jsx(H,{path:"/search",element:e.jsx(ms,{})}),e.jsx(H,{path:"/library",element:e.jsx(bs,{})}),e.jsx(H,{path:"/book",element:e.jsx(xs,{})}),e.jsx(H,{path:"/reading",element:e.jsx(js,{})}),e.jsx(H,{path:"/notes",element:e.jsx(vs,{})}),e.jsx(H,{path:"/notes/add",element:e.jsx(ys,{})}),e.jsx(H,{path:"/pet",element:e.jsx(ws,{})}),e.jsx(H,{path:"/stats",element:e.jsx(Ns,{})})]})})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});Ct.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(ks,{})}));
