const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quagga.min-CciGUBy_.js","assets/vendor-RffLe_9z.js"])))=>i.map(i=>d[i]);
import{a as Ve,b as Ge,r as b,u as U,c as $e,d as Ze,B as et,R as tt,e as H}from"./vendor-RffLe_9z.js";import{B as Y,A as ke,T as Le,P as Q,H as ge,a as de,S as st,b as fe,c as nt,U as at,d as ot,C as V,e as rt,F as it,f as Se,g as ee,L as lt,h as ct,i as q,j as Ae,k as Be,X as Ne,l as Ee,I as dt,m as mt,n as xt,o as ht,p as te,q as ut,r as Je,s as gt,t as ft,M as pt,u as jt,v as Ye,w as De,x as pe,y as bt,z as Nt,D as Ce,E as Te,Z as yt,R as vt}from"./icons-DR5iGGqA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();var he={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e;function wt(){if(_e)return Z;_e=1;var s=Ve(),t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function h(u,d,p){var l,j={},x=null,N=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(N=d.ref);for(l in d)n.call(d,l)&&!a.hasOwnProperty(l)&&(j[l]=d[l]);if(u&&u.defaultProps)for(l in d=u.defaultProps,d)j[l]===void 0&&(j[l]=d[l]);return{$$typeof:t,type:u,key:x,ref:N,props:j,_owner:r.current}}return Z.Fragment=o,Z.jsx=h,Z.jsxs=h,Z}var Fe;function kt(){return Fe||(Fe=1,he.exports=wt()),he.exports}var e=kt(),ie={},Re;function St(){if(Re)return ie;Re=1;var s=Ge();return ie.createRoot=s.createRoot,ie.hydrateRoot=s.hydrateRoot,ie}var At=St();const z="https://openlibrary.org",Bt=async s=>{try{return(await(await fetch(`${z}/search.json?q=${encodeURIComponent(s)}&limit=10`)).json()).docs.map(n=>({key:n.key,title:n.title,author_name:n.author_name,cover_i:n.cover_i,first_publish_year:n.first_publish_year,number_of_pages_median:n.number_of_pages_median}))}catch(t){return console.error("Error searching books:",t),[]}},Et=async s=>{var t,o;try{const n=s.replace("/works/",""),a=await(await fetch(`${z}/works/${n}.json`)).json();let h=a.number_of_pages_median;!h&&a.editions&&(h=await Dt(a.editions)),h||(h=await Ct(n));let u=[];if(a.authors&&a.authors.length>0){const d=a.authors.slice(0,3).map(async l=>{try{return(await(await fetch(`${z}${l.author.key}.json`)).json()).name}catch{return null}});u=(await Promise.all(d)).filter(l=>l!==null)}return{key:a.key,title:a.title,author_name:u,cover_i:(t=a.covers)==null?void 0:t[0],first_publish_year:a.first_publish_year,description:((o=a.description)==null?void 0:o.value)||a.description||"",number_of_pages_median:h}}catch(n){return console.error("Error fetching book details:",n),null}},Dt=async s=>{try{if(!s||!s.entries||s.entries.length===0)return;for(const t of s.entries.slice(0,3))try{const n=await(await fetch(`${z}${t.key}.json`)).json();if(n.number_of_pages)return n.number_of_pages}catch(o){console.error("Error fetching edition:",o);continue}return}catch(t){console.error("Error getting page count from editions:",t);return}},Ct=async s=>{try{const o=await(await fetch(`${z}/works/${s}/editions.json?limit=5`)).json();if(o.entries&&o.entries.length>0){for(const n of o.entries)if(n.number_of_pages)return n.number_of_pages}return}catch(t){console.error("Error fetching editions for page count:",t);return}},Tt=s=>{const t=new Date().getFullYear(),o=s.first_publish_year||t;return o<1900?320:o<1950?280:o<2e3?250:220},_t=(s,t="M")=>s?`https://covers.openlibrary.org/b/id/${s}-${{S:"small",M:"medium",L:"large"}[t]}.jpg`:"/placeholder-cover.jpg",Ft=async s=>{var t;try{return((t=(await(await fetch(`${z}/subjects/${encodeURIComponent(s.toLowerCase())}.json?limit=10`)).json()).works)==null?void 0:t.map(r=>{var a;return{key:r.key,title:r.title,author_name:((a=r.authors)==null?void 0:a.map(h=>h.name))||[],cover_i:r.cover_id,first_publish_year:r.first_publish_year,number_of_pages_median:r.number_of_pages_median}}))||[]}catch(o){return console.error("Error searching books by subject:",o),[]}},Rt=async s=>{var t,o;try{const n=s.replace(/[-\s]/g,""),r=await fetch(`${z}/isbn/${n}.json`);if(!r.ok)return null;const a=await r.json();return{key:a.key,title:a.title,author_name:((t=a.authors)==null?void 0:t.map(h=>h.name))||[],cover_i:(o=a.covers)==null?void 0:o[0],first_publish_year:a.publish_date?new Date(a.publish_date).getFullYear():void 0,number_of_pages_median:a.number_of_pages}}catch(n){return console.error("Error searching book by ISBN:",n),null}},ye="bookish_books",Ue="bookish_current_book",He="bookish_reading_sessions",It="bookish_notes",qe="bookish_stats",We="bookish_streak",se=(s,t)=>{const o=localStorage.getItem(s);return o?JSON.parse(o):t},K=(s,t)=>{localStorage.setItem(s,JSON.stringify(t))},xe=()=>se(ye,[]),Pt=s=>{const t=xe(),o=t.findIndex(n=>n.key===s.key);o>=0?t[o]={...t[o],...s}:t.push(s),K(ye,t)},Ot=s=>{const t=xe().filter(o=>o.key!==s);K(ye,t)},Mt=()=>se(Ue,null),$t=s=>{K(Ue,s)},ne=()=>se(He,[]),Lt=s=>{const t=ne(),o=t.findIndex(n=>n.id===s.id);o>=0?t[o]=s:t.push(s),K(He,t),Ht(),Wt()},je=s=>ne().filter(t=>t.bookId===s),ve=()=>{const s=localStorage.getItem("bookish_notes");return s?JSON.parse(s):[]},Ie=s=>{const t=ve(),o=t.findIndex(n=>n.id===s.id);o>=0?t[o]=s:t.push(s),localStorage.setItem("bookish_notes",JSON.stringify(t))},Jt=s=>ve().filter(t=>t.bookId===s),Yt=s=>{const t=ve().filter(o=>o.id!==s);K(It,t)},Ut=()=>({totalBooksRead:0,totalPagesRead:0,totalReadingTime:0,readingTimeToday:0,readingTimeThisWeek:0,booksFinishedThisYear:0}),ze=()=>se(qe,Ut()),Ht=()=>{const s=ne(),t=xe(),o=s.reduce((x,N)=>x+(N.duration||0),0),n=new Date().setHours(0,0,0,0),r=s.reduce((x,N)=>new Date(N.startTime).setHours(0,0,0,0)===n?x+(N.duration||0):x,0),a=new Date;a.setDate(a.getDate()-a.getDay()),a.setHours(0,0,0,0);const h=s.reduce((x,N)=>new Date(N.startTime)>=a?x+(N.duration||0):x,0),u=s.reduce((x,N)=>{const E=(N.endPage||0)-(N.startPage||0);return x+Math.max(0,E)},0),d=new Date(new Date().getFullYear(),0,1),p=new Set;s.forEach(x=>{if(new Date(x.startTime)>=d&&x.endPage){const E=t.find(C=>C.key===x.bookId);if(E){const C=E.number_of_pages_median;if(C&&x.endPage>=C)p.add(x.bookId);else if(!C){const y=Tt(E);x.endPage>=y*.9&&p.add(x.bookId)}}}}),JSON.parse(localStorage.getItem("bookish_books")||"[]").forEach(x=>{x.category==="completed"&&p.add(x.key)});const j={totalBooksRead:p.size,totalPagesRead:u,totalReadingTime:o,readingTimeToday:r,readingTimeThisWeek:h,booksFinishedThisYear:p.size};K(qe,j)},qt=()=>({currentStreak:0,longestStreak:0,lastReadDate:null}),we=()=>se(We,qt()),Wt=()=>{const s=we(),t=new Date().setHours(0,0,0,0),o=s.lastReadDate?new Date(s.lastReadDate).setHours(0,0,0,0):null;if(o===t)return;let n=s.currentStreak;if(o){const a=new Date;a.setDate(a.getDate()-1),a.setHours(0,0,0,0),o===a.getTime()?n+=1:n=1}else n=1;const r={currentStreak:n,longestStreak:Math.max(n,s.longestStreak),lastReadDate:new Date().toISOString()};K(We,r)},Ke=b.createContext(void 0),X=()=>{const s=b.useContext(Ke);if(!s)throw new Error("useBooks must be used within a BookProvider");return s},zt=({children:s})=>{const[t,o]=b.useState([]),[n,r]=b.useState(null),[a,h]=b.useState([]),[u,d]=b.useState([]);b.useEffect(()=>{o(xe()),r(Mt())},[]),b.useEffect(()=>{n?(h(je(n.key)),d(Jt(n.key))):(h([]),d([]))},[n]);const p=y=>{Pt(y),o(D=>{const A=D.findIndex(m=>m.key===y.key);if(A>=0){const m=[...D];return m[A]=y,m}else return[...D,y]})},l=y=>{Ot(y),o(D=>D.filter(A=>A.key!==y)),n&&n.key===y&&j(null)},j=y=>{$t(y),r(y)},x=y=>{Lt(y),h(D=>{const A=D.findIndex(m=>m.id===y.id);if(A>=0){const m=[...D];return m[A]=y,m}else return[...D,y]})},N=y=>{Ie(y),d(D=>[...D,y])},E=y=>{Ie(y),d(D=>D.map(A=>A.id===y.id?y:A))},C=y=>{Yt(y),d(D=>D.filter(A=>A.id!==y))};return e.jsx(Ke.Provider,{value:{books:t,currentBook:n,sessions:a,notes:u,addBook:p,removeBook:l,setActiveBook:j,addSession:x,addNote:N,updateNote:E,deleteNote:C},children:s})},Xe=b.createContext(void 0),G=()=>{const s=b.useContext(Xe);if(!s)throw new Error("usePet must be used within a PetProvider");return s},be=()=>({name:"Bookworm",level:1,experience:0,experienceToNext:100,happiness:100,hunger:50,energy:100,health:100,points:10,lastFed:new Date().toISOString(),lastPlayed:new Date().toISOString(),lastSlept:new Date().toISOString(),createdAt:new Date().toISOString(),totalBooksRead:0,totalReadingTime:0,evolutionStage:"egg",badges:[],mood:"content"}),Qe=()=>({booksReadToday:0,readingTimeToday:0,streakDays:0,lastActiveDate:new Date().toISOString()}),Kt=()=>{try{const s=localStorage.getItem("bookish_pet");if(s){const t=JSON.parse(s);return{...be(),...t}}}catch(s){console.error("Error loading pet from storage:",s)}return be()},Xt=()=>{try{const s=localStorage.getItem("bookish_pet_stats");if(s)return JSON.parse(s)}catch(s){console.error("Error loading pet stats from storage:",s)}return Qe()},Qt=s=>{localStorage.setItem("bookish_pet",JSON.stringify(s))},Vt=s=>{localStorage.setItem("bookish_pet_stats",JSON.stringify(s))},Gt=({children:s})=>{const[t,o]=b.useState(Kt),[n,r]=b.useState(Xt);b.useEffect(()=>{Qt(t)},[t]),b.useEffect(()=>{Vt(n)},[n]),b.useEffect(()=>{const c=setInterval(()=>{const i=new Date,f=new Date(t.lastFed),v=(i.getTime()-f.getTime())/(1e3*60*60);v>1&&o(R=>{const _=Math.floor(v);return{...R,hunger:Math.max(0,R.hunger-_*2),energy:Math.max(0,R.energy-_),happiness:Math.max(0,R.happiness-_),mood:a(Math.max(0,R.happiness-_),Math.max(0,R.hunger-_*2),Math.max(0,R.energy-_))}});const g=i.toDateString(),k=new Date(n.lastActiveDate).toDateString();g!==k&&r(R=>({...R,booksReadToday:0,readingTimeToday:0,lastActiveDate:i.toISOString()}))},3e4);return()=>clearInterval(c)},[t.lastFed,n.lastActiveDate]);const a=(c,i,f)=>i<20?"hungry":f<20?"sleepy":c>80?"happy":c>60?"excited":c<30?"sad":"content",h=c=>100+c*50,u=(c,i)=>{let f=i,v=h(f);for(;c>=v;)f++,v=h(f);return{newLevel:f,newExpToNext:v}},d=c=>c<3?"egg":c<8?"baby":c<15?"child":c<25?"teen":c<40?"adult":"elder",p=()=>{const c=t.evolutionStage,i=t.mood,f={egg:{happy:"🥚",content:"🥚",sad:"💔",excited:"✨",sleepy:"😴",hungry:"🥚"},baby:{happy:"😊",content:"🐛",sad:"😢",excited:"🤩",sleepy:"😴",hungry:"😋"},child:{happy:"😄",content:"🐯",sad:"😭",excited:"🤗",sleepy:"💤",hungry:"🍎"},teen:{happy:"😎",content:"🦊",sad:"😔",excited:"🚀",sleepy:"😪",hungry:"🍕"},adult:{happy:"🌟",content:"🦉",sad:"😞",excited:"🎉",sleepy:"😌",hungry:"🍽️"},elder:{happy:"👑",content:"🐉",sad:"😟",excited:"🎊",sleepy:"🧘",hungry:"🍱"}};return f[c][i]||f[c].content},l=()=>{o(c=>{if(c.points<3)return c;const i=Math.min(100,c.hunger+30),f=Math.min(100,c.happiness+10),v=c.experience+5,{newLevel:g,newExpToNext:k}=u(v,c.level);return{...c,hunger:i,happiness:f,experience:v,level:g,experienceToNext:k,points:c.points-3,lastFed:new Date().toISOString(),evolutionStage:d(g),mood:a(f,i,c.energy)}})},j=()=>{o(c=>{if(c.points<5)return c;const i=Math.min(100,c.happiness+20),f=Math.max(0,c.energy-15),v=c.experience+10,{newLevel:g,newExpToNext:k}=u(v,c.level);return{...c,happiness:i,energy:f,experience:v,level:g,experienceToNext:k,points:c.points-5,lastPlayed:new Date().toISOString(),evolutionStage:d(g),mood:a(i,c.hunger,f)}})},x=()=>{o(c=>{const i=Math.min(100,c.energy+40),f=Math.min(100,c.health+10);return{...c,energy:i,health:f,lastSlept:new Date().toISOString(),mood:a(c.happiness,c.hunger,i)}})},N=(c,i=!1)=>{const g=Math.floor(c/5)+(i?50:0);g>0&&(o(k=>{const R=k.experience+g,_=Math.min(100,k.happiness+Math.floor(c/10)),B=k.totalReadingTime+c,{newLevel:$,newExpToNext:T}=u(R,k.level);return{...k,experience:R,level:$,experienceToNext:T,happiness:_,totalReadingTime:B,evolutionStage:d($),mood:a(_,k.hunger,k.energy)}}),r(k=>({...k,readingTimeToday:k.readingTimeToday+c,lastActiveDate:new Date().toISOString()})))},E=()=>{o(c=>{const i=c.experience+50,f=Math.min(100,c.happiness+25),v=c.totalBooksRead+1,g=20,{newLevel:k,newExpToNext:R}=u(i,c.level),_=[...c.badges];return v===1&&!_.includes("first-book")&&_.push("first-book"),v===10&&!_.includes("book-lover")&&_.push("book-lover"),v===50&&!_.includes("bookworm")&&_.push("bookworm"),{...c,experience:i,level:k,experienceToNext:R,happiness:f,points:c.points+g,totalBooksRead:v,badges:_,evolutionStage:d(k),mood:a(f,c.hunger,c.energy)}}),r(c=>({...c,booksReadToday:c.booksReadToday+1,lastActiveDate:new Date().toISOString()}))},C=()=>({happy:"Your pet is very happy! Keep up the great reading!",excited:"Your pet is excited about your reading progress!",content:"Your pet is content and enjoying your company.",sad:"Your pet seems sad. Try feeding or playing with them!",sleepy:"Your pet is tired. Maybe they need some rest?",hungry:"Your pet is hungry! Don't forget to feed them."})[t.mood],y=()=>{const c=d(t.level+1),i=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return{current:t.level,required:i,stage:c}},D=()=>{const c=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return t.level>=c&&t.evolutionStage!==d(t.level)},A=()=>{o(c=>({...c,evolutionStage:d(c.level),happiness:100,health:100}))},m=()=>{const c=be();o(c),r(Qe())},S=c=>{o(i=>({...i,name:c}))},P=()=>t.happiness<30?"sad":t.happiness<70?"neutral":"happy",M=()=>t.experience/t.experienceToNext*100;return e.jsx(Xe.Provider,{value:{pet:t,petStats:n,feedPet:l,playWithPet:j,petSleep:x,updatePetFromReading:N,updatePetFromBookCompletion:E,getPetMood:C,getPetEvolutionRequirement:y,resetPet:m,updatePetName:S,getPetEmoji:p,canEvolve:D,evolvePet:A,getPetHappinessLevel:P,getLevelProgress:M},children:s})},Zt=()=>{const s=U(),t=[{icon:Y,title:"Track Your Reading",description:"Organize your books into 'Want to Read', 'Currently Reading', and 'Completed' categories with beautiful progress tracking."},{icon:Le,title:"Reading Sessions",description:"Time your reading sessions and watch your progress grow. See exactly how much time you've invested in each book."},{icon:Q,title:"Take Notes",description:"Capture your thoughts, favorite quotes, and insights as you read. Never lose track of those brilliant moments."},{icon:ge,title:"Virtual Pet Companion",description:"Care for your adorable reading companion that grows and evolves as you complete books and reading sessions."},{icon:de,title:"Achievement System",description:"Unlock achievements and watch your reading streaks grow. Gamify your reading journey and stay motivated."},{icon:st,title:"Beautiful Interface",description:"Enjoy a warm, book-inspired design that makes reading tracking a delightful experience every day."}],o=[{icon:fe,title:"Build Better Habits",description:"Turn reading into a consistent, rewarding habit with gentle gamification and progress tracking."},{icon:nt,title:"Stay Motivated",description:"Your virtual pet and achievement system keep you engaged and excited about your reading journey."},{icon:at,title:"Mindful Reading",description:"Take notes and track your thoughts to engage more deeply with every book you read."}];return e.jsxs("div",{className:"min-h-screen bg-[#F7F5F3] max-w-full overflow-x-hidden",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#8B7355] rounded-2xl flex items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"font-serif text-4xl lg:text-6xl font-bold text-[#3A3A3A] mb-2",children:"Bookish"}),e.jsx("p",{className:"text-lg lg:text-xl text-[#8B7355] font-medium",children:"Your Reading Companion"})]}),e.jsxs("div",{className:"text-center mb-8 max-w-2xl mx-auto",children:[e.jsx("h2",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-4 leading-tight",children:"Transform Your Reading Journey with a Delightful Digital Companion"}),e.jsx("p",{className:"text-[#8B7355] leading-relaxed mb-6 text-base lg:text-lg",children:"Track your books, time your sessions, take meaningful notes, and care for your virtual pet as you build the reading habit you've always wanted."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s("/"),className:"bg-[#8B7355] text-white px-8 py-4 rounded-xl font-medium text-lg flex items-center gap-2 justify-center hover:bg-[#7A6349] transition-colors shadow-lg",children:["Start Reading Today",e.jsx(ke,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-transparent border-2 border-[#8B7355] text-[#8B7355] px-8 py-4 rounded-xl font-medium text-lg hover:bg-[#8B7355] hover:text-white transition-colors",children:"Browse Books"})]})]}),e.jsx("div",{className:"relative mb-12 max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 border-4 border-[#F0EDE8]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-[#F0EDE8] rounded w-3/4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#8B7355] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-1/2"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#D2691E] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-3/4"})]})]})]})]})})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Everything You Need"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Powerful features designed to enhance your reading experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((n,r)=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#F0EDE8] rounded-xl flex items-center justify-center mb-4",children:e.jsx(n.icon,{className:"w-8 h-8 text-[#8B7355]"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]})},r))})]}),e.jsx("div",{className:"bg-[#F0EDE8] py-16",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Why Choose Bookish?"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Join thousands of readers who've transformed their reading habits"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:o.map((n,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[#8B7355] rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(n.icon,{className:"w-10 h-10 text-white"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]},r))})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16 lg:px-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-[#8B7355] to-[#D2691E] rounded-2xl p-8 lg:p-12 text-white text-center",children:[e.jsx("h3",{className:"font-serif text-xl lg:text-2xl font-medium mb-8",children:"Join the Reading Revolution"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"10K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Books Tracked"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"5K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Happy Readers"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"50K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Reading Hours"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"25K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Notes Written"})]})]}),e.jsxs("button",{onClick:()=>s("/"),className:"bg-white text-[#8B7355] px-8 py-4 rounded-xl font-medium flex items-center gap-2 mx-auto hover:bg-gray-50 transition-colors text-lg",children:["Get Started Free",e.jsx(ke,{className:"w-5 h-5"})]})]})}),e.jsx("div",{className:"bg-[#3A3A3A] py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center lg:px-8",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-white mb-4",children:"Ready to Begin?"}),e.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed text-base lg:text-lg max-w-2xl mx-auto",children:"Start your reading journey today. Search for your first book, meet your virtual companion, and begin building the reading habit that will last a lifetime."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[e.jsx("button",{onClick:()=>s("/"),className:"flex-1 bg-[#D2691E] text-white px-6 py-4 rounded-xl font-medium hover:bg-[#B8541A] transition-colors",children:"Start Your Journey"}),e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 bg-transparent border-2 border-gray-500 text-gray-300 px-6 py-4 rounded-xl font-medium hover:border-gray-400 hover:text-gray-200 transition-colors",children:"View Library"})]})]})})]})},es=({greeting:s})=>{const t=U(),{pet:o}=G(),n=()=>{const r=o.mood;return{happy:"😊",excited:"🤩",content:"😌",sad:"😢",sleepy:"😴",hungry:"🍎"}[r]||"😌"};return e.jsx("header",{className:"p-4 bg-[#F7F5F3]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:s}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Ready to dive into a story?"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[#F0EDE8] rounded-lg px-3 py-2 cursor-pointer hover:bg-[#E8E3DD] transition-colors",onClick:()=>t("/pet"),children:[e.jsx("span",{className:"text-lg",children:n()}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-[#3A3A3A]",children:o.name}),e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["Lv.",o.level]})]})]}),e.jsx("button",{className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-[#8B7355]"})})]})]})})},ts=({onContinueReading:s})=>{const{currentBook:t,sessions:o}=X();if(!t)return e.jsx("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-[#8B7355] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto text-[#8B7355] mb-2"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"No book selected"}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Search for a book to start reading"})]})})});const n=[...o].sort((p,l)=>new Date(l.startTime).getTime()-new Date(p.startTime).getTime())[0],r=(n==null?void 0:n.endPage)||(n==null?void 0:n.startPage)||1,a=t.number_of_pages_median||0,h=a>0?Math.min(Math.round(r/a*100),100):0,u=a>0,d=u&&h>0;return e.jsxs("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Currently Reading"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-36 rounded-md overflow-hidden shadow-md flex-shrink-0",children:t.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${t.cover_i}-M.jpg`,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center text-white p-2",children:e.jsx("span",{className:"text-xs text-center font-serif",children:t.title})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-2 mb-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-2",children:["by ",t.author_name[0]]}),d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355] mb-2",children:[e.jsxs("span",{children:[h,"%"]}),e.jsx("div",{className:"flex-1 h-1.5 bg-[#F7F5F3] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${h}%`}})})]}),e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Page ",r," of ",a]})]}):u?e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Page ",r," of ",a]}):e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Currently on page ",r,e.jsx("div",{className:"text-xs text-[#8B7355] opacity-75 mt-1",children:"Page count unavailable"})]}),e.jsxs("button",{onClick:s,className:"w-full py-2 px-4 bg-[#D2691E] text-white rounded-lg text-sm font-medium hover:bg-[#A0522D] transition-colors flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Continue Reading"]})]})]})]})},le=({icon:s,value:t,label:o,color:n})=>e.jsxs("div",{className:"flex flex-col items-center p-3 bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n} mb-1`,children:s}),e.jsx("span",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:t}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:o})]}),ss=()=>{const s=ze(),t=we(),o=n=>{if(n<60)return`${n} min`;const r=Math.floor(n/60),a=n%60;return a===0?`${r} hrs`:`${r}.${Math.floor(a/6)}`};return e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(le,{icon:e.jsx(V,{className:"w-5 h-5 text-white"}),value:o(s.readingTimeToday),label:"Today",color:"bg-[#E59554]"}),e.jsx(le,{icon:e.jsx(V,{className:"w-5 h-5 text-white"}),value:o(s.readingTimeThisWeek),label:"This Week",color:"bg-[#CD853F]"}),e.jsx(le,{icon:e.jsx(rt,{className:"w-5 h-5 text-white"}),value:s.totalBooksRead,label:"Books Read",color:"bg-[#8B7355]"}),e.jsx(le,{icon:e.jsx(it,{className:"w-5 h-5 text-white"}),value:t.currentStreak,label:"Streak",color:"bg-[#D2691E]"})]})},ce=({icon:s,label:t,onClick:o})=>e.jsxs("button",{onClick:o,className:"flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-sm hover:bg-[#F0EDE8] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#F7F5F3] mb-2",children:e.jsx(s,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#3A3A3A]",children:t})]}),ns=({type:s,title:t,timestamp:o,duration:n})=>{const r=()=>{switch(s){case"reading":return e.jsx(V,{className:"w-4 h-4 text-[#E59554]"});case"note":return e.jsx(Se,{className:"w-4 h-4 text-[#8B7355]"});case"completed":return e.jsx(Se,{className:"w-4 h-4 text-[#D2691E]"})}},a=h=>{const u=new Date,d=new Date(h),p=Math.floor((u.getTime()-d.getTime())/(1e3*60));if(p<1)return"just now";if(p<60)return`${p} minute${p===1?"":"s"} ago`;const l=Math.floor(p/60);if(l<24)return`${l} hour${l===1?"":"s"} ago`;const j=Math.floor(l/24);return`${j} day${j===1?"":"s"} ago`};return e.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#F7F5F3] flex items-center justify-center flex-shrink-0",children:r()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-[#3A3A3A]",children:t}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355]",children:[e.jsx("span",{children:a(o)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[n," min"]})]})]})]})]})},as=()=>{const s=U(),o=[...ne()].sort((r,a)=>new Date(a.startTime).getTime()-new Date(r.startTime).getTime()).slice(0,5),n=()=>{const r=new Date().getHours();return r<12?"Good morning":r<18?"Good afternoon":"Good evening"};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsx(es,{greeting:n()}),e.jsxs("main",{className:"px-4 py-2 space-y-6",children:[e.jsx(ts,{onContinueReading:()=>s("/reading")}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ce,{icon:ee,label:"Find Books",onClick:()=>s("/search")}),e.jsx(ce,{icon:Q,label:"My Notes",onClick:()=>s("/notes")}),e.jsx(ce,{icon:lt,label:"My Library",onClick:()=>s("/library")}),e.jsx(ce,{icon:ct,label:"Statistics",onClick:()=>s("/stats")})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Your Progress"}),e.jsx(ss,{})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"Recent Activity"}),o.length>0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:o.map(r=>e.jsx(ns,{type:"reading",title:"Reading session completed",timestamp:r.endTime||r.startTime,duration:r.duration||0},r.id))}):e.jsx("p",{className:"text-sm text-[#8B7355] p-4 bg-white rounded-xl shadow-sm",children:"No recent activity. Start reading to track your progress!"})]}),e.jsx("section",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>s("/welcome"),className:"text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors underline",children:"Learn more about Bookish features"})})]})]})},os="modulepreload",rs=function(s){return"/Bookish/"+s},Pe={},Oe=function(t,o,n){let r=Promise.resolve();if(o&&o.length>0){let h=function(p){return Promise.all(p.map(l=>Promise.resolve(l).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=h(o.map(p=>{if(p=rs(p),p in Pe)return;Pe[p]=!0;const l=p.endsWith(".css"),j=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const x=document.createElement("link");if(x.rel=l?"stylesheet":os,l||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),l)return new Promise((N,E)=>{x.addEventListener("load",N),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(h){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=h,window.dispatchEvent(u),!u.defaultPrevented)throw h}return r.then(h=>{for(const u of h||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},is=()=>{const s=U(),[t,o]=b.useState(""),[n,r]=b.useState([]),[a,h]=b.useState(!1),[u,d]=b.useState("general"),[p,l]=b.useState(!1);b.useEffect(()=>()=>{if(typeof window<"u"&&window.Quagga)try{window.Quagga.stop()}catch{}},[]);const j=async m=>{if(m.preventDefault(),!!t.trim()){h(!0);try{let S;u==="subject"?S=await Ft(t):S=await Bt(t),r(S)}catch(S){console.error("Error searching books:",S)}finally{h(!1)}}},x=async()=>{try{l(!0),setTimeout(()=>{E()},300)}catch(m){console.error("Error starting camera:",m),alert("Unable to access camera. Please check permissions."),l(!1)}},N=()=>{try{Oe(()=>import("./quagga.min-CciGUBy_.js").then(m=>m.q),__vite__mapDeps([0,1])).then(m=>{const S=m.default;S.stop(),S.offDetected(),S.offProcessed(),console.log("Quagga stopped successfully")}).catch(m=>{console.log("Error stopping Quagga:",m)})}catch(m){console.log("Quagga cleanup error:",m)}l(!1)},E=async()=>{try{const m=document.querySelector("#barcode-scanner");if(!m){console.error("Scanner element not found");return}const P=(await Oe(()=>import("./quagga.min-CciGUBy_.js").then(i=>i.q),__vite__mapDeps([0,1]))).default,M={inputStream:{name:"Live",type:"LiveStream",target:m,constraints:{width:480,height:320,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:1,frequency:5,decoder:{readers:["ean_reader","ean_8_reader"]},locate:!0};console.log("Initializing Quagga with config:",M),P.init(M,i=>{if(i){console.error("QuaggaJS initialization failed:",i),alert("Camera access failed. Please ensure you have granted camera permissions and are using HTTPS."),N();return}console.log("QuaggaJS initialized successfully"),P.start(),console.log("QuaggaJS started")}),P.onDetected(i=>{const f=i.codeResult.code;console.log("Barcode detected:",f);const v=y(f);console.log("Cleaned barcode:",v),C(v)?(console.log("Valid ISBN detected, searching..."),D(v),N()):console.log("Invalid ISBN format, continuing scan...")});let c=0;P.onProcessed(i=>{c++,c%30===0&&console.log("Processing frames... Count:",c),i&&i.codeResult&&i.codeResult.code&&console.log("Potential code detected:",i.codeResult.code)})}catch(m){console.error("Error loading Quagga:",m),alert("Failed to load barcode scanner. Please try again."),N()}},C=m=>{const S=m.replace(/[^0-9X]/gi,"");return S.length===10||S.length===13},y=m=>m.replace(/[^0-9X]/gi,""),D=async m=>{h(!0);try{const S=await Rt(m);S?(r([S]),o(m)):alert("No book found for this barcode")}catch(S){console.error("Error searching by ISBN:",S),alert("Error scanning barcode")}finally{h(!1)}},A=m=>{s(`/book?book=${encodeURIComponent(m.key)}`,{state:{bookData:m}})};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsxs("header",{className:"page-header p-4 bg-[#F0EDE8] shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsxs("form",{onSubmit:j,className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:t,onChange:m=>o(m.target.value),placeholder:u==="subject"?"Search by subject (e.g. science, fiction)...":"Search for books...",className:"w-full py-2 px-4 pr-10 bg-white border border-[#E5E5E5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#E59554] text-[#3A3A3A]"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-7 h-7 flex items-center justify-center rounded-full bg-[#E59554] text-white",children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:x,className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#E59554] text-white hover:bg-[#D2691E] transition-colors",children:e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex bg-white rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>d("general"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="general"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(ee,{className:"w-4 h-4"}),"General"]}),e.jsxs("button",{onClick:()=>d("subject"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="subject"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),"Subject"]})]})]}),p&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 m-4 max-w-sm w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Scan ISBN Barcode"}),e.jsx("button",{onClick:N,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(Ne,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"barcode-scanner",className:"w-full h-48 bg-black rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:"📷"}),e.jsx("div",{children:"Initializing camera..."}),e.jsx("div",{className:"text-xs mt-1",children:"Make sure to allow camera access"})]})})}),e.jsx("div",{className:"absolute inset-0 border-2 border-[#E59554] rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-16 border-2 border-white rounded",children:e.jsx("div",{className:"absolute inset-0 border-t-2 border-[#E59554] animate-pulse"})})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-[#8B7355] mb-2",children:"Point camera at book's barcode"}),e.jsx("p",{className:"text-xs text-[#8B7355] mb-2",children:"Hold steady and ensure good lighting"}),e.jsx("p",{className:"text-xs text-[#8B7355] italic",children:"Looking for ISBN-13 barcodes (978...)"}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{const m=prompt("Enter ISBN manually (if barcode scan fails):");m&&(D(m.trim()),N())},className:"text-xs text-[#E59554] underline",children:"Enter ISBN manually"})})]})]})}),e.jsx("main",{className:"px-4 py-4",children:a?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E59554]"})}):n.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:u==="subject"?"Books in Subject":"Search Results"}),e.jsx("div",{className:"space-y-3",children:n.map(m=>e.jsxs("div",{onClick:()=>A(m),className:"flex gap-4 p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 overflow-hidden",children:[m.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${m.cover_i}-M.jpg`,alt:m.title,className:"w-full h-full object-cover",onError:S=>{var M;const P=S.target;P.style.display="none",(M=P.nextElementSibling)==null||M.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center ${m.cover_i?"hidden":""}`,children:e.jsx(Y,{className:"w-6 h-6 text-[#8B7355]"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:m.title}),m.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",m.author_name[0]]}),m.first_publish_year&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:m.first_publish_year})]})]},m.key))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 text-center",children:[e.jsx(ee,{className:"w-12 h-12 text-[#8B7355] mb-4 opacity-70"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Find your next great read"}),e.jsx("p",{className:"text-sm text-[#8B7355] max-w-xs mb-4",children:"Search for books by title, author, ISBN, or browse by subject. You can also scan a barcode!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-[#8B7355]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Scan"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"}),"Search"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-4 h-4"}),"Browse"]})]})]})})]})},ae=({isOpen:s,onClose:t,onConfirm:o,title:n,message:r,type:a="confirm",confirmText:h="Confirm",cancelText:u="Cancel"})=>{if(!s)return null;const d=()=>{switch(a){case"alert":return e.jsx(Ee,{className:"w-8 h-8 text-red-500"});case"success":return e.jsx(mt,{className:"w-8 h-8 text-green-500"});case"info":return e.jsx(dt,{className:"w-8 h-8 text-blue-500"});default:return e.jsx(Ee,{className:"w-8 h-8 text-[#D2691E]"})}},p=()=>{o&&o(),t()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d(),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:n})}),e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F0EDE8] transition-colors",children:e.jsx(Ne,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] leading-relaxed mb-6",children:r}),e.jsxs("div",{className:"flex gap-3",children:[a==="confirm"&&e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 bg-[#F0EDE8] text-[#8B7355] rounded-lg font-medium text-sm hover:bg-[#E8E3DD] transition-colors",children:u}),e.jsx("button",{onClick:p,className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-colors ${a==="success"?"bg-green-600 text-white hover:bg-green-700":a==="alert"?"bg-red-600 text-white hover:bg-red-700":"bg-[#D2691E] text-white hover:bg-[#B8541A]"}`,children:a==="confirm"?h:"OK"})]})]})})})},oe=()=>{const[s,t]=b.useState(!1),[o,n]=b.useState({title:"",message:""}),[r,a]=b.useState(null);return{isOpen:s,config:o,onConfirm:r,close:()=>{t(!1),a(null)},showConfirm:(p,l,j,x)=>{n({title:p,message:l,type:"confirm",confirmText:x==null?void 0:x.confirmText,cancelText:x==null?void 0:x.cancelText}),a(()=>j),t(!0)},showAlert:(p,l,j="info")=>{n({title:p,message:l,type:j}),a(null),t(!0)}}},ls=()=>{const s=U(),[t]=$e(),o=Ze(),{books:n,setActiveBook:r,sessions:a,notes:h}=X(),{updatePetFromBookCompletion:u}=G(),[d,p]=b.useState(!1),[l,j]=b.useState(null),[x,N]=b.useState(!1),[E,C]=b.useState(!1),[y,D]=b.useState(!1),A=oe(),m=t.get("book");if(b.useEffect(()=>{var w;if((w=o.state)!=null&&w.bookData)j(o.state.bookData);else{const F=n.find(I=>I.key===m);if(F)j(F);else{s("/");return}}},[m,n,o.state,s]),b.useEffect(()=>{if(l){const F=JSON.parse(localStorage.getItem("bookish_books")||"[]").some(I=>I.key===l.key);N(F),l.description||(p(!0),Et(l.key).then(I=>{I&&j(J=>({...J,description:I.description,number_of_pages_median:I.number_of_pages_median||J.number_of_pages_median}))}).catch(I=>{console.error("Error fetching book details:",I)}).finally(()=>{p(!1)}))}},[l]),!l)return e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B7355] mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Back to Search"})]})});const S=w=>{const F=JSON.parse(localStorage.getItem("bookish_books")||"[]");if(!F.some(I=>I.key===l.key)){const I={...l,category:w,dateAdded:new Date().toISOString()};F.push(I),localStorage.setItem("bookish_books",JSON.stringify(F));const J=JSON.parse(localStorage.getItem("myBooks")||"[]");J.some(re=>re.key===l.key)||(J.push(I),localStorage.setItem("myBooks",JSON.stringify(J))),N(!0),C(!1),w==="currently-reading"&&(r(l),s("/reading"))}},P=()=>{A.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{var re;const F=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(W=>W.key===l.key?{...W,category:"completed",completedAt:new Date().toISOString()}:W);localStorage.setItem("bookish_books",JSON.stringify(F));const J=JSON.parse(localStorage.getItem("myBooks")||"[]").map(W=>W.key===l.key?{...W,category:"completed",completedAt:new Date().toISOString()}:W);localStorage.setItem("myBooks",JSON.stringify(J)),u(),l.key===((re=JSON.parse(localStorage.getItem("bookish_current_book")||"null"))==null?void 0:re.key)&&r(null),A.showAlert("Congratulations!","🎉 You've completed the book and your pet gained experience!","success"),setTimeout(()=>{s("/library")},1500)},{confirmText:"Mark Complete",cancelText:"Cancel"})},M=l.number_of_pages_median||0,c=[...a].filter(w=>w.bookId===l.key).sort((w,F)=>new Date(F.startTime).getTime()-new Date(w.startTime).getTime())[0],i=(c==null?void 0:c.endPage)||(c==null?void 0:c.startPage)||1,f=M>0?Math.min(Math.round(i/M*100),100):0,v=a.filter(w=>w.bookId===l.key).reduce((w,F)=>w+(F.duration||0),0),g=Math.floor(v/60),k=v%60,R=g>0?`${g} hr${g!==1?"s":""} ${k>0?`${k} min`:""}`:`${k} min`,_=h.filter(w=>w.bookId===l.key),$=JSON.parse(localStorage.getItem("bookish_books")||"[]").find(w=>w.key===l.key),T=($==null?void 0:$.category)==="completed",O=()=>{s(-1)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("div",{className:"p-4 bg-[#F7F5F3]",children:e.jsx("button",{onClick:O,className:"w-8 h-8 flex items-center justify-center bg-[#F0EDE8] rounded-full hover:bg-[#E8E3DD] transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden shadow-lg flex-shrink-0",children:l.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${l.cover_i}-M.jpg`,alt:l.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center",children:e.jsx(Y,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A] mb-2 leading-tight",children:l.title}),l.author_name&&l.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-3",children:["by ",l.author_name[0]]}),e.jsxs("div",{className:"space-y-1",children:[l.first_publish_year&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["First published: ",l.first_publish_year]}),M>0&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:[M," pages"]})]})]})]}),x&&M>0&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-[#3A3A3A]",children:[f,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-[#F0EDE8] rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${f}%`}})}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:["Page ",i," of ",M]})]}),e.jsx("div",{className:"w-px bg-[#F0EDE8]"}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[e.jsx(Le,{className:"w-5 h-5 text-[#8B7355] mb-1"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A]",children:R}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Total Time"})]})]}),d?e.jsx("div",{className:"h-32 bg-[#F0EDE8] animate-pulse rounded-lg mb-6"}):l.description?e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"About this book"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-sm text-[#3A3A3A] leading-relaxed ${y?"":"line-clamp-4"}`,children:typeof l.description=="string"?l.description:"No description available."}),l.description&&l.description.length>200&&e.jsx("button",{onClick:()=>D(!y),className:"mt-2 flex items-center gap-1 text-sm font-medium text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:y?e.jsxs(e.Fragment,{children:["Show less",e.jsx(xt,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Read more",e.jsx(ht,{className:"w-4 h-4"})]})})]})]}):null,x&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"My Notes"}),e.jsx("button",{onClick:()=>s("/notes"),className:"text-xs font-medium text-[#D2691E]",children:"View All"})]}),_.length>0?e.jsx("div",{className:"space-y-2",children:_.slice(0,2).map(w=>e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[w.chapter?`Chapter: ${w.chapter}`:"",w.chapter&&w.page?" • ":"",w.page?`Page ${w.page}`:""]}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:new Date(w.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] line-clamp-2",children:w.content})]},w.id))}):e.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-6 h-6 text-[#8B7355] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-1",children:"No notes yet"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"text-xs font-medium text-[#D2691E]",children:"Add Your First Note"})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:x?e.jsx(e.Fragment,{children:T?e.jsxs("div",{className:"flex-1 py-3 px-4 bg-green-100 text-green-700 rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Completed"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s("/notes/add"),className:"flex-1 py-3 px-4 bg-white border border-[#D2691E] text-[#D2691E] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Add Note"]}),e.jsxs("button",{onClick:()=>{r(l),s("/reading")},className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5"}),"Start Reading"]}),e.jsx("button",{onClick:P,className:"py-3 px-3 bg-green-600 text-white rounded-lg font-medium text-sm flex items-center justify-center",title:"Mark as Completed",children:e.jsx(te,{className:"w-5 h-5"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 py-3 px-4 bg-white border border-[#8B7355] text-[#8B7355] rounded-lg font-medium text-sm",children:"View Library"}),e.jsxs("button",{onClick:()=>C(!0),className:"flex-1 py-3 px-4 bg-[#8B7355] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Add to Library"]})]})})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Add to Library"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose where to add this book:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>S("want-to-read"),className:"w-full p-4 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] mb-1",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Save for later reading"})]}),e.jsxs("button",{onClick:()=>S("currently-reading"),className:"w-full p-4 bg-[#8B7355] text-white rounded-lg text-left hover:bg-[#7A6349] transition-colors",children:[e.jsx("div",{className:"font-medium mb-1",children:"Start Reading Now"}),e.jsx("div",{className:"text-xs opacity-90",children:"Add to library and begin reading session"})]})]}),e.jsx("button",{onClick:()=>C(!1),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"})]})}),e.jsx(ae,{isOpen:A.isOpen,onClose:A.close,onConfirm:A.onConfirm||void 0,title:A.config.title,message:A.config.message,type:A.config.type,confirmText:A.config.confirmText,cancelText:A.config.cancelText})]})},L=[];for(let s=0;s<256;++s)L.push((s+256).toString(16).slice(1));function cs(s,t=0){return(L[s[t+0]]+L[s[t+1]]+L[s[t+2]]+L[s[t+3]]+"-"+L[s[t+4]]+L[s[t+5]]+"-"+L[s[t+6]]+L[s[t+7]]+"-"+L[s[t+8]]+L[s[t+9]]+"-"+L[s[t+10]]+L[s[t+11]]+L[s[t+12]]+L[s[t+13]]+L[s[t+14]]+L[s[t+15]]).toLowerCase()}let ue;const ds=new Uint8Array(16);function ms(){if(!ue){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ue=crypto.getRandomValues.bind(crypto)}return ue(ds)}const xs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Me={randomUUID:xs};function me(s,t,o){var r;if(Me.randomUUID&&!s)return Me.randomUUID();s=s||{};const n=s.random??((r=s.rng)==null?void 0:r.call(s))??ms();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,cs(n)}const hs=({bookId:s,startPage:t})=>{const[o,n]=b.useState(!1),[r,a]=b.useState(0),[h,u]=b.useState(null),d=b.useRef(null);return b.useEffect(()=>(o?d.current=window.setInterval(()=>{a(N=>N+1)},1e3):d.current&&clearInterval(d.current),()=>{d.current&&clearInterval(d.current)}),[o]),{isActive:o,elapsedTime:r,startTimer:()=>{n(!0),h||u(new Date().toISOString())},pauseTimer:()=>{n(!1)},stopTimer:N=>{n(!1);const E=new Date().toISOString(),C=Math.floor(r/60);return{id:me(),bookId:s,startPage:t,endPage:N,startTime:h||new Date().toISOString(),endTime:E,duration:C}},resetTimer:()=>{n(!1),a(0),u(null),d.current&&clearInterval(d.current)}}},us=()=>{const s=U(),{currentBook:t,addSession:o,addNote:n}=X(),{updatePetFromReading:r}=G(),a=oe(),[h,u]=b.useState(1),[d,p]=b.useState(1),[l,j]=b.useState(!1),[x,N]=b.useState(""),[E,C]=b.useState(""),[y,D]=b.useState(!1),{isActive:A,elapsedTime:m,startTimer:S,pauseTimer:P,stopTimer:M,resetTimer:c}=hs({bookId:(t==null?void 0:t.key)||"",startPage:h});if(b.useEffect(()=>{if(t){const $=JSON.parse(localStorage.getItem("bookish_reading_sessions")||"[]").filter(T=>T.bookId===t.key);if($.length>0){$.sort((O,w)=>new Date(w.startTime).getTime()-new Date(O.startTime).getTime());const T=$[0].endPage||$[0].startPage;u(T),p(T)}}},[t]),!t)return s("/"),null;const i=()=>{if(d<h){a.showAlert("Invalid Page Range","End page cannot be less than start page","alert");return}const B=M(d);if(o(B),B.duration&&r(B.duration),x.trim()){const $={id:me(),bookId:t.key,page:d,chapter:E.trim()||void 0,content:x.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n($)}s("/")},f=B=>{const $=Math.floor(B/3600),T=Math.floor(B%3600/60),O=B%60;return`${$>0?`${$}:`:""}${T.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},v=t.number_of_pages_median||9999,g=t.number_of_pages_median&&t.number_of_pages_median>0,k=()=>{const B=(t==null?void 0:t.number_of_pages_median)||0;return B>0&&d>=B},R=B=>{p(B),t!=null&&t.number_of_pages_median&&B>=t.number_of_pages_median&&D(!0)},_=()=>{const B=M(d);if(o(B),B.duration&&r(B.duration),x.trim()){const F={id:me(),bookId:t.key,page:d,chapter:E.trim()||void 0,content:x.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(F)}const T=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(F=>F.key===t.key?{...F,category:"completed",completedAt:new Date().toISOString()}:F);localStorage.setItem("bookish_books",JSON.stringify(T));const w=JSON.parse(localStorage.getItem("myBooks")||"[]").map(F=>F.key===t.key?{...F,category:"completed",completedAt:new Date().toISOString()}:F);localStorage.setItem("myBooks",JSON.stringify(w)),localStorage.removeItem("bookish_current_book"),r(B.duration||0,!0),a.showAlert("Congratulations!","🎉 You've completed the book and your pet gained bonus experience!","success"),setTimeout(()=>{s("/library")},2e3)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-20",children:[e.jsxs("header",{className:"p-4 bg-[#F0EDE8] flex items-center gap-3 shadow-sm",children:[e.jsx("button",{onClick:()=>{A?a.showConfirm("Discard Session","Do you want to discard this reading session?",()=>{c(),s(-1)},{confirmText:"Discard",cancelText:"Continue Reading"}):s(-1)},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Reading Session"})]}),e.jsx("main",{className:"p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex items-center p-4 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-12 h-16 rounded overflow-hidden mr-3",children:t.cover_i?e.jsx("img",{src:_t(t.cover_i,"S"),alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355]",children:["by ",t.author_name[0]]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#F7F5F3] flex items-center justify-center shadow-inner",children:e.jsx("span",{className:"font-serif text-2xl font-medium text-[#3A3A3A]",children:f(m)})})}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("button",{onClick:A?P:S,className:"w-16 h-16 rounded-full bg-[#D2691E] text-white flex items-center justify-center shadow-md hover:bg-[#A0522D] transition-colors",children:A?e.jsx(gt,{className:"w-8 h-8"}):e.jsx(ft,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"flex gap-6 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Start Page"}),e.jsx("input",{type:"number",value:h,onChange:B=>u(parseInt(B.target.value)||1),min:"1",max:v,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]",disabled:A||m>0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"End Page"}),e.jsx("input",{type:"number",value:d,onChange:B=>R(parseInt(B.target.value)||1),min:h,max:v,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]})]}),k()&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Congratulations!"})]}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"You've reached the last page! Would you like to mark this book as completed?"}),e.jsx("button",{onClick:_,className:"w-full py-2 px-4 bg-green-600 text-white rounded-lg font-medium text-sm hover:bg-green-700 transition-colors",children:"Mark as Finished"})]}),!g&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-700",children:"📘 Page count unavailable for this book. You can still track your reading progress by entering the pages you read."})}),e.jsx("button",{onClick:()=>j(!l),className:"w-full py-2 text-sm text-[#D2691E] mb-2",children:l?"Hide Note Form":"+ Add a note about this session"}),l&&e.jsxs("div",{className:"space-y-4 mb-4 p-4 bg-[#F7F5F3] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:E,onChange:B=>C(B.target.value),placeholder:"e.g. Chapter 5",className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Note"}),e.jsx("textarea",{value:x,onChange:B=>N(B.target.value),placeholder:"Write your thoughts about this reading session...",rows:4,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A] resize-none"})]})]})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>{a.showConfirm("Cancel Session","Are you sure you want to cancel this session? All progress will be lost.",()=>{c(),s(-1)},{confirmText:"Yes, Cancel",cancelText:"Keep Reading"})},className:"flex-1 py-3 px-4 bg-white border border-[#E5E5E5] text-[#8B7355] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"}),"Cancel"]}),k()?e.jsxs("button",{onClick:_,className:"flex-1 py-3 px-4 bg-green-600 text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Mark as Finished"]}):e.jsxs("button",{onClick:i,className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",disabled:!m,children:[e.jsx(te,{className:"w-5 h-5"}),"Finish Session"]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(de,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Congratulations!"}),e.jsxs("p",{className:"text-sm text-[#8B7355] mb-6",children:[`You've reached the last page of "`,t.title,'". Would you like to mark it as completed?']}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:_,className:"w-full py-3 px-4 bg-green-600 text-white rounded-lg font-medium text-sm hover:bg-green-700 transition-colors",children:"Yes, Mark as Completed"}),e.jsx("button",{onClick:()=>D(!1),className:"w-full py-2 px-4 bg-white border border-[#E5E5E5] text-[#8B7355] rounded-lg font-medium text-sm hover:bg-[#F7F5F3] transition-colors",children:"Continue Reading"})]})]})})}),e.jsx(ae,{isOpen:a.isOpen,onClose:a.close,onConfirm:a.onConfirm||void 0,title:a.config.title,message:a.config.message,type:a.config.type,confirmText:a.config.confirmText,cancelText:a.config.cancelText})]})},gs=()=>{const s=U(),{books:t}=X(),{updatePetFromBookCompletion:o}=G(),n=oe(),[r,a]=b.useState(null),[h,u]=b.useState(null),[d,p]=b.useState({}),[l,j]=b.useState([]);b.useEffect(()=>{(()=>{const f=JSON.parse(localStorage.getItem("bookish_books")||"[]");j(f)})()},[]),b.useEffect(()=>{const i=()=>{a(null)};if(r)return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[r]);const x=l.length>0?l:t,N=i=>{s(`/book?book=${i.key}`,{state:{bookData:i}})},E=(i,f)=>{f.stopPropagation(),n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const g=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(_=>_.key!==i);localStorage.setItem("bookish_books",JSON.stringify(g));const R=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(_=>_.key!==i);localStorage.setItem("myBooks",JSON.stringify(R)),j(g)},{confirmText:"Remove",cancelText:"Keep Book"}),a(null)},C=(i,f,v)=>{const k=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(B=>B.key===i?{...B,category:f}:B);localStorage.setItem("bookish_books",JSON.stringify(k));const _=JSON.parse(localStorage.getItem("myBooks")||"[]").map(B=>B.key===i?{...B,category:f}:B);localStorage.setItem("myBooks",JSON.stringify(_)),j(k),u(null),a(null)},y=(i,f)=>{f.stopPropagation(),n.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{C(i,"completed"),o(),setTimeout(()=>{n.showAlert("Book Completed!","🎉 Book marked as completed! Check your pet for an experience boost!","success")},100)},{confirmText:"Mark Complete",cancelText:"Cancel"}),a(null)},D=(i,f)=>{f.stopPropagation(),a(r===i?null:i)},A=i=>{const f=je(i);if(f.length===0)return 0;const v=f[f.length-1],g=t.find(k=>k.key===i);return!(g!=null&&g.number_of_pages_median)||!v.endPage?0:Math.min(100,Math.round(v.endPage/g.number_of_pages_median*100))},m=i=>je(i).reduce((v,g)=>v+(g.duration||0),0),S=i=>{const f=Math.floor(i/60),v=i%60;return f>0?`${f}h ${v}m`:`${v}m`},P=()=>{const i=[],f=[],v=[];return x.forEach(g=>{const k=A(g.key),R=m(g.key);g.category==="want-to-read"?v.push(g):g.category==="completed"||k>=100?f.push(g):g.category==="currently-reading"||k>0||R>0?i.push(g):v.push(g)}),{currentlyReading:i,completed:f,wantToRead:v}},M=i=>{const f=A(i.key),v=m(i.key),g=d[i.key]||{translateX:0,isDeleting:!1},k=T=>{const O=T.touches[0];p(w=>({...w,[i.key]:{...g,startX:O.clientX,startY:O.clientY}}))},R=T=>{const O=T.touches[0],w=d[i.key];if(!(w!=null&&w.startX)||!(w!=null&&w.startY))return;const F=O.clientX-w.startX,I=O.clientY-w.startY;Math.abs(I)>Math.abs(F)||F<-20&&p(J=>({...J,[i.key]:{...w,translateX:Math.max(F,-120)}}))},_=()=>{const T=d[i.key];T&&(T.translateX<-60?p(O=>({...O,[i.key]:{...T,translateX:-120,isDeleting:!0}})):p(O=>({...O,[i.key]:{...T,translateX:0,isDeleting:!1}})))},B=()=>{n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const O=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(I=>I.key!==i.key);localStorage.setItem("bookish_books",JSON.stringify(O));const F=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(I=>I.key!==i.key);localStorage.setItem("myBooks",JSON.stringify(F)),j(O),p(I=>{const J={...I};return delete J[i.key],J})},{confirmText:"Remove",cancelText:"Keep Book"})},$=()=>{p(T=>({...T,[i.key]:{translateX:0,isDeleting:!1}}))};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow relative",style:{transform:`translateX(${g.translateX}px)`,transition:g.isDeleting||g.translateX===0?"transform 0.3s ease":"none",overflow:g.isDeleting?"hidden":"visible"},onTouchStart:k,onTouchMove:R,onTouchEnd:_,children:[e.jsxs("div",{className:"flex gap-3 p-4",onClick:()=>!g.isDeleting&&N(i),children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 flex items-center justify-center",children:[i.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${i.cover_i}-M.jpg`,alt:i.title,className:"w-full h-full object-cover rounded",onError:T=>{var w;const O=T.target;O.style.display="none",(w=O.nextElementSibling)==null||w.classList.remove("hidden")}}):null,e.jsx(Y,{className:`w-6 h-6 text-[#8B7355] ${i.cover_i?"hidden":""}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:i.title}),i.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",i.author_name[0]]}),f>0&&f<100&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[f,"%"]})]}),e.jsx("div",{className:"w-full bg-[#F0EDE8] rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#8B7355] h-1.5 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]}),f>=100&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mb-2",children:[e.jsx(te,{className:"w-3 h-3"}),e.jsx("span",{children:"Completed"})]}),v>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#8B7355]",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsxs("span",{children:[S(v)," read"]})]})]})]}),!g.isDeleting&&e.jsx("button",{onClick:T=>D(i.key,T),className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#F0EDE8] flex items-center justify-center hover:bg-[#E8E3DD] transition-colors",children:e.jsx(pt,{className:"w-4 h-4 text-[#8B7355]"})}),"        ",r===i.key&&!g.isDeleting&&e.jsxs("div",{className:"absolute top-10 right-3 bg-white rounded-lg shadow-lg border border-[#E8E3DD] py-1 z-50 min-w-[180px]",children:[e.jsxs("button",{onClick:T=>{T.stopPropagation(),u(i.key),a(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-[#8B7355] hover:bg-[#F0EDE8] w-full text-left",children:[e.jsx(jt,{className:"w-4 h-4"}),"Move to category"]}),i.category!=="completed"&&e.jsxs("button",{onClick:T=>y(i.key,T),className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 w-full text-left",children:[e.jsx(te,{className:"w-4 h-4"}),"Mark as completed"]}),e.jsxs("button",{onClick:T=>E(i.key,T),className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Remove from library"]})]}),g.isDeleting&&e.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$,className:"px-3 py-1 text-xs bg-white text-red-500 rounded",children:"Cancel"}),e.jsx("button",{onClick:B,className:"px-3 py-1 text-xs bg-red-700 text-white rounded",children:"Delete"})]})})]},i.key)},c=(i,f)=>f.length===0?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4 flex items-center gap-2",children:[i,e.jsxs("span",{className:"text-sm text-[#8B7355] font-normal",children:["(",f.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:f.map(M)})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Library"})]})}),"      ",e.jsx("main",{className:"p-4",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No books yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start building your library by searching for books to read"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find Books"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[x.length," book",x.length!==1?"s":""," in your library"]})}),(()=>{const{currentlyReading:i,completed:f,wantToRead:v}=P();return e.jsxs(e.Fragment,{children:[c("Currently Reading",i),c("Want to Read",v),c("Completed",f)]})})()]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Move Book"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose a new category:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>C(h,"want-to-read"),className:"w-full p-3 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you plan to read"})]}),e.jsxs("button",{onClick:()=>C(h,"currently-reading"),className:"w-full p-3 bg-[#E8E3DD] rounded-lg text-left hover:bg-[#DDD8CE] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Currently Reading"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you're actively reading"})]}),e.jsxs("button",{onClick:()=>C(h,"completed"),className:"w-full p-3 bg-green-50 rounded-lg text-left hover:bg-green-100 transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Completed"}),e.jsx("div",{className:"text-xs text-green-600",children:"Books you've finished"})]})]}),e.jsx("button",{onClick:()=>u(null),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"}),"          "]})}),e.jsx(ae,{isOpen:n.isOpen,onClose:n.close,onConfirm:n.onConfirm||void 0,title:n.config.title,message:n.config.message,type:n.config.type,confirmText:n.config.confirmText,cancelText:n.config.cancelText})]})},fs=()=>{const s=U(),{books:t}=X(),{pet:o}=G(),n=ze(),r=we(),a=ne(),h=j=>{const x=Math.floor(j/60),N=j%60;return x>0?`${x}h ${N}m`:`${N}m`},u=()=>{if(a.length===0)return 0;const j=a.reduce((x,N)=>x+(N.duration||0),0);return Math.round(j/a.length)},p=(()=>{const j=new Date,x=new Date(j.getFullYear(),j.getMonth(),1),N=a.filter(y=>new Date(y.startTime)>=x),E=N.reduce((y,D)=>y+(D.duration||0),0),C=N.reduce((y,D)=>y+((D.endPage||0)-(D.startPage||0)),0);return{time:E,pages:C,sessions:N.length}})(),l=({icon:j,title:x,value:N,subtitle:E})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#F0EDE8] rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"w-4 h-4 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#8B7355] font-medium",children:x})]}),e.jsx("p",{className:"text-2xl font-serif font-medium text-[#3A3A3A] mb-1",children:N}),E&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:E})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"Reading Statistics"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{icon:Y,title:"Books Read",value:n.totalBooksRead.toString(),subtitle:"this year"}),e.jsx(l,{icon:V,title:"Total Time",value:h(n.totalReadingTime),subtitle:"all time"}),e.jsx(l,{icon:fe,title:"Pages Read",value:n.totalPagesRead.toString(),subtitle:"all time"}),e.jsx(l,{icon:De,title:"Current Streak",value:`${r.currentStreak} days`,subtitle:`longest: ${r.longestStreak} days`})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"This Month"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(pe,{className:"w-5 h-5 text-[#8B7355]"}),e.jsx("span",{className:"font-medium text-[#3A3A3A]",children:"Monthly Progress"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:p.sessions}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:h(p.time)}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"reading time"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:p.pages}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"pages"})]})]})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Recent Activity"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{icon:V,title:"Today",value:h(n.readingTimeToday)}),e.jsx(l,{icon:pe,title:"This Week",value:h(n.readingTimeThisWeek)}),e.jsx(l,{icon:fe,title:"Average Session",value:h(u())}),e.jsx(l,{icon:Y,title:"Books in Library",value:t.length.toString()})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Reading Companion"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(bt,{className:"w-5 h-5 text-[#8B7355]"}),e.jsxs("span",{className:"font-medium text-[#3A3A3A]",children:[o.name,"'s Progress"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:o.level}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"level"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:[o.happiness,"%"]}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"happiness"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:o.experience}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"experience"})]})]})]})]}),a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Start tracking your reading"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Begin a reading session to see your statistics here"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find a Book to Read"})]})]})]})},ps=()=>{const s=U(),{notes:t,books:o,deleteNote:n}=X(),r=oe(),a=d=>{r.showConfirm("Delete Note","Are you sure you want to delete this note? This action cannot be undone.",()=>{n(d)},{confirmText:"Delete",cancelText:"Cancel"})},h=d=>{const p=o.find(l=>l.key===d);return p?p.title:"Unknown Book"},u=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Notes"})]}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"w-8 h-8 rounded-full bg-[#8B7355] flex items-center justify-center",children:e.jsx(Je,{className:"w-5 h-5 text-white"})})]})}),e.jsx("main",{className:"p-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No notes yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start taking notes while reading to remember important thoughts and insights"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Add Your First Note"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[t.length," note",t.length!==1?"s":""]})}),"            ",t.map(d=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Y,{className:"w-4 h-4 text-[#8B7355]"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A] truncate",children:h(d.bookId)})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#8B7355]",children:[d.chapter&&e.jsxs("span",{children:["Chapter: ",d.chapter]}),d.page&&e.jsxs("span",{children:["Page ",d.page]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{children:u(d.createdAt)})]})]})]}),e.jsx("button",{onClick:()=>a(d.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),"                ",e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-[#3A3A3A] leading-relaxed whitespace-pre-wrap",children:d.content})})]},d.id))]})}),e.jsx(ae,{isOpen:r.isOpen,onClose:r.close,onConfirm:r.onConfirm||void 0,title:r.config.title,message:r.config.message,type:r.config.type,confirmText:r.config.confirmText,cancelText:r.config.cancelText})]})},js=()=>{const s=U(),[t]=$e(),{books:o,currentBook:n,addNote:r,notes:a,updateNote:h}=X(),u=oe(),d=t.get("edit"),[p,l]=b.useState((n==null?void 0:n.key)||""),[j,x]=b.useState(""),[N,E]=b.useState(""),[C,y]=b.useState("");b.useEffect(()=>{var m;if(d){const S=a.find(P=>P.id===d);S&&(l(S.bookId),x(S.content),E(((m=S.page)==null?void 0:m.toString())||""),y(S.chapter||""))}},[d,a]);const D=()=>{var S;if(!j.trim()){u.showAlert("Content Required","Please add some content to your note before saving.","alert");return}const m={id:d||me(),bookId:p,content:j.trim(),page:N?parseInt(N):void 0,chapter:C.trim()||void 0,createdAt:d?((S=a.find(P=>P.id===d))==null?void 0:S.createdAt)||new Date().toISOString():new Date().toISOString(),updatedAt:new Date().toISOString()};d&&h?h(m):r(m),u.showAlert("Note Saved","Your note has been saved successfully!","success"),setTimeout(()=>{s("/notes")},1500)},A=()=>{j.trim()||C.trim()||N.trim()?u.showConfirm("Discard Note","You have unsaved changes. Are you sure you want to go back?",()=>{s(-1)},{confirmText:"Discard",cancelText:"Keep Editing"}):s(-1)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:A,className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:d?"Edit Note":"Add Note"})]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-[#8B7355] text-white px-4 py-2 rounded-lg text-sm font-medium",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Save"]})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Select Book"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:p,onChange:m=>l(m.target.value),className:"w-full p-3 pr-10 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] appearance-none",children:[e.jsx("option",{value:"",children:"Choose a book..."}),o.map(m=>e.jsx("option",{value:m.key,children:m.title},m.key))]}),e.jsx(Y,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B7355] pointer-events-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:C,onChange:m=>y(m.target.value),placeholder:"e.g., Chapter 5",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Page (optional)"}),e.jsx("input",{type:"number",value:N,onChange:m=>E(m.target.value),placeholder:"Page number",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Your Note"}),e.jsx("textarea",{value:j,onChange:m=>x(m.target.value),placeholder:"Write your thoughts, insights, or reflections about this part of the book...",rows:8,className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] resize-none"}),e.jsxs("p",{className:"text-xs text-[#8B7355] mt-2",children:[j.length,"/500 characters"]})]}),e.jsxs("div",{className:"bg-[#F0EDE8] rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-[#3A3A3A] mb-2",children:"💡 Note-taking tips:"}),e.jsxs("ul",{className:"text-sm text-[#8B7355] space-y-1",children:[e.jsx("li",{children:"• Write down key insights or quotes that resonate with you"}),e.jsx("li",{children:"• Note questions or thoughts the reading sparked"}),e.jsx("li",{children:"• Record connections to other books or personal experiences"}),e.jsx("li",{children:"• Include your emotional reactions or reflections"})]})]})]}),e.jsx(ae,{isOpen:u.isOpen,onClose:u.close,onConfirm:u.onConfirm||void 0,title:u.config.title,message:u.config.message,type:u.config.type,confirmText:u.config.confirmText,cancelText:u.config.cancelText})]})},bs=()=>{const s=U(),{pet:t,petStats:o,feedPet:n,playWithPet:r,petSleep:a,getPetMood:h,getPetEvolutionRequirement:u,resetPet:d,updatePetName:p,getPetEmoji:l,canEvolve:j,evolvePet:x}=G(),[N,E]=b.useState(!1),[C,y]=b.useState(t.name),[D,A]=b.useState(!1),m=g=>g>70?"bg-green-500":g>40?"bg-yellow-500":"bg-red-500",S=g=>`${Math.max(0,Math.min(100,g))}%`,P=()=>{C.trim()&&(p(C.trim()),E(!1))},M=()=>{d(),A(!1)},c=g=>({"first-book":"📖","book-lover":"📚",bookworm:"🐛","speed-reader":"⚡","night-owl":"🦉","early-bird":"🐦"})[g]||"🏆",i=g=>({"first-book":"Read your first book","book-lover":"Read 10 books",bookworm:"Read 50 books","speed-reader":"Read for 100+ minutes in a day","night-owl":"Read after midnight","early-bird":"Read before 6 AM"})[g]||"Special achievement",f=g=>{const k=Math.floor(g/60),R=g%60;return k>0?`${k}h ${R}m`:`${R}m`},v=u();return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Reading Pet"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[e.jsx("div",{className:"text-8xl mb-4",children:l()}),e.jsxs("div",{className:"mb-4",children:[N?e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx("input",{type:"text",value:C,onChange:g=>y(g.target.value),className:"text-2xl font-serif font-medium bg-[#F0EDE8] rounded px-3 py-1 border text-center",onBlur:P,onKeyPress:g=>g.key==="Enter"&&P(),autoFocus:!0})}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h2",{className:"text-2xl font-serif font-medium text-[#3A3A3A]",children:t.name}),e.jsx("button",{onClick:()=>E(!0),className:"p-1 text-[#8B7355] hover:bg-[#F0EDE8] rounded",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg text-[#8B7355] mb-2",children:[e.jsxs("span",{children:["Level ",t.level]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:t.evolutionStage})]}),j()&&e.jsxs("button",{onClick:x,className:"bg-gradient-to-r from-[#D2691E] to-[#FF8C00] text-white px-6 py-2 rounded-full font-medium mb-2",children:["✨ Evolve to ",v.stage,"!"]})]}),e.jsx("p",{className:"text-[#3A3A3A] mb-4",children:h()}),e.jsx("div",{className:"mb-4 p-3 bg-[#F0EDE8] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#D2691E] mb-1",children:["💰 ",t.points]}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Care Points (Earned from reading)"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-[#8B7355] mb-2",children:[e.jsx("span",{children:"Experience"}),e.jsxs("span",{children:[t.experience,"/",t.experienceToNext]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#D2691E] to-[#FF8C00] rounded-full transition-all duration-300",style:{width:`${t.experience/t.experienceToNext*100}%`}})})]}),"          ",e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:n,disabled:t.points<3,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=3?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Ce,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Feed"}),e.jsx("span",{className:"text-xs",children:"💰 3 pts"})]}),e.jsxs("button",{onClick:r,disabled:t.points<5,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=5?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ge,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Play"}),e.jsx("span",{className:"text-xs",children:"💰 5 pts"})]}),e.jsxs("button",{onClick:a,className:"py-3 px-4 bg-purple-100 text-purple-700 rounded-xl font-medium hover:bg-purple-200 transition-colors flex flex-col items-center gap-1",children:[e.jsx(Te,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Sleep"}),e.jsx("span",{className:"text-xs",children:"Free"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Pet Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"Happiness"})]}),e.jsxs("span",{children:[t.happiness,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(t.happiness)} rounded-full transition-all duration-300`,style:{width:S(t.happiness)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Hunger"})]}),e.jsxs("span",{children:[t.hunger,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(t.hunger)} rounded-full transition-all duration-300`,style:{width:S(t.hunger)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Energy"})]}),e.jsxs("span",{children:[t.energy,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(t.energy)} rounded-full transition-all duration-300`,style:{width:S(t.energy)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Health"})]}),e.jsxs("span",{children:[t.health,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(t.health)} rounded-full transition-all duration-300`,style:{width:S(t.health)}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Reading Progress"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:t.totalBooksRead}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Books Read"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:f(t.totalReadingTime)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Total Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:o.booksReadToday}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Books"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:f(o.readingTimeToday)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Time"})]})]})]}),t.badges.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.badges.map((g,k)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#F0EDE8] rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:c(g)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] capitalize text-sm",children:g.replace("-"," ")}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:i(g)})]})]},k))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Pet Management"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-4",children:"Reset your pet to start over with a new companion. This action cannot be undone."}),D?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Are you sure you want to reset your pet?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium",children:"Yes, Reset"}),e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(vt,{className:"w-4 h-4"}),"Reset Pet"]})]})]})]})},Ns=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"app-titlebar hidden",children:e.jsxs("div",{className:"app-titlebar-content",children:[e.jsx("div",{className:"app-titlebar-icon",children:"📚"}),e.jsx("span",{children:"Bookish"})]})}),e.jsx(Gt,{children:e.jsx(zt,{children:e.jsx(et,{basename:"/Bookish",children:e.jsxs(tt,{children:[e.jsx(H,{path:"/",element:e.jsx(as,{})}),e.jsx(H,{path:"/welcome",element:e.jsx(Zt,{})}),e.jsx(H,{path:"/search",element:e.jsx(is,{})}),e.jsx(H,{path:"/library",element:e.jsx(gs,{})}),e.jsx(H,{path:"/book",element:e.jsx(ls,{})}),e.jsx(H,{path:"/reading",element:e.jsx(us,{})}),e.jsx(H,{path:"/notes",element:e.jsx(ps,{})}),e.jsx(H,{path:"/notes/add",element:e.jsx(js,{})}),e.jsx(H,{path:"/pet",element:e.jsx(bs,{})}),e.jsx(H,{path:"/stats",element:e.jsx(fs,{})})]})})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});At.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Ns,{})}));
