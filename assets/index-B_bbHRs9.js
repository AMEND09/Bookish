const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quagga.min-CciGUBy_.js","assets/vendor-RffLe_9z.js"])))=>i.map(i=>d[i]);
import{a as Ke,b as Qe,r as b,u as J,c as Me,d as Ve,B as Ge,R as Ze,e as Y}from"./vendor-RffLe_9z.js";import{B as L,A as ve,T as Oe,P as K,H as xe,a as et,S as tt,b as he,c as st,U as nt,d as at,C as Q,e as rt,F as ot,f as we,g as Z,L as it,h as lt,i as H,j as ke,k as Se,X as pe,l as Ae,I as ct,m as dt,n as mt,o as xt,p as ee,q as ht,r as $e,s as ut,t as gt,M as ft,u as pt,v as Le,w as Be,x as ue,y as jt,z as bt,D as Ee,E as De,Z as Nt,R as yt}from"./icons-DR5iGGqA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const x of r.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();var de={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce;function vt(){if(Ce)return G;Ce=1;var s=Ke(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function x(u,d,j){var c,g={},p=null,v=null;j!==void 0&&(p=""+j),d.key!==void 0&&(p=""+d.key),d.ref!==void 0&&(v=d.ref);for(c in d)n.call(d,c)&&!r.hasOwnProperty(c)&&(g[c]=d[c]);if(u&&u.defaultProps)for(c in d=u.defaultProps,d)g[c]===void 0&&(g[c]=d[c]);return{$$typeof:t,type:u,key:p,ref:v,props:g,_owner:o.current}}return G.Fragment=i,G.jsx=x,G.jsxs=x,G}var Te;function wt(){return Te||(Te=1,de.exports=vt()),de.exports}var e=wt(),re={},_e;function kt(){if(_e)return re;_e=1;var s=Qe();return re.createRoot=s.createRoot,re.hydrateRoot=s.hydrateRoot,re}var St=kt();const je="bookish_books",Je="bookish_current_book",Ye="bookish_reading_sessions",At="bookish_notes",Ue="bookish_stats",He="bookish_streak",te=(s,t)=>{const i=localStorage.getItem(s);return i?JSON.parse(i):t},z=(s,t)=>{localStorage.setItem(s,JSON.stringify(t))},le=()=>te(je,[]),Bt=s=>{const t=le(),i=t.findIndex(n=>n.key===s.key);i>=0?t[i]={...t[i],...s}:t.push(s),z(je,t)},Et=s=>{const t=le().filter(i=>i.key!==s);z(je,t)},Dt=()=>te(Je,null),Ct=s=>{z(Je,s)},se=()=>te(Ye,[]),Tt=s=>{const t=se(),i=t.findIndex(n=>n.id===s.id);i>=0?t[i]=s:t.push(s),z(Ye,t),It(),Mt()},ge=s=>se().filter(t=>t.bookId===s),be=()=>{const s=localStorage.getItem("bookish_notes");return s?JSON.parse(s):[]},Fe=s=>{const t=be(),i=t.findIndex(n=>n.id===s.id);i>=0?t[i]=s:t.push(s),localStorage.setItem("bookish_notes",JSON.stringify(t))},_t=s=>be().filter(t=>t.bookId===s),Ft=s=>{const t=be().filter(i=>i.id!==s);z(At,t)},Rt=()=>({totalBooksRead:0,totalPagesRead:0,totalReadingTime:0,readingTimeToday:0,readingTimeThisWeek:0,booksFinishedThisYear:0}),qe=()=>te(Ue,Rt()),It=()=>{const s=se(),t=le(),i=s.reduce((g,p)=>g+(p.duration||0),0),n=new Date().setHours(0,0,0,0),o=s.reduce((g,p)=>new Date(p.startTime).setHours(0,0,0,0)===n?g+(p.duration||0):g,0),r=new Date;r.setDate(r.getDate()-r.getDay()),r.setHours(0,0,0,0);const x=s.reduce((g,p)=>new Date(p.startTime)>=r?g+(p.duration||0):g,0),u=s.reduce((g,p)=>g+((p.endPage||0)-(p.startPage||0)),0),d=new Date(new Date().getFullYear(),0,1),j=new Set;s.forEach(g=>{if(new Date(g.startTime)>=d&&g.endPage){const v=t.find(C=>C.key===g.bookId);v&&v.number_of_pages_median&&g.endPage>=v.number_of_pages_median&&j.add(g.bookId)}});const c={totalBooksRead:j.size,totalPagesRead:u,totalReadingTime:i,readingTimeToday:o,readingTimeThisWeek:x,booksFinishedThisYear:j.size};z(Ue,c)},Pt=()=>({currentStreak:0,longestStreak:0,lastReadDate:null}),Ne=()=>te(He,Pt()),Mt=()=>{const s=Ne(),t=new Date().setHours(0,0,0,0),i=s.lastReadDate?new Date(s.lastReadDate).setHours(0,0,0,0):null;if(i===t)return;let n=s.currentStreak;if(i){const r=new Date;r.setDate(r.getDate()-1),r.setHours(0,0,0,0),i===r.getTime()?n+=1:n=1}else n=1;const o={currentStreak:n,longestStreak:Math.max(n,s.longestStreak),lastReadDate:new Date().toISOString()};z(He,o)},We=b.createContext(void 0),X=()=>{const s=b.useContext(We);if(!s)throw new Error("useBooks must be used within a BookProvider");return s},Ot=({children:s})=>{const[t,i]=b.useState([]),[n,o]=b.useState(null),[r,x]=b.useState([]),[u,d]=b.useState([]);b.useEffect(()=>{i(le()),o(Dt())},[]),b.useEffect(()=>{n?(x(ge(n.key)),d(_t(n.key))):(x([]),d([]))},[n]);const j=N=>{Bt(N),i(A=>{const S=A.findIndex(k=>k.key===N.key);if(S>=0){const k=[...A];return k[S]=N,k}else return[...A,N]})},c=N=>{Et(N),i(A=>A.filter(S=>S.key!==N)),n&&n.key===N&&g(null)},g=N=>{Ct(N),o(N)},p=N=>{Tt(N),x(A=>{const S=A.findIndex(k=>k.id===N.id);if(S>=0){const k=[...A];return k[S]=N,k}else return[...A,N]})},v=N=>{Fe(N),d(A=>[...A,N])},C=N=>{Fe(N),d(A=>A.map(S=>S.id===N.id?N:S))},T=N=>{Ft(N),d(A=>A.filter(S=>S.id!==N))};return e.jsx(We.Provider,{value:{books:t,currentBook:n,sessions:r,notes:u,addBook:j,removeBook:c,setActiveBook:g,addSession:p,addNote:v,updateNote:C,deleteNote:T},children:s})},ze=b.createContext(void 0),V=()=>{const s=b.useContext(ze);if(!s)throw new Error("usePet must be used within a PetProvider");return s},fe=()=>({name:"Bookworm",level:1,experience:0,experienceToNext:100,happiness:100,hunger:50,energy:100,health:100,points:10,lastFed:new Date().toISOString(),lastPlayed:new Date().toISOString(),lastSlept:new Date().toISOString(),createdAt:new Date().toISOString(),totalBooksRead:0,totalReadingTime:0,evolutionStage:"egg",badges:[],mood:"content"}),Xe=()=>({booksReadToday:0,readingTimeToday:0,streakDays:0,lastActiveDate:new Date().toISOString()}),$t=()=>{try{const s=localStorage.getItem("bookish_pet");if(s){const t=JSON.parse(s);return{...fe(),...t}}}catch(s){console.error("Error loading pet from storage:",s)}return fe()},Lt=()=>{try{const s=localStorage.getItem("bookish_pet_stats");if(s)return JSON.parse(s)}catch(s){console.error("Error loading pet stats from storage:",s)}return Xe()},Jt=s=>{localStorage.setItem("bookish_pet",JSON.stringify(s))},Yt=s=>{localStorage.setItem("bookish_pet_stats",JSON.stringify(s))},Ut=({children:s})=>{const[t,i]=b.useState($t),[n,o]=b.useState(Lt);b.useEffect(()=>{Jt(t)},[t]),b.useEffect(()=>{Yt(n)},[n]),b.useEffect(()=>{const l=setInterval(()=>{const a=new Date,m=new Date(t.lastFed),y=(a.getTime()-m.getTime())/(1e3*60*60);y>1&&i(F=>{const _=Math.floor(y);return{...F,hunger:Math.max(0,F.hunger-_*2),energy:Math.max(0,F.energy-_),happiness:Math.max(0,F.happiness-_),mood:r(Math.max(0,F.happiness-_),Math.max(0,F.hunger-_*2),Math.max(0,F.energy-_))}});const h=a.toDateString(),E=new Date(n.lastActiveDate).toDateString();h!==E&&o(F=>({...F,booksReadToday:0,readingTimeToday:0,lastActiveDate:a.toISOString()}))},3e4);return()=>clearInterval(l)},[t.lastFed,n.lastActiveDate]);const r=(l,a,m)=>a<20?"hungry":m<20?"sleepy":l>80?"happy":l>60?"excited":l<30?"sad":"content",x=l=>100+l*50,u=(l,a)=>{let m=a,y=x(m);for(;l>=y;)m++,y=x(m);return{newLevel:m,newExpToNext:y}},d=l=>l<3?"egg":l<8?"baby":l<15?"child":l<25?"teen":l<40?"adult":"elder",j=()=>{const l=t.evolutionStage,a=t.mood,m={egg:{happy:"🥚",content:"🥚",sad:"💔",excited:"✨",sleepy:"😴",hungry:"🥚"},baby:{happy:"😊",content:"🐛",sad:"😢",excited:"🤩",sleepy:"😴",hungry:"😋"},child:{happy:"😄",content:"🐯",sad:"😭",excited:"🤗",sleepy:"💤",hungry:"🍎"},teen:{happy:"😎",content:"🦊",sad:"😔",excited:"🚀",sleepy:"😪",hungry:"🍕"},adult:{happy:"🌟",content:"🦉",sad:"😞",excited:"🎉",sleepy:"😌",hungry:"🍽️"},elder:{happy:"👑",content:"🐉",sad:"😟",excited:"🎊",sleepy:"🧘",hungry:"🍱"}};return m[l][a]||m[l].content},c=()=>{i(l=>{if(l.points<3)return l;const a=Math.min(100,l.hunger+30),m=Math.min(100,l.happiness+10),y=l.experience+5,{newLevel:h,newExpToNext:E}=u(y,l.level);return{...l,hunger:a,happiness:m,experience:y,level:h,experienceToNext:E,points:l.points-3,lastFed:new Date().toISOString(),evolutionStage:d(h),mood:r(m,a,l.energy)}})},g=()=>{i(l=>{if(l.points<5)return l;const a=Math.min(100,l.happiness+20),m=Math.max(0,l.energy-15),y=l.experience+10,{newLevel:h,newExpToNext:E}=u(y,l.level);return{...l,happiness:a,energy:m,experience:y,level:h,experienceToNext:E,points:l.points-5,lastPlayed:new Date().toISOString(),evolutionStage:d(h),mood:r(a,l.hunger,m)}})},p=()=>{i(l=>{const a=Math.min(100,l.energy+40),m=Math.min(100,l.health+10);return{...l,energy:a,health:m,lastSlept:new Date().toISOString(),mood:r(l.happiness,l.hunger,a)}})},v=l=>{i(a=>{const m=Math.floor(l/5)*2,y=Math.floor(l/10),h=Math.floor(l/10),E=a.experience+m,F=Math.min(100,a.happiness+y),_=a.totalReadingTime+l,{newLevel:$,newExpToNext:q}=u(E,a.level);return{...a,experience:E,level:$,experienceToNext:q,happiness:F,points:a.points+h,totalReadingTime:_,evolutionStage:d($),mood:r(F,a.hunger,a.energy)}}),o(a=>({...a,readingTimeToday:a.readingTimeToday+l,lastActiveDate:new Date().toISOString()}))},C=()=>{i(l=>{const a=l.experience+50,m=Math.min(100,l.happiness+25),y=l.totalBooksRead+1,h=20,{newLevel:E,newExpToNext:F}=u(a,l.level),_=[...l.badges];return y===1&&!_.includes("first-book")&&_.push("first-book"),y===10&&!_.includes("book-lover")&&_.push("book-lover"),y===50&&!_.includes("bookworm")&&_.push("bookworm"),{...l,experience:a,level:E,experienceToNext:F,happiness:m,points:l.points+h,totalBooksRead:y,badges:_,evolutionStage:d(E),mood:r(m,l.hunger,l.energy)}}),o(l=>({...l,booksReadToday:l.booksReadToday+1,lastActiveDate:new Date().toISOString()}))},T=()=>({happy:"Your pet is very happy! Keep up the great reading!",excited:"Your pet is excited about your reading progress!",content:"Your pet is content and enjoying your company.",sad:"Your pet seems sad. Try feeding or playing with them!",sleepy:"Your pet is tired. Maybe they need some rest?",hungry:"Your pet is hungry! Don't forget to feed them."})[t.mood],N=()=>{const l=d(t.level+1),a=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return{current:t.level,required:a,stage:l}},A=()=>{const l=t.level<3?3:t.level<8?8:t.level<15?15:t.level<25?25:40;return t.level>=l&&t.evolutionStage!==d(t.level)},S=()=>{i(l=>({...l,evolutionStage:d(l.level),happiness:100,health:100}))},k=()=>{const l=fe();i(l),o(Xe())},f=l=>{i(a=>({...a,name:l}))},B=()=>t.happiness<30?"sad":t.happiness<70?"neutral":"happy",I=()=>t.experience/t.experienceToNext*100;return e.jsx(ze.Provider,{value:{pet:t,petStats:n,feedPet:c,playWithPet:g,petSleep:p,updatePetFromReading:v,updatePetFromBookCompletion:C,getPetMood:T,getPetEvolutionRequirement:N,resetPet:k,updatePetName:f,getPetEmoji:j,canEvolve:A,evolvePet:S,getPetHappinessLevel:B,getLevelProgress:I},children:s})},Ht=()=>{const s=J(),t=[{icon:L,title:"Track Your Reading",description:"Organize your books into 'Want to Read', 'Currently Reading', and 'Completed' categories with beautiful progress tracking."},{icon:Oe,title:"Reading Sessions",description:"Time your reading sessions and watch your progress grow. See exactly how much time you've invested in each book."},{icon:K,title:"Take Notes",description:"Capture your thoughts, favorite quotes, and insights as you read. Never lose track of those brilliant moments."},{icon:xe,title:"Virtual Pet Companion",description:"Care for your adorable reading companion that grows and evolves as you complete books and reading sessions."},{icon:et,title:"Achievement System",description:"Unlock achievements and watch your reading streaks grow. Gamify your reading journey and stay motivated."},{icon:tt,title:"Beautiful Interface",description:"Enjoy a warm, book-inspired design that makes reading tracking a delightful experience every day."}],i=[{icon:he,title:"Build Better Habits",description:"Turn reading into a consistent, rewarding habit with gentle gamification and progress tracking."},{icon:st,title:"Stay Motivated",description:"Your virtual pet and achievement system keep you engaged and excited about your reading journey."},{icon:nt,title:"Mindful Reading",description:"Take notes and track your thoughts to engage more deeply with every book you read."}];return e.jsxs("div",{className:"min-h-screen bg-[#F7F5F3] max-w-full overflow-x-hidden",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-[#8B7355] rounded-2xl flex items-center justify-center",children:e.jsx(L,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"font-serif text-4xl lg:text-6xl font-bold text-[#3A3A3A] mb-2",children:"Bookish"}),e.jsx("p",{className:"text-lg lg:text-xl text-[#8B7355] font-medium",children:"Your Reading Companion"})]}),e.jsxs("div",{className:"text-center mb-8 max-w-2xl mx-auto",children:[e.jsx("h2",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-4 leading-tight",children:"Transform Your Reading Journey with a Delightful Digital Companion"}),e.jsx("p",{className:"text-[#8B7355] leading-relaxed mb-6 text-base lg:text-lg",children:"Track your books, time your sessions, take meaningful notes, and care for your virtual pet as you build the reading habit you've always wanted."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>s("/"),className:"bg-[#8B7355] text-white px-8 py-4 rounded-xl font-medium text-lg flex items-center gap-2 justify-center hover:bg-[#7A6349] transition-colors shadow-lg",children:["Start Reading Today",e.jsx(ve,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-transparent border-2 border-[#8B7355] text-[#8B7355] px-8 py-4 rounded-xl font-medium text-lg hover:bg-[#8B7355] hover:text-white transition-colors",children:"Browse Books"})]})]}),e.jsx("div",{className:"relative mb-12 max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 border-4 border-[#F0EDE8]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-[#F0EDE8] rounded w-3/4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#8B7355] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-1/2"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-16 bg-[#D2691E] rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded w-full"}),e.jsx("div",{className:"h-2 bg-[#F0EDE8] rounded w-2/3"}),e.jsx("div",{className:"h-2 bg-[#E59554] rounded w-3/4"})]})]})]})]})})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Everything You Need"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Powerful features designed to enhance your reading experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((n,o)=>e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#F0EDE8] rounded-xl flex items-center justify-center mb-4",children:e.jsx(n.icon,{className:"w-8 h-8 text-[#8B7355]"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]})},o))})]}),e.jsx("div",{className:"bg-[#F0EDE8] py-16",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-[#3A3A3A] mb-3",children:"Why Choose Bookish?"}),e.jsx("p",{className:"text-[#8B7355] text-base lg:text-lg",children:"Join thousands of readers who've transformed their reading habits"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:i.map((n,o)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[#8B7355] rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(n.icon,{className:"w-10 h-10 text-white"})}),e.jsx("h4",{className:"font-serif font-medium text-[#3A3A3A] mb-3 text-lg",children:n.title}),e.jsx("p",{className:"text-sm text-[#8B7355] leading-relaxed",children:n.description})]},o))})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-16 lg:px-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-[#8B7355] to-[#D2691E] rounded-2xl p-8 lg:p-12 text-white text-center",children:[e.jsx("h3",{className:"font-serif text-xl lg:text-2xl font-medium mb-8",children:"Join the Reading Revolution"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"10K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Books Tracked"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"5K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Happy Readers"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"50K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Reading Hours"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl lg:text-4xl font-bold mb-1",children:"25K+"}),e.jsx("div",{className:"text-sm opacity-90",children:"Notes Written"})]})]}),e.jsxs("button",{onClick:()=>s("/"),className:"bg-white text-[#8B7355] px-8 py-4 rounded-xl font-medium flex items-center gap-2 mx-auto hover:bg-gray-50 transition-colors text-lg",children:["Get Started Free",e.jsx(ve,{className:"w-5 h-5"})]})]})}),e.jsx("div",{className:"bg-[#3A3A3A] py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center lg:px-8",children:[e.jsx("h3",{className:"font-serif text-2xl lg:text-3xl font-medium text-white mb-4",children:"Ready to Begin?"}),e.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed text-base lg:text-lg max-w-2xl mx-auto",children:"Start your reading journey today. Search for your first book, meet your virtual companion, and begin building the reading habit that will last a lifetime."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[e.jsx("button",{onClick:()=>s("/"),className:"flex-1 bg-[#D2691E] text-white px-6 py-4 rounded-xl font-medium hover:bg-[#B8541A] transition-colors",children:"Start Your Journey"}),e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 bg-transparent border-2 border-gray-500 text-gray-300 px-6 py-4 rounded-xl font-medium hover:border-gray-400 hover:text-gray-200 transition-colors",children:"View Library"})]})]})})]})},qt=({greeting:s})=>{const t=J(),{pet:i}=V(),n=()=>{const o=i.mood;return{happy:"😊",excited:"🤩",content:"😌",sad:"😢",sleepy:"😴",hungry:"🍎"}[o]||"😌"};return e.jsx("header",{className:"p-4 bg-[#F7F5F3]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:s}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Ready to dive into a story?"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[#F0EDE8] rounded-lg px-3 py-2 cursor-pointer hover:bg-[#E8E3DD] transition-colors",onClick:()=>t("/pet"),children:[e.jsx("span",{className:"text-lg",children:n()}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-[#3A3A3A]",children:i.name}),e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["Lv.",i.level]})]})]}),e.jsx("button",{className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(at,{className:"w-5 h-5 text-[#8B7355]"})})]})]})})},Wt=({onContinueReading:s})=>{const{currentBook:t,sessions:i}=X();if(!t)return e.jsx("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-[#8B7355] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(L,{className:"w-8 h-8 mx-auto text-[#8B7355] mb-2"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"No book selected"}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Search for a book to start reading"})]})})});const n=[...i].sort((u,d)=>new Date(d.startTime).getTime()-new Date(u.startTime).getTime())[0],o=(n==null?void 0:n.endPage)||(n==null?void 0:n.startPage)||1,r=t.number_of_pages_median||0,x=r>0?Math.min(Math.round(o/r*100),100):0;return e.jsxs("div",{className:"p-4 bg-[#F0EDE8] rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Currently Reading"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-36 rounded-md overflow-hidden shadow-md flex-shrink-0",children:t.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${t.cover_i}-M.jpg`,alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center text-white p-2",children:e.jsx("span",{className:"text-xs text-center font-serif",children:t.title})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-2 mb-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-2",children:["by ",t.author_name[0]]}),r>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355] mb-2",children:[e.jsxs("span",{children:[x,"%"]}),e.jsx("div",{className:"flex-1 h-1.5 bg-[#F7F5F3] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${x}%`}})})]}),e.jsxs("div",{className:"text-xs text-[#8B7355] mb-4",children:["Page ",o," of ",r]})]}),r===0&&e.jsx("div",{className:"text-xs text-[#8B7355] mb-4",children:"Page count unavailable"}),e.jsxs("button",{onClick:s,className:"w-full py-2 px-4 bg-[#D2691E] text-white rounded-lg text-sm font-medium hover:bg-[#A0522D] transition-colors flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Continue Reading"]})]})]})]})},oe=({icon:s,value:t,label:i,color:n})=>e.jsxs("div",{className:"flex flex-col items-center p-3 bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:`w-8 h-8 flex items-center justify-center rounded-full ${n} mb-1`,children:s}),e.jsx("span",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:t}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:i})]}),zt=()=>{const s=qe(),t=Ne(),i=n=>{if(n<60)return`${n} min`;const o=Math.floor(n/60),r=n%60;return r===0?`${o} hrs`:`${o}.${Math.floor(r/6)}`};return e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(oe,{icon:e.jsx(Q,{className:"w-5 h-5 text-white"}),value:i(s.readingTimeToday),label:"Today",color:"bg-[#E59554]"}),e.jsx(oe,{icon:e.jsx(Q,{className:"w-5 h-5 text-white"}),value:i(s.readingTimeThisWeek),label:"This Week",color:"bg-[#CD853F]"}),e.jsx(oe,{icon:e.jsx(rt,{className:"w-5 h-5 text-white"}),value:s.totalBooksRead,label:"Books Read",color:"bg-[#8B7355]"}),e.jsx(oe,{icon:e.jsx(ot,{className:"w-5 h-5 text-white"}),value:t.currentStreak,label:"Streak",color:"bg-[#D2691E]"})]})},ie=({icon:s,label:t,onClick:i})=>e.jsxs("button",{onClick:i,className:"flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-sm hover:bg-[#F0EDE8] transition-colors",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#F7F5F3] mb-2",children:e.jsx(s,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#3A3A3A]",children:t})]}),Xt=({type:s,title:t,timestamp:i,duration:n})=>{const o=()=>{switch(s){case"reading":return e.jsx(Q,{className:"w-4 h-4 text-[#E59554]"});case"note":return e.jsx(we,{className:"w-4 h-4 text-[#8B7355]"});case"completed":return e.jsx(we,{className:"w-4 h-4 text-[#D2691E]"})}},r=x=>{const u=new Date,d=new Date(x),j=Math.floor((u.getTime()-d.getTime())/(1e3*60));if(j<1)return"just now";if(j<60)return`${j} minute${j===1?"":"s"} ago`;const c=Math.floor(j/60);if(c<24)return`${c} hour${c===1?"":"s"} ago`;const g=Math.floor(c/24);return`${g} day${g===1?"":"s"} ago`};return e.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#F7F5F3] flex items-center justify-center flex-shrink-0",children:o()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-[#3A3A3A]",children:t}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#8B7355]",children:[e.jsx("span",{children:r(i)}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[n," min"]})]})]})]})]})},Kt=()=>{const s=J(),i=[...se()].sort((o,r)=>new Date(r.startTime).getTime()-new Date(o.startTime).getTime()).slice(0,5),n=()=>{const o=new Date().getHours();return o<12?"Good morning":o<18?"Good afternoon":"Good evening"};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsx(qt,{greeting:n()}),e.jsxs("main",{className:"px-4 py-2 space-y-6",children:[e.jsx(Wt,{onContinueReading:()=>s("/reading")}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ie,{icon:Z,label:"Find Books",onClick:()=>s("/search")}),e.jsx(ie,{icon:K,label:"My Notes",onClick:()=>s("/notes")}),e.jsx(ie,{icon:it,label:"My Library",onClick:()=>s("/library")}),e.jsx(ie,{icon:lt,label:"Statistics",onClick:()=>s("/stats")})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Your Progress"}),e.jsx(zt,{})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-1",children:"Recent Activity"}),i.length>0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:i.map(o=>e.jsx(Xt,{type:"reading",title:"Reading session completed",timestamp:o.endTime||o.startTime,duration:o.duration||0},o.id))}):e.jsx("p",{className:"text-sm text-[#8B7355] p-4 bg-white rounded-xl shadow-sm",children:"No recent activity. Start reading to track your progress!"})]}),e.jsx("section",{className:"text-center py-4",children:e.jsx("button",{onClick:()=>s("/welcome"),className:"text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors underline",children:"Learn more about Bookish features"})})]})]})},Qt="modulepreload",Vt=function(s){return"/Bookish/"+s},Re={},Ie=function(t,i,n){let o=Promise.resolve();if(i&&i.length>0){let x=function(j){return Promise.all(j.map(c=>Promise.resolve(c).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=x(i.map(j=>{if(j=Vt(j),j in Re)return;Re[j]=!0;const c=j.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${g}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":Qt,c||(p.as="script"),p.crossOrigin="",p.href=j,d&&p.setAttribute("nonce",d),document.head.appendChild(p),c)return new Promise((v,C)=>{p.addEventListener("load",v),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${j}`)))})}))}function r(x){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=x,window.dispatchEvent(u),!u.defaultPrevented)throw x}return o.then(x=>{for(const u of x||[])u.status==="rejected"&&r(u.reason);return t().catch(r)})},ce="https://openlibrary.org",Gt=async s=>{try{return(await(await fetch(`${ce}/search.json?q=${encodeURIComponent(s)}&limit=10`)).json()).docs.map(n=>({key:n.key,title:n.title,author_name:n.author_name,cover_i:n.cover_i,first_publish_year:n.first_publish_year,number_of_pages_median:n.number_of_pages_median}))}catch(t){return console.error("Error searching books:",t),[]}},Zt=async s=>{var t,i,n;try{const o=s.replace("/works/",""),x=await(await fetch(`${ce}/works/${o}.json`)).json();return{key:x.key,title:x.title,author_name:((t=x.authors)==null?void 0:t.map(u=>u.name))||[],cover_i:(i=x.covers)==null?void 0:i[0],first_publish_year:x.first_publish_year,description:((n=x.description)==null?void 0:n.value)||x.description||"",number_of_pages_median:x.number_of_pages_median}}catch(o){return console.error("Error fetching book details:",o),null}},es=(s,t="M")=>s?`https://covers.openlibrary.org/b/id/${s}-${{S:"small",M:"medium",L:"large"}[t]}.jpg`:"/placeholder-cover.jpg",ts=async s=>{var t;try{return((t=(await(await fetch(`${ce}/subjects/${encodeURIComponent(s.toLowerCase())}.json?limit=10`)).json()).works)==null?void 0:t.map(o=>{var r;return{key:o.key,title:o.title,author_name:((r=o.authors)==null?void 0:r.map(x=>x.name))||[],cover_i:o.cover_id,first_publish_year:o.first_publish_year,number_of_pages_median:o.number_of_pages_median}}))||[]}catch(i){return console.error("Error searching books by subject:",i),[]}},ss=async s=>{var t,i;try{const n=s.replace(/[-\s]/g,""),o=await fetch(`${ce}/isbn/${n}.json`);if(!o.ok)return null;const r=await o.json();return{key:r.key,title:r.title,author_name:((t=r.authors)==null?void 0:t.map(x=>x.name))||[],cover_i:(i=r.covers)==null?void 0:i[0],first_publish_year:r.publish_date?new Date(r.publish_date).getFullYear():void 0,number_of_pages_median:r.number_of_pages}}catch(n){return console.error("Error searching book by ISBN:",n),null}},ns=()=>{const s=J(),[t,i]=b.useState(""),[n,o]=b.useState([]),[r,x]=b.useState(!1),[u,d]=b.useState("general"),[j,c]=b.useState(!1);b.useEffect(()=>()=>{if(typeof window<"u"&&window.Quagga)try{window.Quagga.stop()}catch{}},[]);const g=async f=>{if(f.preventDefault(),!!t.trim()){x(!0);try{let B;u==="subject"?B=await ts(t):B=await Gt(t),o(B)}catch(B){console.error("Error searching books:",B)}finally{x(!1)}}},p=async()=>{try{c(!0),setTimeout(()=>{C()},300)}catch(f){console.error("Error starting camera:",f),alert("Unable to access camera. Please check permissions."),c(!1)}},v=()=>{try{Ie(()=>import("./quagga.min-CciGUBy_.js").then(f=>f.q),__vite__mapDeps([0,1])).then(f=>{const B=f.default;B.stop(),B.offDetected(),B.offProcessed(),console.log("Quagga stopped successfully")}).catch(f=>{console.log("Error stopping Quagga:",f)})}catch(f){console.log("Quagga cleanup error:",f)}c(!1)},C=async()=>{try{const f=document.querySelector("#barcode-scanner");if(!f){console.error("Scanner element not found");return}const I=(await Ie(()=>import("./quagga.min-CciGUBy_.js").then(m=>m.q),__vite__mapDeps([0,1]))).default,l={inputStream:{name:"Live",type:"LiveStream",target:f,constraints:{width:480,height:320,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:1,frequency:5,decoder:{readers:["ean_reader","ean_8_reader"]},locate:!0};console.log("Initializing Quagga with config:",l),I.init(l,m=>{if(m){console.error("QuaggaJS initialization failed:",m),alert("Camera access failed. Please ensure you have granted camera permissions and are using HTTPS."),v();return}console.log("QuaggaJS initialized successfully"),I.start(),console.log("QuaggaJS started")}),I.onDetected(m=>{const y=m.codeResult.code;console.log("Barcode detected:",y);const h=N(y);console.log("Cleaned barcode:",h),T(h)?(console.log("Valid ISBN detected, searching..."),A(h),v()):console.log("Invalid ISBN format, continuing scan...")});let a=0;I.onProcessed(m=>{a++,a%30===0&&console.log("Processing frames... Count:",a),m&&m.codeResult&&m.codeResult.code&&console.log("Potential code detected:",m.codeResult.code)})}catch(f){console.error("Error loading Quagga:",f),alert("Failed to load barcode scanner. Please try again."),v()}},T=f=>{const B=f.replace(/[^0-9X]/gi,"");return B.length===10||B.length===13},N=f=>f.replace(/[^0-9X]/gi,""),A=async f=>{x(!0);try{const B=await ss(f);B?(o([B]),i(f)):alert("No book found for this barcode")}catch(B){console.error("Error searching by ISBN:",B),alert("Error scanning barcode")}finally{x(!1)}},S=f=>{s(`/book?book=${f.key}`,{state:{bookData:f}})},k=f=>e.jsxs("button",{onClick:()=>S(f),className:"w-full flex items-center gap-3 p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow text-left",children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 overflow-hidden",children:[f.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${f.cover_i}-M.jpg`,alt:f.title,className:"w-full h-full object-cover",onError:B=>{var l;const I=B.target;I.style.display="none",(l=I.nextElementSibling)==null||l.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-full h-full flex items-center justify-center ${f.cover_i?"hidden":""}`,children:e.jsx(L,{className:"w-6 h-6 text-[#8B7355]"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:f.title}),f.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",f.author_name[0]]}),f.first_publish_year&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:f.first_publish_year})]})]},f.key);return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-6",children:[e.jsxs("header",{className:"page-header p-4 bg-[#F0EDE8] shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsxs("form",{onSubmit:g,className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:t,onChange:f=>i(f.target.value),placeholder:u==="subject"?"Search by subject (e.g. science, fiction)...":"Search for books...",className:"w-full py-2 px-4 pr-10 bg-white border border-[#E5E5E5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#E59554] text-[#3A3A3A]"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-7 h-7 flex items-center justify-center rounded-full bg-[#E59554] text-white",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:p,className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#E59554] text-white hover:bg-[#D2691E] transition-colors",children:e.jsx(ke,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex bg-white rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>d("general"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="general"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(Z,{className:"w-4 h-4"}),"General"]}),e.jsxs("button",{onClick:()=>d("subject"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${u==="subject"?"bg-[#E59554] text-white":"text-[#8B7355] hover:bg-[#F7F5F3]"}`,children:[e.jsx(Se,{className:"w-4 h-4"}),"Subject"]})]})]}),j&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 m-4 max-w-sm w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Scan ISBN Barcode"}),e.jsx("button",{onClick:v,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(pe,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"barcode-scanner",className:"w-full h-48 bg-black rounded-lg overflow-hidden relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:"📷"}),e.jsx("div",{children:"Initializing camera..."}),e.jsx("div",{className:"text-xs mt-1",children:"Make sure to allow camera access"})]})})}),e.jsx("div",{className:"absolute inset-0 border-2 border-[#E59554] rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-16 border-2 border-white rounded",children:e.jsx("div",{className:"absolute inset-0 border-t-2 border-[#E59554] animate-pulse"})})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-[#8B7355] mb-2",children:"Point camera at book's barcode"}),e.jsx("p",{className:"text-xs text-[#8B7355] mb-2",children:"Hold steady and ensure good lighting"}),e.jsx("p",{className:"text-xs text-[#8B7355] italic",children:"Looking for ISBN-13 barcodes (978...)"}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{const f=prompt("Enter ISBN manually (if barcode scan fails):");f&&(A(f.trim()),v())},className:"text-xs text-[#E59554] underline",children:"Enter ISBN manually"})})]})]})}),e.jsx("main",{className:"px-4 py-4",children:r?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E59554]"})}):n.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:u==="subject"?"Books in Subject":"Search Results"}),e.jsx("div",{className:"space-y-3",children:n.map(f=>k(f))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-6 text-center",children:[e.jsx(Z,{className:"w-12 h-12 text-[#8B7355] mb-4 opacity-70"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Find your next great read"}),e.jsx("p",{className:"text-sm text-[#8B7355] max-w-xs mb-4",children:"Search for books by title, author, ISBN, or browse by subject. You can also scan a barcode!"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-[#8B7355]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-4 h-4"}),"Scan"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-4 h-4"}),"Search"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-4 h-4"}),"Browse"]})]})]})})]})},ne=({isOpen:s,onClose:t,onConfirm:i,title:n,message:o,type:r="confirm",confirmText:x="Confirm",cancelText:u="Cancel"})=>{if(!s)return null;const d=()=>{switch(r){case"alert":return e.jsx(Ae,{className:"w-8 h-8 text-red-500"});case"success":return e.jsx(dt,{className:"w-8 h-8 text-green-500"});case"info":return e.jsx(ct,{className:"w-8 h-8 text-blue-500"});default:return e.jsx(Ae,{className:"w-8 h-8 text-[#D2691E]"})}},j=()=>{i&&i(),t()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d(),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:n})}),e.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F0EDE8] transition-colors",children:e.jsx(pe,{className:"w-5 h-5 text-[#8B7355]"})})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] leading-relaxed mb-6",children:o}),e.jsxs("div",{className:"flex gap-3",children:[r==="confirm"&&e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 bg-[#F0EDE8] text-[#8B7355] rounded-lg font-medium text-sm hover:bg-[#E8E3DD] transition-colors",children:u}),e.jsx("button",{onClick:j,className:`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-colors ${r==="success"?"bg-green-600 text-white hover:bg-green-700":r==="alert"?"bg-red-600 text-white hover:bg-red-700":"bg-[#D2691E] text-white hover:bg-[#B8541A]"}`,children:r==="confirm"?x:"OK"})]})]})})})},ae=()=>{const[s,t]=b.useState(!1),[i,n]=b.useState({title:"",message:""}),[o,r]=b.useState(null);return{isOpen:s,config:i,onConfirm:o,close:()=>{t(!1),r(null)},showConfirm:(j,c,g,p)=>{n({title:j,message:c,type:"confirm",confirmText:p==null?void 0:p.confirmText,cancelText:p==null?void 0:p.cancelText}),r(()=>g),t(!0)},showAlert:(j,c,g="info")=>{n({title:j,message:c,type:g}),r(null),t(!0)}}},as=()=>{const s=J(),[t]=Me(),i=Ve(),{books:n,setActiveBook:o,sessions:r,notes:x}=X(),{updatePetFromBookCompletion:u}=V(),[d,j]=b.useState(!1),[c,g]=b.useState(null),[p,v]=b.useState(!1),[C,T]=b.useState(!1),[N,A]=b.useState(!1),S=ae(),k=t.get("book");if(b.useEffect(()=>{var w;if((w=i.state)!=null&&w.bookData)g(i.state.bookData);else{const D=n.find(P=>P.key===k);if(D)g(D);else{s("/");return}}},[k,n,i.state,s]),b.useEffect(()=>{if(c){const D=JSON.parse(localStorage.getItem("bookish_books")||"[]").some(P=>P.key===c.key);v(D),c.description||(j(!0),Zt(c.key).then(P=>{P&&g(O=>({...O,description:P.description,number_of_pages_median:P.number_of_pages_median||O.number_of_pages_median}))}).catch(P=>{console.error("Error fetching book details:",P)}).finally(()=>{j(!1)}))}},[c]),!c)return e.jsx("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B7355] mb-4",children:"Book not found"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Back to Search"})]})});const f=w=>{const D=JSON.parse(localStorage.getItem("bookish_books")||"[]");if(!D.some(P=>P.key===c.key)){const P={...c,category:w,dateAdded:new Date().toISOString()};D.push(P),localStorage.setItem("bookish_books",JSON.stringify(D));const O=JSON.parse(localStorage.getItem("myBooks")||"[]");O.some(U=>U.key===c.key)||(O.push(P),localStorage.setItem("myBooks",JSON.stringify(O))),v(!0),T(!1),w==="currently-reading"&&(o(c),s("/reading"))}},B=()=>{S.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{var U;const D=JSON.parse(localStorage.getItem("bookish_books")||"[]").map(W=>W.key===c.key?{...W,category:"completed",completedAt:new Date().toISOString()}:W);localStorage.setItem("bookish_books",JSON.stringify(D));const O=JSON.parse(localStorage.getItem("myBooks")||"[]").map(W=>W.key===c.key?{...W,category:"completed",completedAt:new Date().toISOString()}:W);localStorage.setItem("myBooks",JSON.stringify(O)),u(),c.key===((U=JSON.parse(localStorage.getItem("bookish_current_book")||"null"))==null?void 0:U.key)&&o(null),S.showAlert("Congratulations!","🎉 You've completed the book and your pet gained experience!","success"),setTimeout(()=>{s("/library")},1500)},{confirmText:"Mark Complete",cancelText:"Cancel"})},I=c.number_of_pages_median||0,l=[...r].filter(w=>w.bookId===c.key).sort((w,D)=>new Date(D.startTime).getTime()-new Date(w.startTime).getTime())[0],a=(l==null?void 0:l.endPage)||(l==null?void 0:l.startPage)||1,m=I>0?Math.min(Math.round(a/I*100),100):0,y=r.filter(w=>w.bookId===c.key).reduce((w,D)=>w+(D.duration||0),0),h=Math.floor(y/60),E=y%60,F=h>0?`${h} hr${h!==1?"s":""} ${E>0?`${E} min`:""}`:`${E} min`,_=x.filter(w=>w.bookId===c.key),q=JSON.parse(localStorage.getItem("bookish_books")||"[]").find(w=>w.key===c.key),R=(q==null?void 0:q.category)==="completed";return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("div",{className:"p-4 bg-[#F7F5F3]",children:e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 flex items-center justify-center bg-[#F0EDE8] rounded-full hover:bg-[#E8E3DD] transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden shadow-lg flex-shrink-0",children:c.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${c.cover_i}-M.jpg`,alt:c.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355] flex items-center justify-center",children:e.jsx(L,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A] mb-2 leading-tight",children:c.title}),c.author_name&&c.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355] mb-3",children:["by ",c.author_name[0]]}),e.jsxs("div",{className:"space-y-1",children:[c.first_publish_year&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:["First published: ",c.first_publish_year]}),I>0&&e.jsxs("p",{className:"text-xs text-[#8B7355]",children:[I," pages"]})]})]})]}),p&&I>0&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-[#3A3A3A]",children:[m,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-[#F0EDE8] rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-[#E59554] rounded-full transition-all duration-300 ease-out",style:{width:`${m}%`}})}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:["Page ",a," of ",I]})]}),e.jsx("div",{className:"w-px bg-[#F0EDE8]"}),e.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[e.jsx(Oe,{className:"w-5 h-5 text-[#8B7355] mb-1"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A]",children:F}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Total Time"})]})]}),d?e.jsx("div",{className:"h-32 bg-[#F0EDE8] animate-pulse rounded-lg mb-6"}):c.description?e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"About this book"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-sm text-[#3A3A3A] leading-relaxed ${N?"":"line-clamp-4"}`,children:typeof c.description=="string"?c.description:"No description available."}),c.description&&c.description.length>200&&e.jsx("button",{onClick:()=>A(!N),className:"mt-2 flex items-center gap-1 text-sm font-medium text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:N?e.jsxs(e.Fragment,{children:["Show less",e.jsx(mt,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Read more",e.jsx(xt,{className:"w-4 h-4"})]})})]})]}):null,p&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"My Notes"}),e.jsx("button",{onClick:()=>s("/notes"),className:"text-xs font-medium text-[#D2691E]",children:"View All"})]}),_.length>0?e.jsx("div",{className:"space-y-2",children:_.slice(0,2).map(w=>e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[w.chapter?`Chapter: ${w.chapter}`:"",w.chapter&&w.page?" • ":"",w.page?`Page ${w.page}`:""]}),e.jsx("span",{className:"text-xs text-[#8B7355]",children:new Date(w.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-[#3A3A3A] line-clamp-2",children:w.content})]},w.id))}):e.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-6 h-6 text-[#8B7355] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-1",children:"No notes yet"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"text-xs font-medium text-[#D2691E]",children:"Add Your First Note"})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:p?e.jsx(e.Fragment,{children:R?e.jsxs("div",{className:"flex-1 py-3 px-4 bg-green-100 text-green-700 rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Completed"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s("/notes/add"),className:"flex-1 py-3 px-4 bg-white border border-[#D2691E] text-[#D2691E] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Add Note"]}),e.jsxs("button",{onClick:()=>{o(c),s("/reading")},className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5"}),"Start Reading"]}),e.jsx("button",{onClick:B,className:"py-3 px-3 bg-green-600 text-white rounded-lg font-medium text-sm flex items-center justify-center",title:"Mark as Completed",children:e.jsx(ee,{className:"w-5 h-5"})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s("/library"),className:"flex-1 py-3 px-4 bg-white border border-[#8B7355] text-[#8B7355] rounded-lg font-medium text-sm",children:"View Library"}),e.jsxs("button",{onClick:()=>T(!0),className:"flex-1 py-3 px-4 bg-[#8B7355] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Add to Library"]})]})})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Add to Library"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose where to add this book:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>f("want-to-read"),className:"w-full p-4 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] mb-1",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Save for later reading"})]}),e.jsxs("button",{onClick:()=>f("currently-reading"),className:"w-full p-4 bg-[#8B7355] text-white rounded-lg text-left hover:bg-[#7A6349] transition-colors",children:[e.jsx("div",{className:"font-medium mb-1",children:"Start Reading Now"}),e.jsx("div",{className:"text-xs opacity-90",children:"Add to library and begin reading session"})]})]}),e.jsx("button",{onClick:()=>T(!1),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"})]})}),e.jsx(ne,{isOpen:S.isOpen,onClose:S.close,onConfirm:S.onConfirm||void 0,title:S.config.title,message:S.config.message,type:S.config.type,confirmText:S.config.confirmText,cancelText:S.config.cancelText})]})},M=[];for(let s=0;s<256;++s)M.push((s+256).toString(16).slice(1));function rs(s,t=0){return(M[s[t+0]]+M[s[t+1]]+M[s[t+2]]+M[s[t+3]]+"-"+M[s[t+4]]+M[s[t+5]]+"-"+M[s[t+6]]+M[s[t+7]]+"-"+M[s[t+8]]+M[s[t+9]]+"-"+M[s[t+10]]+M[s[t+11]]+M[s[t+12]]+M[s[t+13]]+M[s[t+14]]+M[s[t+15]]).toLowerCase()}let me;const os=new Uint8Array(16);function is(){if(!me){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");me=crypto.getRandomValues.bind(crypto)}return me(os)}const ls=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pe={randomUUID:ls};function ye(s,t,i){var o;if(Pe.randomUUID&&!s)return Pe.randomUUID();s=s||{};const n=s.random??((o=s.rng)==null?void 0:o.call(s))??is();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,rs(n)}const cs=({bookId:s,startPage:t})=>{const[i,n]=b.useState(!1),[o,r]=b.useState(0),[x,u]=b.useState(null),d=b.useRef(null);return b.useEffect(()=>(i?d.current=window.setInterval(()=>{r(v=>v+1)},1e3):d.current&&clearInterval(d.current),()=>{d.current&&clearInterval(d.current)}),[i]),{isActive:i,elapsedTime:o,startTimer:()=>{n(!0),x||u(new Date().toISOString())},pauseTimer:()=>{n(!1)},stopTimer:v=>{n(!1);const C=new Date().toISOString(),T=Math.floor(o/60);return{id:ye(),bookId:s,startPage:t,endPage:v,startTime:x||new Date().toISOString(),endTime:C,duration:T}},resetTimer:()=>{n(!1),r(0),u(null),d.current&&clearInterval(d.current)}}},ds=()=>{const s=J(),{currentBook:t,addSession:i,addNote:n}=X(),{updatePetFromReading:o}=V(),r=ae(),[x,u]=b.useState(1),[d,j]=b.useState(1),[c,g]=b.useState(!1),[p,v]=b.useState(""),[C,T]=b.useState(""),{isActive:N,elapsedTime:A,startTimer:S,pauseTimer:k,stopTimer:f,resetTimer:B}=cs({bookId:(t==null?void 0:t.key)||"",startPage:x});if(b.useEffect(()=>{if(t){const m=JSON.parse(localStorage.getItem("bookish_reading_sessions")||"[]").filter(y=>y.bookId===t.key);if(m.length>0){m.sort((h,E)=>new Date(E.startTime).getTime()-new Date(h.startTime).getTime());const y=m[0].endPage||m[0].startPage;u(y),j(y)}}},[t]),!t)return s("/"),null;const I=()=>{if(d<x){r.showAlert("Invalid Page Range","End page cannot be less than start page","alert");return}const a=f(d);if(i(a),a.duration&&o(a.duration),p.trim()){const m={id:ye(),bookId:t.key,page:d,chapter:C.trim()||void 0,content:p.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(m)}s("/")},l=a=>{const m=Math.floor(a/3600),y=Math.floor(a%3600/60),h=a%60;return`${m>0?`${m}:`:""}${y.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3] pb-20",children:[e.jsxs("header",{className:"p-4 bg-[#F0EDE8] flex items-center gap-3 shadow-sm",children:[e.jsx("button",{onClick:()=>{N?r.showConfirm("Discard Session","Do you want to discard this reading session?",()=>{B(),s(-1)},{confirmText:"Discard",cancelText:"Continue Reading"}):s(-1)},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-[#F7F5F3] transition-colors",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-lg font-medium text-[#3A3A3A]",children:"Reading Session"})]}),e.jsx("main",{className:"p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex items-center p-4 border-b border-[#F0EDE8]",children:[e.jsx("div",{className:"w-12 h-16 rounded overflow-hidden mr-3",children:t.cover_i?e.jsx("img",{src:es(t.cover_i,"S"),alt:t.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#8B7355]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-serif text-base font-medium text-[#3A3A3A] line-clamp-1",children:t.title}),t.author_name&&t.author_name.length>0&&e.jsxs("p",{className:"text-sm text-[#8B7355]",children:["by ",t.author_name[0]]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#F7F5F3] flex items-center justify-center shadow-inner",children:e.jsx("span",{className:"font-serif text-2xl font-medium text-[#3A3A3A]",children:l(A)})})}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("button",{onClick:N?k:S,className:"w-16 h-16 rounded-full bg-[#D2691E] text-white flex items-center justify-center shadow-md hover:bg-[#A0522D] transition-colors",children:N?e.jsx(ut,{className:"w-8 h-8"}):e.jsx(gt,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"flex gap-6 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Start Page"}),e.jsx("input",{type:"number",value:x,onChange:a=>u(parseInt(a.target.value)||1),min:"1",max:t.number_of_pages_median||1e3,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]",disabled:N||A>0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"End Page"}),e.jsx("input",{type:"number",value:d,onChange:a=>j(parseInt(a.target.value)||1),min:x,max:t.number_of_pages_median||1e3,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]})]}),e.jsx("button",{onClick:()=>g(!c),className:"w-full py-2 text-sm text-[#D2691E] mb-2",children:c?"Hide Note Form":"+ Add a note about this session"}),c&&e.jsxs("div",{className:"space-y-4 mb-4 p-4 bg-[#F7F5F3] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:C,onChange:a=>T(a.target.value),placeholder:"e.g. Chapter 5",className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8B7355] mb-2",children:"Note"}),e.jsx("textarea",{value:p,onChange:a=>v(a.target.value),placeholder:"Write your thoughts about this reading session...",rows:4,className:"w-full p-2 border border-[#E5E5E5] rounded-md text-[#3A3A3A] resize-none"})]})]})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-[#F0EDE8] flex gap-4 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>{r.showConfirm("Cancel Session","Are you sure you want to cancel this session? All progress will be lost.",()=>{B(),s(-1)},{confirmText:"Yes, Cancel",cancelText:"Keep Reading"})},className:"flex-1 py-3 px-4 bg-white border border-[#E5E5E5] text-[#8B7355] rounded-lg font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Cancel"]}),e.jsxs("button",{onClick:I,className:"flex-1 py-3 px-4 bg-[#D2691E] text-white rounded-lg font-medium text-sm flex items-center justify-center gap-2",disabled:!A,children:[e.jsx(ee,{className:"w-5 h-5"}),"Finish"]})]}),e.jsx(ne,{isOpen:r.isOpen,onClose:r.close,onConfirm:r.onConfirm||void 0,title:r.config.title,message:r.config.message,type:r.config.type,confirmText:r.config.confirmText,cancelText:r.config.cancelText})]})},ms=()=>{const s=J(),{books:t}=X(),{updatePetFromBookCompletion:i}=V(),n=ae(),[o,r]=b.useState(null),[x,u]=b.useState(null),[d,j]=b.useState({}),[c,g]=b.useState([]);b.useEffect(()=>{(()=>{const m=JSON.parse(localStorage.getItem("bookish_books")||"[]");g(m)})()},[]),b.useEffect(()=>{const a=()=>{r(null)};if(o)return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[o]);const p=c.length>0?c:t,v=a=>{s(`/book?book=${a.key}`,{state:{bookData:a}})},C=(a,m)=>{m.stopPropagation(),n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const h=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(_=>_.key!==a);localStorage.setItem("bookish_books",JSON.stringify(h));const F=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(_=>_.key!==a);localStorage.setItem("myBooks",JSON.stringify(F)),g(h)},{confirmText:"Remove",cancelText:"Keep Book"}),r(null)},T=(a,m,y)=>{const E=JSON.parse(localStorage.getItem("bookish_books")||"[]").map($=>$.key===a?{...$,category:m}:$);localStorage.setItem("bookish_books",JSON.stringify(E));const _=JSON.parse(localStorage.getItem("myBooks")||"[]").map($=>$.key===a?{...$,category:m}:$);localStorage.setItem("myBooks",JSON.stringify(_)),g(E),u(null),r(null)},N=(a,m)=>{m.stopPropagation(),n.showConfirm("Mark as Completed","Mark this book as completed? This will give your pet a big experience boost!",()=>{T(a,"completed"),i(),setTimeout(()=>{n.showAlert("Book Completed!","🎉 Book marked as completed! Check your pet for an experience boost!","success")},100)},{confirmText:"Mark Complete",cancelText:"Cancel"}),r(null)},A=(a,m)=>{m.stopPropagation(),r(o===a?null:a)},S=a=>{const m=ge(a);if(m.length===0)return 0;const y=m[m.length-1],h=t.find(E=>E.key===a);return!(h!=null&&h.number_of_pages_median)||!y.endPage?0:Math.min(100,Math.round(y.endPage/h.number_of_pages_median*100))},k=a=>ge(a).reduce((y,h)=>y+(h.duration||0),0),f=a=>{const m=Math.floor(a/60),y=a%60;return m>0?`${m}h ${y}m`:`${y}m`},B=()=>{const a=[],m=[],y=[];return p.forEach(h=>{const E=S(h.key),F=k(h.key);h.category==="want-to-read"?y.push(h):h.category==="completed"||E>=100?m.push(h):h.category==="currently-reading"||E>0||F>0?a.push(h):y.push(h)}),{currentlyReading:a,completed:m,wantToRead:y}},I=a=>{const m=S(a.key),y=k(a.key),h=d[a.key]||{translateX:0,isDeleting:!1},E=R=>{const w=R.touches[0];j(D=>({...D,[a.key]:{...h,startX:w.clientX,startY:w.clientY}}))},F=R=>{const w=R.touches[0],D=d[a.key];if(!(D!=null&&D.startX)||!(D!=null&&D.startY))return;const P=w.clientX-D.startX,O=w.clientY-D.startY;Math.abs(O)>Math.abs(P)||P<-20&&j(U=>({...U,[a.key]:{...D,translateX:Math.max(P,-120)}}))},_=()=>{const R=d[a.key];R&&(R.translateX<-60?j(w=>({...w,[a.key]:{...R,translateX:-120,isDeleting:!0}})):j(w=>({...w,[a.key]:{...R,translateX:0,isDeleting:!1}})))},$=()=>{n.showConfirm("Remove Book","Are you sure you want to remove this book from your library?",()=>{const w=JSON.parse(localStorage.getItem("bookish_books")||"[]").filter(O=>O.key!==a.key);localStorage.setItem("bookish_books",JSON.stringify(w));const P=JSON.parse(localStorage.getItem("myBooks")||"[]").filter(O=>O.key!==a.key);localStorage.setItem("myBooks",JSON.stringify(P)),g(w),j(O=>{const U={...O};return delete U[a.key],U})},{confirmText:"Remove",cancelText:"Keep Book"})},q=()=>{j(R=>({...R,[a.key]:{translateX:0,isDeleting:!1}}))};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm cursor-pointer hover:shadow-md transition-shadow relative",style:{transform:`translateX(${h.translateX}px)`,transition:h.isDeleting||h.translateX===0?"transform 0.3s ease":"none",overflow:h.isDeleting?"hidden":"visible"},onTouchStart:E,onTouchMove:F,onTouchEnd:_,children:[e.jsxs("div",{className:"flex gap-3 p-4",onClick:()=>!h.isDeleting&&v(a),children:[e.jsxs("div",{className:"w-12 h-16 bg-[#F0EDE8] rounded flex-shrink-0 flex items-center justify-center",children:[a.cover_i?e.jsx("img",{src:`https://covers.openlibrary.org/b/id/${a.cover_i}-M.jpg`,alt:a.title,className:"w-full h-full object-cover rounded",onError:R=>{var D;const w=R.target;w.style.display="none",(D=w.nextElementSibling)==null||D.classList.remove("hidden")}}):null,e.jsx(L,{className:`w-6 h-6 text-[#8B7355] ${a.cover_i?"hidden":""}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-serif font-medium text-[#3A3A3A] text-sm leading-tight mb-1 truncate",children:a.title}),a.author_name&&e.jsxs("p",{className:"text-xs text-[#8B7355] mb-2 truncate",children:["by ",a.author_name[0]]}),m>0&&m<100&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-[#8B7355]",children:"Progress"}),e.jsxs("span",{className:"text-xs text-[#8B7355]",children:[m,"%"]})]}),e.jsx("div",{className:"w-full bg-[#F0EDE8] rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#8B7355] h-1.5 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]}),m>=100&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mb-2",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{children:"Completed"})]}),y>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#8B7355]",children:[e.jsx(Q,{className:"w-3 h-3"}),e.jsxs("span",{children:[f(y)," read"]})]})]})]}),!h.isDeleting&&e.jsx("button",{onClick:R=>A(a.key,R),className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#F0EDE8] flex items-center justify-center hover:bg-[#E8E3DD] transition-colors",children:e.jsx(ft,{className:"w-4 h-4 text-[#8B7355]"})}),"        ",o===a.key&&!h.isDeleting&&e.jsxs("div",{className:"absolute top-10 right-3 bg-white rounded-lg shadow-lg border border-[#E8E3DD] py-1 z-50 min-w-[180px]",children:[e.jsxs("button",{onClick:R=>{R.stopPropagation(),u(a.key),r(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-[#8B7355] hover:bg-[#F0EDE8] w-full text-left",children:[e.jsx(pt,{className:"w-4 h-4"}),"Move to category"]}),a.category!=="completed"&&e.jsxs("button",{onClick:R=>N(a.key,R),className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 w-full text-left",children:[e.jsx(ee,{className:"w-4 h-4"}),"Mark as completed"]}),e.jsxs("button",{onClick:R=>C(a.key,R),className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx(Le,{className:"w-4 h-4"}),"Remove from library"]})]}),h.isDeleting&&e.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:q,className:"px-3 py-1 text-xs bg-white text-red-500 rounded",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-3 py-1 text-xs bg-red-700 text-white rounded",children:"Delete"})]})})]},a.key)},l=(a,m)=>m.length===0?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4 flex items-center gap-2",children:[a,e.jsxs("span",{className:"text-sm text-[#8B7355] font-normal",children:["(",m.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:m.map(I)})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Library"})]})}),"      ",e.jsx("main",{className:"p-4",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No books yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start building your library by searching for books to read"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find Books"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[p.length," book",p.length!==1?"s":""," in your library"]})}),(()=>{const{currentlyReading:a,completed:m,wantToRead:y}=B();return e.jsxs(e.Fragment,{children:[l("Currently Reading",a),l("Want to Read",y),l("Completed",m)]})})()]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-sm",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Move Book"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Choose a new category:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>T(x,"want-to-read"),className:"w-full p-3 bg-[#F0EDE8] rounded-lg text-left hover:bg-[#E8E3DD] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Want to Read"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you plan to read"})]}),e.jsxs("button",{onClick:()=>T(x,"currently-reading"),className:"w-full p-3 bg-[#E8E3DD] rounded-lg text-left hover:bg-[#DDD8CE] transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Currently Reading"}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:"Books you're actively reading"})]}),e.jsxs("button",{onClick:()=>T(x,"completed"),className:"w-full p-3 bg-green-50 rounded-lg text-left hover:bg-green-100 transition-colors",children:[e.jsx("div",{className:"font-medium text-[#3A3A3A]",children:"Completed"}),e.jsx("div",{className:"text-xs text-green-600",children:"Books you've finished"})]})]}),e.jsx("button",{onClick:()=>u(null),className:"w-full mt-4 py-2 text-sm text-[#8B7355] hover:text-[#3A3A3A] transition-colors",children:"Cancel"}),"          "]})}),e.jsx(ne,{isOpen:n.isOpen,onClose:n.close,onConfirm:n.onConfirm||void 0,title:n.config.title,message:n.config.message,type:n.config.type,confirmText:n.config.confirmText,cancelText:n.config.cancelText})]})},xs=()=>{const s=J(),{books:t}=X(),{pet:i}=V(),n=qe(),o=Ne(),r=se(),x=g=>{const p=Math.floor(g/60),v=g%60;return p>0?`${p}h ${v}m`:`${v}m`},u=()=>{if(r.length===0)return 0;const g=r.reduce((p,v)=>p+(v.duration||0),0);return Math.round(g/r.length)},j=(()=>{const g=new Date,p=new Date(g.getFullYear(),g.getMonth(),1),v=r.filter(N=>new Date(N.startTime)>=p),C=v.reduce((N,A)=>N+(A.duration||0),0),T=v.reduce((N,A)=>N+((A.endPage||0)-(A.startPage||0)),0);return{time:C,pages:T,sessions:v.length}})(),c=({icon:g,title:p,value:v,subtitle:C})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-[#F0EDE8] rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-[#8B7355]"})}),e.jsx("span",{className:"text-sm text-[#8B7355] font-medium",children:p})]}),e.jsx("p",{className:"text-2xl font-serif font-medium text-[#3A3A3A] mb-1",children:v}),C&&e.jsx("p",{className:"text-xs text-[#8B7355]",children:C})]});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"Reading Statistics"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(c,{icon:L,title:"Books Read",value:n.totalBooksRead.toString(),subtitle:"this year"}),e.jsx(c,{icon:Q,title:"Total Time",value:x(n.totalReadingTime),subtitle:"all time"}),e.jsx(c,{icon:he,title:"Pages Read",value:n.totalPagesRead.toString(),subtitle:"all time"}),e.jsx(c,{icon:Be,title:"Current Streak",value:`${o.currentStreak} days`,subtitle:`longest: ${o.longestStreak} days`})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"This Month"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ue,{className:"w-5 h-5 text-[#8B7355]"}),e.jsx("span",{className:"font-medium text-[#3A3A3A]",children:"Monthly Progress"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:j.sessions}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:x(j.time)}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"reading time"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:j.pages}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"pages"})]})]})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Recent Activity"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(c,{icon:Q,title:"Today",value:x(n.readingTimeToday)}),e.jsx(c,{icon:ue,title:"This Week",value:x(n.readingTimeThisWeek)}),e.jsx(c,{icon:he,title:"Average Session",value:x(u())}),e.jsx(c,{icon:L,title:"Books in Library",value:t.length.toString()})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-3",children:"Reading Companion"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(jt,{className:"w-5 h-5 text-[#8B7355]"}),e.jsxs("span",{className:"font-medium text-[#3A3A3A]",children:[i.name,"'s Progress"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:i.level}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"level"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:[i.happiness,"%"]}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"happiness"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-serif font-medium text-[#3A3A3A]",children:i.experience}),e.jsx("p",{className:"text-xs text-[#8B7355]",children:"experience"})]})]})]})]}),r.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Be,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Start tracking your reading"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Begin a reading session to see your statistics here"}),e.jsx("button",{onClick:()=>s("/search"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Find a Book to Read"})]})]})]})},hs=()=>{const s=J(),{notes:t,books:i,deleteNote:n}=X(),o=ae(),r=d=>{o.showConfirm("Delete Note","Are you sure you want to delete this note? This action cannot be undone.",()=>{n(d)},{confirmText:"Delete",cancelText:"Cancel"})},x=d=>{const j=i.find(c=>c.key===d);return j?j.title:"Unknown Book"},u=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Notes"})]}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"w-8 h-8 rounded-full bg-[#8B7355] flex items-center justify-center",children:e.jsx($e,{className:"w-5 h-5 text-white"})})]})}),e.jsx("main",{className:"p-4",children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 text-[#8B7355] mx-auto mb-4"}),e.jsx("h2",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"No notes yet"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-6",children:"Start taking notes while reading to remember important thoughts and insights"}),e.jsx("button",{onClick:()=>s("/notes/add"),className:"bg-[#8B7355] text-white px-6 py-3 rounded-xl font-medium",children:"Add Your First Note"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-sm text-[#8B7355]",children:[t.length," note",t.length!==1?"s":""]})}),"            ",t.map(d=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-4 h-4 text-[#8B7355]"}),e.jsx("span",{className:"text-sm font-medium text-[#3A3A3A] truncate",children:x(d.bookId)})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#8B7355]",children:[d.chapter&&e.jsxs("span",{children:["Chapter: ",d.chapter]}),d.page&&e.jsxs("span",{children:["Page ",d.page]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),e.jsx("span",{children:u(d.createdAt)})]})]})]}),e.jsx("button",{onClick:()=>r(d.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:e.jsx(Le,{className:"w-4 h-4"})})]}),"                ",e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"text-[#3A3A3A] leading-relaxed whitespace-pre-wrap",children:d.content})})]},d.id))]})}),e.jsx(ne,{isOpen:o.isOpen,onClose:o.close,onConfirm:o.onConfirm||void 0,title:o.config.title,message:o.config.message,type:o.config.type,confirmText:o.config.confirmText,cancelText:o.config.cancelText})]})},us=()=>{const s=J(),[t]=Me(),{books:i,currentBook:n,addNote:o,notes:r,updateNote:x}=X(),u=ae(),d=t.get("edit"),[j,c]=b.useState((n==null?void 0:n.key)||""),[g,p]=b.useState(""),[v,C]=b.useState(""),[T,N]=b.useState("");b.useEffect(()=>{var k;if(d){const f=r.find(B=>B.id===d);f&&(c(f.bookId),p(f.content),C(((k=f.page)==null?void 0:k.toString())||""),N(f.chapter||""))}},[d,r]);const A=()=>{var f;if(!g.trim()){u.showAlert("Content Required","Please add some content to your note before saving.","alert");return}const k={id:d||ye(),bookId:j,content:g.trim(),page:v?parseInt(v):void 0,chapter:T.trim()||void 0,createdAt:d?((f=r.find(B=>B.id===d))==null?void 0:f.createdAt)||new Date().toISOString():new Date().toISOString(),updatedAt:new Date().toISOString()};d&&x?x(k):o(k),u.showAlert("Note Saved","Your note has been saved successfully!","success"),setTimeout(()=>{s("/notes")},1500)},S=()=>{g.trim()||T.trim()||v.trim()?u.showConfirm("Discard Note","You have unsaved changes. Are you sure you want to go back?",()=>{s(-1)},{confirmText:"Discard",cancelText:"Keep Editing"}):s(-1)};return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:S,className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:d?"Edit Note":"Add Note"})]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-[#8B7355] text-white px-4 py-2 rounded-lg text-sm font-medium",children:[e.jsx(bt,{className:"w-4 h-4"}),"Save"]})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Select Book"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:j,onChange:k=>c(k.target.value),className:"w-full p-3 pr-10 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] appearance-none",children:[e.jsx("option",{value:"",children:"Choose a book..."}),i.map(k=>e.jsx("option",{value:k.key,children:k.title},k.key))]}),e.jsx(L,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B7355] pointer-events-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Chapter (optional)"}),e.jsx("input",{type:"text",value:T,onChange:k=>N(k.target.value),placeholder:"e.g., Chapter 5",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Page (optional)"}),e.jsx("input",{type:"number",value:v,onChange:k=>C(k.target.value),placeholder:"Page number",className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A]"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#3A3A3A] mb-2",children:"Your Note"}),e.jsx("textarea",{value:g,onChange:k=>p(k.target.value),placeholder:"Write your thoughts, insights, or reflections about this part of the book...",rows:8,className:"w-full p-3 bg-white border border-[#E8E3DD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#8B7355] text-[#3A3A3A] resize-none"}),e.jsxs("p",{className:"text-xs text-[#8B7355] mt-2",children:[g.length,"/500 characters"]})]}),e.jsxs("div",{className:"bg-[#F0EDE8] rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-[#3A3A3A] mb-2",children:"💡 Note-taking tips:"}),e.jsxs("ul",{className:"text-sm text-[#8B7355] space-y-1",children:[e.jsx("li",{children:"• Write down key insights or quotes that resonate with you"}),e.jsx("li",{children:"• Note questions or thoughts the reading sparked"}),e.jsx("li",{children:"• Record connections to other books or personal experiences"}),e.jsx("li",{children:"• Include your emotional reactions or reflections"})]})]})]}),e.jsx(ne,{isOpen:u.isOpen,onClose:u.close,onConfirm:u.onConfirm||void 0,title:u.config.title,message:u.config.message,type:u.config.type,confirmText:u.config.confirmText,cancelText:u.config.cancelText})]})},gs=()=>{const s=J(),{pet:t,petStats:i,feedPet:n,playWithPet:o,petSleep:r,getPetMood:x,getPetEvolutionRequirement:u,resetPet:d,updatePetName:j,getPetEmoji:c,canEvolve:g,evolvePet:p}=V(),[v,C]=b.useState(!1),[T,N]=b.useState(t.name),[A,S]=b.useState(!1),k=h=>h>70?"bg-green-500":h>40?"bg-yellow-500":"bg-red-500",f=h=>`${Math.max(0,Math.min(100,h))}%`,B=()=>{T.trim()&&(j(T.trim()),C(!1))},I=()=>{d(),S(!1)},l=h=>({"first-book":"📖","book-lover":"📚",bookworm:"🐛","speed-reader":"⚡","night-owl":"🦉","early-bird":"🐦"})[h]||"🏆",a=h=>({"first-book":"Read your first book","book-lover":"Read 10 books",bookworm:"Read 50 books","speed-reader":"Read for 100+ minutes in a day","night-owl":"Read after midnight","early-bird":"Read before 6 AM"})[h]||"Special achievement",m=h=>{const E=Math.floor(h/60),F=h%60;return E>0?`${E}h ${F}m`:`${F}m`},y=u();return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-[#F7F5F3]",children:[e.jsx("header",{className:"p-4 bg-[#F7F5F3] border-b border-[#E8E3DD]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(-1),className:"w-8 h-8 rounded-full bg-[#F0EDE8] flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-[#8B7355]"})}),e.jsx("h1",{className:"font-serif text-xl font-medium text-[#3A3A3A]",children:"My Reading Pet"})]})}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[e.jsx("div",{className:"text-8xl mb-4",children:c()}),e.jsxs("div",{className:"mb-4",children:[v?e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx("input",{type:"text",value:T,onChange:h=>N(h.target.value),className:"text-2xl font-serif font-medium bg-[#F0EDE8] rounded px-3 py-1 border text-center",onBlur:B,onKeyPress:h=>h.key==="Enter"&&B(),autoFocus:!0})}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("h2",{className:"text-2xl font-serif font-medium text-[#3A3A3A]",children:t.name}),e.jsx("button",{onClick:()=>C(!0),className:"p-1 text-[#8B7355] hover:bg-[#F0EDE8] rounded",children:e.jsx(K,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg text-[#8B7355] mb-2",children:[e.jsxs("span",{children:["Level ",t.level]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:t.evolutionStage})]}),g()&&e.jsxs("button",{onClick:p,className:"bg-gradient-to-r from-[#D2691E] to-[#FF8C00] text-white px-6 py-2 rounded-full font-medium mb-2",children:["✨ Evolve to ",y.stage,"!"]})]}),e.jsx("p",{className:"text-[#3A3A3A] mb-4",children:x()}),e.jsx("div",{className:"mb-4 p-3 bg-[#F0EDE8] rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#D2691E] mb-1",children:["💰 ",t.points]}),e.jsx("p",{className:"text-sm text-[#8B7355]",children:"Care Points (Earned from reading)"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-[#8B7355] mb-2",children:[e.jsx("span",{children:"Experience"}),e.jsxs("span",{children:[t.experience,"/",t.experienceToNext]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#D2691E] to-[#FF8C00] rounded-full transition-all duration-300",style:{width:`${t.experience/t.experienceToNext*100}%`}})})]}),"          ",e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:n,disabled:t.points<3,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=3?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Ee,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Feed"}),e.jsx("span",{className:"text-xs",children:"💰 3 pts"})]}),e.jsxs("button",{onClick:o,disabled:t.points<5,className:`py-3 px-4 rounded-xl font-medium transition-colors flex flex-col items-center gap-1 ${t.points>=5?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(xe,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Play"}),e.jsx("span",{className:"text-xs",children:"💰 5 pts"})]}),e.jsxs("button",{onClick:r,className:"py-3 px-4 bg-purple-100 text-purple-700 rounded-xl font-medium hover:bg-purple-200 transition-colors flex flex-col items-center gap-1",children:[e.jsx(De,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Sleep"}),e.jsx("span",{className:"text-xs",children:"Free"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Pet Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"Happiness"})]}),e.jsxs("span",{children:[t.happiness,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${k(t.happiness)} rounded-full transition-all duration-300`,style:{width:f(t.happiness)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Hunger"})]}),e.jsxs("span",{children:[t.hunger,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${k(t.hunger)} rounded-full transition-all duration-300`,style:{width:f(t.hunger)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Energy"})]}),e.jsxs("span",{children:[t.energy,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${k(t.energy)} rounded-full transition-all duration-300`,style:{width:f(t.energy)}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Health"})]}),e.jsxs("span",{children:[t.health,"/100"]})]}),e.jsx("div",{className:"h-3 bg-[#F0EDE8] rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${k(t.health)} rounded-full transition-all duration-300`,style:{width:f(t.health)}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Reading Progress"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:t.totalBooksRead}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Books Read"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:m(t.totalReadingTime)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Total Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:i.booksReadToday}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Books"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[#D2691E]",children:m(i.readingTimeToday)}),e.jsx("div",{className:"text-sm text-[#8B7355]",children:"Today's Time"})]})]})]}),t.badges.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-4",children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.badges.map((h,E)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#F0EDE8] rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:l(h)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-[#3A3A3A] capitalize text-sm",children:h.replace("-"," ")}),e.jsx("div",{className:"text-xs text-[#8B7355]",children:a(h)})]})]},E))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[e.jsx("h3",{className:"font-serif text-lg font-medium text-[#3A3A3A] mb-2",children:"Pet Management"}),e.jsx("p",{className:"text-sm text-[#8B7355] mb-4",children:"Reset your pet to start over with a new companion. This action cannot be undone."}),A?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Are you sure you want to reset your pet?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:I,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium",children:"Yes, Reset"}),e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),"Reset Pet"]})]})]})]})},fs=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"app-titlebar hidden",children:e.jsxs("div",{className:"app-titlebar-content",children:[e.jsx("div",{className:"app-titlebar-icon",children:"📚"}),e.jsx("span",{children:"Bookish"})]})}),e.jsx(Ut,{children:e.jsx(Ot,{children:e.jsx(Ge,{basename:"/Bookish",children:e.jsxs(Ze,{children:[e.jsx(Y,{path:"/",element:e.jsx(Kt,{})}),e.jsx(Y,{path:"/welcome",element:e.jsx(Ht,{})}),e.jsx(Y,{path:"/search",element:e.jsx(ns,{})}),e.jsx(Y,{path:"/library",element:e.jsx(ms,{})}),e.jsx(Y,{path:"/book",element:e.jsx(as,{})}),e.jsx(Y,{path:"/reading",element:e.jsx(ds,{})}),e.jsx(Y,{path:"/notes",element:e.jsx(hs,{})}),e.jsx(Y,{path:"/notes/add",element:e.jsx(us,{})}),e.jsx(Y,{path:"/pet",element:e.jsx(gs,{})}),e.jsx(Y,{path:"/stats",element:e.jsx(xs,{})})]})})})})]});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});St.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(fs,{})}));
